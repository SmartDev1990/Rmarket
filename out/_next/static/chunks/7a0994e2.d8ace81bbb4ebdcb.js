"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[260],{66240:function(t,e,i){i.d(e,{A:function(){return dn},C:function(){return Is},D:function(){return _l},E:function(){return Dc},F:function(){return Nh},G:function(){return od},H:function(){return rd},I:function(){return nd},J:function(){return dd},K:function(){return Hd},L:function(){return Nd},M:function(){return Wd},N:function(){return Vs},O:function(){return $d},a:function(){return Ee},b:function(){return Me},c:function(){return Ie},d:function(){return lo},f:function(){return E},k:function(){return ar},l:function(){return H},m:function(){return N},n:function(){return lr},o:function(){return hr},r:function(){return Us},s:function(){return Ra},t:function(){return el},u:function(){return il},v:function(){return ol},w:function(){return nl},x:function(){return sl},y:function(){return al}});var o=i(95985),r=i(53918),n=i(67294),s=i(73935),a=(0,o.a)(((t,e)=>{var o=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,a=parseInt,l="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,c="object"==typeof self&&self&&self.Object===Object&&self,h=l||c||Function("return this")(),d=Object.prototype.toString,p=Math.max,u=Math.min,g=function(){return h.Date.now()};function m(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function f(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==d.call(t)}(t))return NaN;if(m(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=m(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(o,"");var i=n.test(t);return i||s.test(t)?a(t.slice(2),i?2:8):r.test(t)?NaN:+t}e.exports=function(t,e,i){var o,r,n,s,a,l,c=0,h=!1,d=!1,y=!0;if("function"!=typeof t)throw new TypeError("Expected a function");function b(e){var i=o,n=r;return o=r=void 0,c=e,s=t.apply(n,i)}function S(t){return c=t,a=setTimeout(x,e),h?b(t):s}function v(t){var i=t-l;return void 0===l||i>=e||i<0||d&&t-c>=n}function x(){var t=g();if(v(t))return w(t);a=setTimeout(x,function(t){var i=e-(t-l);return d?u(i,n-(t-c)):i}(t))}function w(t){return a=void 0,y&&o?b(t):(o=r=void 0,s)}function C(){var t=g(),i=v(t);if(o=arguments,r=this,l=t,i){if(void 0===a)return S(l);if(d)return a=setTimeout(x,e),b(l)}return void 0===a&&(a=setTimeout(x,e)),s}return e=f(e)||0,m(i)&&(h=!!i.leading,n=(d="maxWait"in i)?p(f(i.maxWait)||0,e):n,y="trailing"in i?!!i.trailing:y),C.cancel=function(){void 0!==a&&clearTimeout(a),c=0,o=l=r=a=void 0},C.flush=function(){return void 0===a?s:w(g())},C}})),l=(0,o.a)(((t,e)=>{var o="Expected a function",r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,a=/^0o[0-7]+$/i,l=parseInt,c="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,h="object"==typeof self&&self&&self.Object===Object&&self,d=c||h||Function("return this")(),p=Object.prototype.toString,u=Math.max,g=Math.min,m=function(){return d.Date.now()};function f(t,e,i){var r,n,s,a,l,c,h=0,d=!1,p=!1,f=!0;if("function"!=typeof t)throw new TypeError(o);function S(e){var i=r,o=n;return r=n=void 0,h=e,a=t.apply(o,i)}function v(t){return h=t,l=setTimeout(w,e),d?S(t):a}function x(t){var i=t-c;return void 0===c||i>=e||i<0||p&&t-h>=s}function w(){var t=m();if(x(t))return C(t);l=setTimeout(w,function(t){var i=e-(t-c);return p?g(i,s-(t-h)):i}(t))}function C(t){return l=void 0,f&&r?S(t):(r=n=void 0,a)}function E(){var t=m(),i=x(t);if(r=arguments,n=this,c=t,i){if(void 0===l)return v(c);if(p)return l=setTimeout(w,e),S(c)}return void 0===l&&(l=setTimeout(w,e)),a}return e=b(e)||0,y(i)&&(d=!!i.leading,s=(p="maxWait"in i)?u(b(i.maxWait)||0,e):s,f="trailing"in i?!!i.trailing:f),E.cancel=function(){void 0!==l&&clearTimeout(l),h=0,r=c=n=l=void 0},E.flush=function(){return void 0===l?a:C(m())},E}function y(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function b(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==p.call(t)}(t))return NaN;if(y(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=y(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var i=s.test(t);return i||a.test(t)?l(t.slice(2),i?2:8):n.test(t)?NaN:+t}e.exports=function(t,e,i){var r=!0,n=!0;if("function"!=typeof t)throw new TypeError(o);return y(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),f(t,e,{leading:r,maxWait:e,trailing:n})}})),c=r.iv`
  &:focus {
    outline: none;
    box-shadow: 0 0 2px ${t=>t.theme.focusOutlineColor};
  }
  &:-moz-focusring {
    outline: none;
    box-shadow: 0 0 2px ${t=>t.theme.focusOutlineColor};
  }
`,h=r.iv`
  position: absolute !important;
  height: 1px;
  width: 1px;
  overflow: hidden;
  clip: rect(1px 1px 1px 1px); /* IE6, IE7 */
  clip: rect(1px, 1px, 1px, 1px);
`,d=r.F4`
from {
  opacity: 1;
  transform: scale(0);
}
to {
  opacity: 0;
  transform: scale(10);
}
`,p=r.ZP.span`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,u=(0,r.ZP)(p)``,g=(0,r.ZP)(p)``,m=(0,r.ZP)(p)``,f={display:"none",left:0,top:0},y=(0,r.ZP)(p)`
  display: ${({display:t})=>t};
  left: ${({left:t})=>t}px;
  top: ${({top:t})=>t}px;
  pointer-events: none;
  border-radius: 50%;
  background-color: rgba(255, 255, 255, 0.12);
  animation: ${d} 1.2s;
  width: 100px;
  height: 100px;
  margin-top: -50px;
  margin-left: -50px;
  opacity: 0;
`,b=r.iv`
  color: ${t=>t.theme.button.activeForeground};
  border-color: ${t=>t.theme.button.activeForeground};

  svg {
    color: ${t=>t.theme.button.activeForeground};
  }
`,S=r.ZP.button`
  &&& {
    box-sizing: border-box;
  }
  text-align: center;
  position: relative;
  padding: 4px 8px;
  min-height: 32px;
  border-radius: ${t=>t.theme.shape.radiusMedium}px;
  font-size: ${t=>t.theme.measurements.fontSystem.button1.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.button1.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.button1.case};
  font-family: ${t=>t.theme.typography.fontFamily}, sans-serif;
  cursor: pointer;
  border: none;
  background-color: transparent;
  overflow: hidden;
  ${c}

  /* Active */

  &:active {
    ${b}
  }

  ${({isActive:t})=>t&&b}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${g} {
      background-color: ${t=>t.theme.button.outlinedInactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${m} {
      background-color: ${t=>t.theme.button.hoverOverlayColor};
    }
  }

  div {
    font-size: ${t=>t.theme.measurements.fontSystem.button1.size}px;
    letter-spacing: ${t=>t.theme.measurements.fontSystem.button1.letterSpacing}px;
  }
`,v=class extends n.Component{constructor(){super(...arguments),this.state=f,this.timeout=null,this.onClick=t=>{const e=t.currentTarget.getBoundingClientRect(),i=t.pageX-e.left,o=t.pageY-e.top;"block"===this.state.display?this.setState({display:"none"},(()=>{this.setRippleState(i,o)})):this.setRippleState(i,o),this.props.onClick(t)},this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"}),this.timeout=setTimeout((()=>{this.setState({display:"none"})}),1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{isActive:t,isDisabled:e,label:i,ariaLabel:o,children:r,className:s,...a}=this.props,{left:l,top:c,display:h}=this.state;return n.createElement(S,{"data-test":o,className:s,isActive:t,disabled:e,"aria-label":o,...a,onClick:this.onClick},i,r,n.createElement(y,{display:h,left:l,top:c}),n.createElement(g,null),n.createElement(m,null))}};v.defaultProps={type:"button",isDisabled:!1,isActive:!1};var x,w,C=(0,r.ZP)(v)`
  color: ${t=>t.theme.button.textPrimaryForeground};

  svg {
    color: ${t=>t.theme.button.textPrimaryForeground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:t})=>t&&b}

  ${g} {
    display: none;
  }

  &:disabled {
    opacity: ${t=>t.theme.button.textInactiveOpacity};
  }
`,E=(0,r.ZP)(v)`
  color: ${t=>t.theme.button.textSecondaryForeground};

  /* Repeat active styles so they are not overwritten */
  ${({isActive:t})=>t&&b}

  ${g} {
    display: none;
  }

  &:disabled {
    opacity: ${t=>t.theme.button.textInactiveOpacity};
  }

  svg {
    color: ${t=>t.theme.button.textSecondaryForeground};
  }
`,k=(0,r.ZP)(v)`
  ${({fullWidth:t})=>t&&r.iv`
      width: 100%;
    `}
`,T=r.ZP.div`
  &:focus {
    outline: none;
  }

  > img {
    height: 18px;
    width: 18px;
  }

  > svg {
    height: 18px;
    width: 18px;
  }
  display: none;

  @media all and (min-width: 0) and (max-width: 599px) {
    display: flex;
  }
`,M=r.ZP.div`
  display: flex;
  justify-content: center;
  align-items: center;
  &:focus {
    outline: none;
  }
  font-size: inherit;
  text-spacing: inherit;
  color: inherit;

  ${({isDisabled:t})=>t&&r.iv`
      opacity: ${t=>t.theme.button.textInactiveOpacity};
    `}
  ${({hasIcon:t})=>t&&r.iv`
      @media all and (min-width: 0) and (max-width: 599px) {
        display: none;
      }
    `}
`,z=({label:t,children:e,icon:i,fullWidth:o,isDisabled:r,...s})=>{const a=n.createElement(M,{hasIcon:!!i,isDisabled:r},t,e);return n.createElement(k,{fullWidth:o,isDisabled:r,...s},i&&n.createElement(T,null,i),(e||t)&&a)},P=(0,r.ZP)(z)`
  background: ${t=>t.theme.button.outlinedPrimaryBackground};
  color: ${t=>t.theme.button.outlinedPrimaryForeground};
  border: 1px solid ${t=>t.theme.button.outlinedBorderColor};
  min-width: 32px;

  svg {
    color: ${t=>t.theme.button.outlinedPrimaryForeground};
  }
`,I=(0,r.ZP)(z)`
  background: ${t=>t.theme.button.outlinedSecondaryBackground};
  color: ${t=>t.theme.button.outlinedSecondaryForeground};
  border: 1px solid ${t=>t.theme.button.outlinedBorderColor};

  svg {
    color: ${t=>t.theme.button.outlinedSecondaryForeground};
  }

  ${({isActive:t})=>t&&b}
`,R=(0,r.ZP)(v)`
  color: ${t=>t.theme.foreground};

  svg {
    color: ${t=>t.theme.foreground};
  }

  /* Repeat active styles so they are not overwritten */
  ${({isActive:t})=>t&&b}

  ${g} {
    display: none;
  }

  &:disabled {
    opacity: ${t=>t.theme.button.textInactiveOpacity};
  }
`,D=r.ZP.div`
  display: flex;
  &:focus {
    outline: none;
  }
`,O=({label:t,icon:e,children:i,...o})=>n.createElement(R,{...o},n.createElement(D,null,e)),L=(0,r.ZP)(z)`
  background: ${t=>t.theme.button.containedPrimaryBackground};
  color: ${t=>t.theme.button.containedPrimaryForeground};
  border: 1px solid ${t=>t.theme.button.containedPrimaryBackground};

  &:active {
    color: ${t=>t.theme.button.containedPrimaryForeground};
  }

  svg {
    color: ${t=>t.theme.button.containedPrimaryForeground};

    &:active {
      color: ${t=>t.theme.button.containedPrimaryForeground};
    }
  }
`,A=r.ZP.div`
  display: flex;
  justify-content: center;
  align-items: center;
  padding: 0 4px;
  font-size: ${t=>t.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.label.case};
  ${t=>t.withBackground?r.iv`
          color: ${t.theme.card.labelForeground};
        `:r.iv`
          color: ${t.theme.card.foreground};
        `}
`,_=r.ZP.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;
  position: absolute;
  bottom: 0px;
  border-radius: ${t=>t.theme.shape.radiusMedium}px;
  left: 0;
  ${t=>t.withBackground?r.iv`
          color: ${t.theme.card.labelForeground};
          height: 40px;
          background: ${t.theme.card.labelBackground};
        `:r.iv`
          color: ${t.theme.card.foreground};
          height: 32px;
        `}
  width: 100%;
  cursor: pointer;
`,F=r.ZP.div`
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${t=>t.theme.card.labelForeground};
  ${t=>t.withBackground?r.iv`
          border-top-color: ${t.theme.card.labelForeground};
        `:r.iv`
          border-top-color: ${t.theme.card.foreground};
        `}
  transform: rotate(${t=>t.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
`,$=r.ZP.span`
  display: flex;
  align-items: center;
  justify-content: center;
  padding-left: 10px;
`,B=r.ZP.div`
  ${h}
`,H=({children:t,className:e,caret:i,isActive:r,style:s,withBackground:a,hidden:l})=>{if(l)return n.createElement(B,null,t);return n.createElement(_,{className:e,withBackground:a,style:s},n.createElement(A,{"data-test":o.Sa.CardLabel,withBackground:a},t,i&&n.createElement($,null,n.createElement(F,{"aria-hidden":!0,rotation:r?180:0,withBackground:a}))))},N=r.ZP.div.attrs((t=>({"data-test":o.Sa.CardAvatar,style:{backgroundImage:`url(${t.url})`}})))`
  position: absolute;
  top: 4px;
  left: 4px;
  height: 28px;
  width: 28px;
  border-radius: 50%;
`,W=r.F4`
  0% {
    opacity: 0;
    transform: scale(0.9);
  }
  100% {
    opacity: 1;
    transform: scale(1);
  }
`,V=r.F4`
  0% {
    opacity: 0;
    transform: scale(0.9) translateY(-20px);
  }
  100% {
    opacity: 1;
    transform: scale(1) translateY(0);
  }
`,U=[],Z="ResizeObserver loop completed with undelivered notifications.";(w=x||(x={})).BORDER_BOX="border-box",w.CONTENT_BOX="content-box",w.DEVICE_PIXEL_CONTENT_BOX="device-pixel-content-box";var G,j=function(){function t(t,e,i,o){return this.x=t,this.y=e,this.width=i,this.height=o,this.top=this.y,this.left=this.x,this.bottom=this.top+this.height,this.right=this.left+this.width,Object.freeze(this)}return t.prototype.toJSON=function(){var t=this;return{x:t.x,y:t.y,top:t.top,right:t.right,bottom:t.bottom,left:t.left,width:t.width,height:t.height}},t.fromRect=function(e){return new t(e.x,e.y,e.width,e.height)},t}(),Y=function(t){return t instanceof SVGElement&&"getBBox"in t},X=function(t){if(Y(t)){var e=t.getBBox(),i=e.width,o=e.height;return!i&&!o}var r=t,n=r.offsetWidth,s=r.offsetHeight;return!(n||s||t.getClientRects().length)},K=function(t){var e,i,o=null===(i=null===(e=t)||void 0===e?void 0:e.ownerDocument)||void 0===i?void 0:i.defaultView;return!!(o&&t instanceof o.Element)},J="undefined"!==typeof window?window:{},q=new WeakMap,Q=/auto|scroll/,tt=/^tb|vertical/,et=/msie|trident/i.test(J.navigator&&J.navigator.userAgent),it=function(t){return parseFloat(t||"0")},ot=function(t,e,i){return void 0===t&&(t=0),void 0===e&&(e=0),void 0===i&&(i=!1),Object.freeze({inlineSize:(i?e:t)||0,blockSize:(i?t:e)||0})},rt=Object.freeze({devicePixelContentBoxSize:ot(),borderBoxSize:ot(),contentBoxSize:ot(),contentRect:new j(0,0,0,0)}),nt=function(t,e){if(void 0===e&&(e=!1),q.has(t)&&!e)return q.get(t);if(X(t))return q.set(t,rt),rt;var i=getComputedStyle(t),o=Y(t)&&t.ownerSVGElement&&t.getBBox(),r=!et&&"border-box"===i.boxSizing,n=tt.test(i.writingMode||""),s=!o&&Q.test(i.overflowY||""),a=!o&&Q.test(i.overflowX||""),l=o?0:it(i.paddingTop),c=o?0:it(i.paddingRight),h=o?0:it(i.paddingBottom),d=o?0:it(i.paddingLeft),p=o?0:it(i.borderTopWidth),u=o?0:it(i.borderRightWidth),g=o?0:it(i.borderBottomWidth),m=d+c,f=l+h,y=(o?0:it(i.borderLeftWidth))+u,b=p+g,S=a?t.offsetHeight-b-t.clientHeight:0,v=s?t.offsetWidth-y-t.clientWidth:0,x=r?m+y:0,w=r?f+b:0,C=o?o.width:it(i.width)-x-v,E=o?o.height:it(i.height)-w-S,k=C+m+v+y,T=E+f+S+b,M=Object.freeze({devicePixelContentBoxSize:ot(Math.round(C*devicePixelRatio),Math.round(E*devicePixelRatio),n),borderBoxSize:ot(k,T,n),contentBoxSize:ot(C,E,n),contentRect:new j(d,l,C,E)});return q.set(t,M),M},st=function(t,e,i){var o=nt(t,i),r=o.borderBoxSize,n=o.contentBoxSize,s=o.devicePixelContentBoxSize;switch(e){case x.DEVICE_PIXEL_CONTENT_BOX:return s;case x.BORDER_BOX:return r;default:return n}},at=function(t){var e=nt(t);this.target=t,this.contentRect=e.contentRect,this.borderBoxSize=[e.borderBoxSize],this.contentBoxSize=[e.contentBoxSize],this.devicePixelContentBoxSize=[e.devicePixelContentBoxSize]},lt=function(t){if(X(t))return 1/0;for(var e=0,i=t.parentNode;i;)e+=1,i=i.parentNode;return e},ct=function(){var t=1/0,e=[];U.forEach((function(i){if(0!==i.activeTargets.length){var o=[];i.activeTargets.forEach((function(e){var i=new at(e.target),r=lt(e.target);o.push(i),e.lastReportedSize=st(e.target,e.observedBox),r<t&&(t=r)})),e.push((function(){i.callback.call(i.observer,o,i.observer)})),i.activeTargets.splice(0,i.activeTargets.length)}}));for(var i=0,o=e;i<o.length;i++){(0,o[i])()}return t},ht=function(t){U.forEach((function(e){e.activeTargets.splice(0,e.activeTargets.length),e.skippedTargets.splice(0,e.skippedTargets.length),e.observationTargets.forEach((function(i){i.isActive()&&(lt(i.target)>t?e.activeTargets.push(i):e.skippedTargets.push(i))}))}))},dt=function(){var t=0;for(ht(t);U.some((function(t){return t.activeTargets.length>0}));)t=ct(),ht(t);return U.some((function(t){return t.skippedTargets.length>0}))&&function(){var t;"function"===typeof ErrorEvent?t=new ErrorEvent("error",{message:Z}):((t=document.createEvent("Event")).initEvent("error",!1,!1),t.message=Z),window.dispatchEvent(t)}(),t>0},pt=[],ut=function(t){if(!G){var e=0,i=document.createTextNode("");new MutationObserver((function(){return pt.splice(0).forEach((function(t){return t()}))})).observe(i,{characterData:!0}),G=function(){i.textContent=""+(e?e--:e++)}}pt.push(t),G()},gt=0,mt={attributes:!0,characterData:!0,childList:!0,subtree:!0},ft=["resize","load","transitionend","animationend","animationstart","animationiteration","keyup","keydown","mouseup","mousedown","mouseover","mouseout","blur","focus"],yt=function(t){return void 0===t&&(t=0),Date.now()+t},bt=!1,St=function(){function t(){var t=this;this.stopped=!0,this.listener=function(){return t.schedule()}}return t.prototype.run=function(t){var e=this;if(void 0===t&&(t=250),!bt){bt=!0;var i=yt(t);!function(t){ut((function(){requestAnimationFrame(t)}))}((function(){var o=!1;try{o=dt()}finally{if(bt=!1,t=i-yt(),!gt)return;o?e.run(1e3):t>0?e.run(t):e.start()}}))}},t.prototype.schedule=function(){this.stop(),this.run()},t.prototype.observe=function(){var t=this,e=function(){return t.observer&&t.observer.observe(document.body,mt)};document.body?e():J.addEventListener("DOMContentLoaded",e)},t.prototype.start=function(){var t=this;this.stopped&&(this.stopped=!1,this.observer=new MutationObserver(this.listener),this.observe(),ft.forEach((function(e){return J.addEventListener(e,t.listener,!0)})))},t.prototype.stop=function(){var t=this;this.stopped||(this.observer&&this.observer.disconnect(),ft.forEach((function(e){return J.removeEventListener(e,t.listener,!0)})),this.stopped=!0)},t}(),vt=new St,xt=function(t){!gt&&t>0&&vt.start(),!(gt+=t)&&vt.stop()},wt=function(){function t(t,e){this.target=t,this.observedBox=e||x.CONTENT_BOX,this.lastReportedSize={inlineSize:0,blockSize:0}}return t.prototype.isActive=function(){var t=st(this.target,this.observedBox,!0);return function(t){return!Y(t)&&!function(t){switch(t.tagName){case"INPUT":if("image"!==t.type)break;case"VIDEO":case"AUDIO":case"EMBED":case"OBJECT":case"CANVAS":case"IFRAME":case"IMG":return!0}return!1}(t)&&"inline"===getComputedStyle(t).display}(this.target)&&(this.lastReportedSize=t),this.lastReportedSize.inlineSize!==t.inlineSize||this.lastReportedSize.blockSize!==t.blockSize},t}(),Ct=function(t,e){this.activeTargets=[],this.skippedTargets=[],this.observationTargets=[],this.observer=t,this.callback=e},Et=new WeakMap,kt=function(t,e){for(var i=0;i<t.length;i+=1)if(t[i].target===e)return i;return-1},Tt=function(){function t(){}return t.connect=function(t,e){var i=new Ct(t,e);Et.set(t,i)},t.observe=function(t,e,i){var o=Et.get(t),r=0===o.observationTargets.length;kt(o.observationTargets,e)<0&&(r&&U.push(o),o.observationTargets.push(new wt(e,i&&i.box)),xt(1),vt.schedule())},t.unobserve=function(t,e){var i=Et.get(t),o=kt(i.observationTargets,e),r=1===i.observationTargets.length;o>=0&&(r&&U.splice(U.indexOf(i),1),i.observationTargets.splice(o,1),xt(-1))},t.disconnect=function(t){var e=this,i=Et.get(t);i.observationTargets.slice().forEach((function(i){return e.unobserve(t,i.target)})),i.activeTargets.splice(0,i.activeTargets.length)},t}(),Mt=function(){function t(t){if(0===arguments.length)throw new TypeError("Failed to construct 'ResizeObserver': 1 argument required, but only 0 present.");if("function"!==typeof t)throw new TypeError("Failed to construct 'ResizeObserver': The callback provided as parameter 1 is not a function.");Tt.connect(this,t)}return t.prototype.observe=function(t,e){if(0===arguments.length)throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!K(t))throw new TypeError("Failed to execute 'observe' on 'ResizeObserver': parameter 1 is not of type 'Element");Tt.observe(this,t,e)},t.prototype.unobserve=function(t){if(0===arguments.length)throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': 1 argument required, but only 0 present.");if(!K(t))throw new TypeError("Failed to execute 'unobserve' on 'ResizeObserver': parameter 1 is not of type 'Element");Tt.unobserve(this,t)},t.prototype.disconnect=function(){Tt.disconnect(this)},t.toString=function(){return"function ResizeObserver () { [polyfill code] }"},t}(),zt=(0,o.b)(a()),Pt=n.createContext({}),It=r.ZP.div`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  margin: 0;
  background: ${t=>t.theme.background};
  color: ${t=>t.theme.foreground};
  display: flex;
  flex-direction: row;
  overflow: hidden;
  -webkit-touch-callout: none;
  user-select: none;
  * {
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    font-family: '${t=>t.theme.typography.fontFamily}', sans-serif;
    /* css reset for a global box-sizing: border-box */
    box-sizing: content-box;

    scrollbar-width: thin;
    scrollbar-color: ${t=>t.theme.scrollbar.handleColor} transparent;

    &::-webkit-scrollbar-track {
      border-radius: 10px;
      background-color: transparent;
      margin: 1px;
    }

    &::-webkit-scrollbar {
      width: 6px;
      height: 6px;
      background-color: transparent;
    }

    &::-webkit-scrollbar-thumb {
      border-radius: 10px;
      box-shadow: inset 0 0 14px rgba(0, 0, 0, 0.4);
      background-color: ${t=>t.theme.scrollbar.handleColor};
    }

    &::-webkit-scrollbar-thumb:hover {
      background-color: ${t=>t.theme.scrollbar.handleColor};
    }
  }

  /* This will be applied first in some cases and should be treated as such */
  h1,
  h2,
  h3,
  input,
  textarea,
  label,
  span,
  div,
  p {
    line-height: normal;
  }
`,Rt=class extends n.Component{constructor(t){var e;if(super(t),this.node=n.createRef(),this.saveEditorDimensions=t=>{this.setState({contextValue:{element:t,rect:t.getBoundingClientRect()}})},null==(e=n)?void 0:e.version){const t=Number.parseInt(n.version.split(".")[0],10),e=Number.parseInt(n.version.split(".")[1],10);(t<16||16===t&&e<8)&&console.error("Please be aware that the PhotoEditorSDK will require React 16.8.6 or above.")}this.saveEditorDimensions=(0,zt.default)(this.saveEditorDimensions,100),this.resizeObserver=new Mt((([t])=>{this.saveEditorDimensions(t.target)})),this.state={contextValue:{element:null,rect:null}}}componentDidMount(){var t;(null==(t=this.node)?void 0:t.current)&&this.resizeObserver.observe(this.node.current)}componentWillUnmount(){var t;(null==(t=this.node)?void 0:t.current)&&this.resizeObserver.unobserve(this.node.current)}render(){const{children:t}=this.props,{contextValue:e}=this.state;return n.createElement(It,{ref:this.node,"data-test":o.Sa.EditorContainer},n.createElement(Pt.Provider,{value:e},t))}};if(!n.useState)throw new Error("mobx-react-lite requires React with Hooks support");if(!o.k)throw new Error("mobx-react-lite requires mobx at least version 4 to be available");function Dt(){var t=function(t,e){var i="function"===typeof Symbol&&t[Symbol.iterator];if(!i)return t;var o,r,n=i.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(o=n.next()).done;)s.push(o.value)}catch(a){r={error:a}}finally{try{o&&!o.done&&(i=n.return)&&i.call(n)}finally{if(r)throw r.error}}return s}((0,n.useState)(0),2),e=t[1];return(0,n.useCallback)((function(){e((function(t){return t+1}))}),[])}var Ot={};var Lt=function(t){return"function"===typeof Symbol?Symbol.for(t):"__$mobx-react "+t+"__"}("observerBatching");function At(t){t()}function _t(t){return(0,o.o)(t)}var Ft,$t=1e4,Bt=new Set;function Ht(){void 0===Ft&&(Ft=setTimeout(Nt,1e4))}function Nt(){Ft=void 0;var t=Date.now();Bt.forEach((function(e){var i=e.current;i&&t>=i.cleanAt&&(i.reaction.dispose(),e.current=null,Bt.delete(e))})),Bt.size>0&&Ht()}var Wt=!1,Vt=[];var Ut={};function Zt(t){return"observer"+t}function Gt(t,e,i){void 0===e&&(e="observed"),void 0===i&&(i=Ut);var r=function(t){return function(){Wt?Vt.push(t):t()}}((i.useForceUpdate||Dt)()),s=n.useRef(null);if(!s.current){var a=new o.j(Zt(e),(function(){l.mounted?r():(a.dispose(),s.current=null)})),l=function(t){return{cleanAt:Date.now()+$t,reaction:t}}(a);s.current=l,function(t){Bt.add(t),Ht()}(s)}var c=s.current.reaction;return n.useDebugValue(c,_t),n.useEffect((function(){return function(t){Bt.delete(t)}(s),s.current?s.current.mounted=!0:(s.current={reaction:new o.j(Zt(e),(function(){r()})),cleanAt:1/0},r()),function(){s.current.reaction.dispose(),s.current=null}}),[]),function(t){Wt=!0,Vt=[];try{var e=t();Wt=!1;var i=Vt.length>0?Vt:void 0;return n.useLayoutEffect((function(){i&&i.forEach((function(t){return t()}))}),[i]),e}finally{Wt=!1}}((function(){var e,i;if(c.track((function(){try{e=t()}catch(o){i=o}})),i)throw i;return e}))}var jt=function(){return jt=Object.assign||function(t){for(var e,i=1,o=arguments.length;i<o;i++)for(var r in e=arguments[i])Object.prototype.hasOwnProperty.call(e,r)&&(t[r]=e[r]);return t},jt.apply(this,arguments)};function Yt(t,e){var i,o=jt({forwardRef:!1},e),r=t.displayName||t.name,s=function(e,i){return Gt((function(){return t(e,i)}),r)};return s.displayName=r,i=o.forwardRef?(0,n.memo)((0,n.forwardRef)(s)):(0,n.memo)(s),function(t,e){Object.keys(t).forEach((function(i){Xt[i]||Object.defineProperty(e,i,Object.getOwnPropertyDescriptor(t,i))}))}(t,i),i.displayName=r,i}var Xt={$$typeof:!0,render:!0,compare:!0,type:!0};function Kt(t){var e=t.children,i=t.render,o=e||i;return"function"!==typeof o?null:Gt(o)}function Jt(t,e,i,o,r){var n="children"===e?"render":"children",s="function"===typeof t[e],a="function"===typeof t[n];return s&&a?new Error("MobX Observer: Do not use children and render in the same time in`"+i):s||a?null:new Error("Invalid prop `"+r+"` of type `"+typeof t[e]+"` supplied to `"+i+"`, expected `function`.")}Kt.propTypes={children:Jt,render:Jt},Kt.displayName="Observer",function(t){t||(t=At),(0,o.n)({reactionScheduler:t}),("undefined"!==typeof window?window:"undefined"!==typeof i.g?i.g:"undefined"!==typeof self?self:Ot)[Lt]=!0}(s.unstable_batchedUpdates);var qt=0;var Qt={};function te(t){return Qt[t]||(Qt[t]=function(t){if("function"===typeof Symbol)return Symbol(t);var e="__$mobx-react "+t+" ("+qt+")";return qt++,e}(t)),Qt[t]}function ee(t,e){if(ie(t,e))return!0;if("object"!==typeof t||null===t||"object"!==typeof e||null===e)return!1;var i=Object.keys(t),o=Object.keys(e);if(i.length!==o.length)return!1;for(var r=0;r<i.length;r++)if(!Object.hasOwnProperty.call(e,i[r])||!ie(t[i[r]],e[i[r]]))return!1;return!0}function ie(t,e){return t===e?0!==t||1/t===1/e:t!==t&&e!==e}var oe={$$typeof:1,render:1,compare:1,type:1,childContextTypes:1,contextType:1,contextTypes:1,defaultProps:1,getDefaultProps:1,getDerivedStateFromError:1,getDerivedStateFromProps:1,mixins:1,propTypes:1};function re(t,e,i){Object.hasOwnProperty.call(t,e)?t[e]=i:Object.defineProperty(t,e,{enumerable:!1,configurable:!0,writable:!0,value:i})}var ne=te("patchMixins"),se=te("patchedDefinition");function ae(t,e){for(var i=this,o=arguments.length,r=new Array(o>2?o-2:0),n=2;n<o;n++)r[n-2]=arguments[n];e.locks++;try{var s;return void 0!==t&&null!==t&&(s=t.apply(this,r)),s}finally{e.locks--,0===e.locks&&e.methods.forEach((function(t){t.apply(i,r)}))}}function le(t,e){return function(){for(var i=arguments.length,o=new Array(i),r=0;r<i;r++)o[r]=arguments[r];ae.call.apply(ae,[this,t,e].concat(o))}}function ce(t,e,i){var o=function(t,e){var i=t[ne]=t[ne]||{},o=i[e]=i[e]||{};return o.locks=o.locks||0,o.methods=o.methods||[],o}(t,e);o.methods.indexOf(i)<0&&o.methods.push(i);var r=Object.getOwnPropertyDescriptor(t,e);if(!r||!r[se]){var n=t[e],s=he(t,e,r?r.enumerable:void 0,o,n);Object.defineProperty(t,e,s)}}function he(t,e,i,o,r){var n,s=le(r,o);return(n={})[se]=!0,n.get=function(){return s},n.set=function(r){if(this===t)s=le(r,o);else{var n=he(this,e,i,o,r);Object.defineProperty(this,e,n)}},n.configurable=!0,n.enumerable=i,n}var de=o.q||"$mobx",pe=te("isMobXReactObserver"),ue=te("isUnmounted"),ge=te("skipRender"),me=te("isForcingUpdate");function fe(t){var e=t.prototype;if(t[pe]){var i=ye(e);console.warn("The provided component class ("+i+") \n                has already been declared as an observer component.")}else t[pe]=!0;if(e.componentWillReact)throw new Error("The componentWillReact life-cycle event is no longer supported");if(t.__proto__!==n.PureComponent)if(e.shouldComponentUpdate){if(e.shouldComponentUpdate!==Se)throw new Error("It is not allowed to use shouldComponentUpdate in observer based components.")}else e.shouldComponentUpdate=Se;ve(e,"props"),ve(e,"state");var o=e.render;return e.render=function(){return be.call(this,o)},ce(e,"componentWillUnmount",(function(){var t;if(null===(t=this.render[de])||void 0===t||t.dispose(),this[ue]=!0,!this.render[de]){var e=ye(this);console.warn("The reactive render of an observer class component ("+e+") \n                was overriden after MobX attached. This may result in a memory leak if the \n                overriden reactive render was not properly disposed.")}})),t}function ye(t){return t.displayName||t.name||t.constructor&&(t.constructor.displayName||t.constructor.name)||"<component>"}function be(t){var e=this;re(this,ge,!1),re(this,me,!1);var i=ye(this),r=t.bind(this),s=!1,a=new o.j(i+".render()",(function(){if(!s&&(s=!0,!0!==e[ue])){var t=!0;try{re(e,me,!0),e[ge]||n.Component.prototype.forceUpdate.call(e),t=!1}finally{re(e,me,!1),t&&a.dispose()}}}));function l(){s=!1;var t=void 0,e=void 0;if(a.track((function(){try{e=(0,o.i)(!1,r)}catch(i){t=i}})),t)throw t;return e}return a.reactComponent=this,l[de]=a,this.render=l,l.call(this)}function Se(t,e){return this.state!==e||!ee(this.props,t)}function ve(t,e){var i=te("reactProp_"+e+"_valueHolder"),r=te("reactProp_"+e+"_atomHolder");function n(){return this[r]||re(this,r,(0,o.d)("reactive "+e)),this[r]}Object.defineProperty(t,e,{configurable:!0,enumerable:!0,get:function(){var t=!1;return o.g&&o.h&&(t=(0,o.g)(!0)),n.call(this).reportObserved(),o.g&&o.h&&(0,o.h)(t),this[i]},set:function(t){this[me]||ee(this[i],t)?re(this,i,t):(re(this,i,t),re(this,ge,!0),n.call(this).reportChanged(),re(this,ge,!1))}})}var xe="function"===typeof Symbol&&Symbol.for,we=xe?Symbol.for("react.forward_ref"):"function"===typeof n.forwardRef&&(0,n.forwardRef)((function(t){return null})).$$typeof,Ce=xe?Symbol.for("react.memo"):"function"===typeof n.memo&&(0,n.memo)((function(t){return null})).$$typeof;function Ee(t){if(!0===t.isMobxInjector&&console.warn("Mobx observer: You are trying to use 'observer' on a component that already has 'inject'. Please apply 'observer' before applying 'inject'"),Ce&&t.$$typeof===Ce)throw new Error("Mobx observer: You are trying to use 'observer' on a function component wrapped in either another observer or 'React.memo'. The observer already applies 'React.memo' for you.");if(we&&t.$$typeof===we){var e=t.render;if("function"!==typeof e)throw new Error("render property of ForwardRef was not a function");return(0,n.forwardRef)((function(){var t=arguments;return(0,n.createElement)(Kt,null,(function(){return e.apply(void 0,t)}))}))}return"function"!==typeof t||t.prototype&&t.prototype.render||t.isReactClass||Object.prototype.isPrototypeOf.call(n.Component,t)?fe(t):Yt(t)}function ke(){return ke=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var i=arguments[e];for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(t[o]=i[o])}return t},ke.apply(this,arguments)}var Te=n.createContext({});function Me(t){var e=t.children,i=function(t,e){if(null==t)return{};var i,o,r={},n=Object.keys(t);for(o=0;o<n.length;o++)i=n[o],e.indexOf(i)>=0||(r[i]=t[i]);return r}(t,["children"]),o=n.useContext(Te),r=n.useRef(ke({},o,i)).current;return n.createElement(Te.Provider,{value:r},e)}function ze(t,e,i,o){var r=n.forwardRef((function(i,o){var r=ke({},i),s=n.useContext(Te);return Object.assign(r,t(s||{},r)||{}),o&&(r.ref=o),n.createElement(e,r)}));return o&&(r=Ee(r)),r.isMobxInjector=!0,function(t,e){var i=Object.getOwnPropertyNames(Object.getPrototypeOf(t));Object.getOwnPropertyNames(t).forEach((function(o){oe[o]||-1!==i.indexOf(o)||Object.defineProperty(e,o,Object.getOwnPropertyDescriptor(t,o))}))}(e,r),r.wrappedComponent=e,r.displayName=function(t,e){var i,o=t.displayName||t.name||t.constructor&&t.constructor.name||"Component";i=e?"inject-with-"+e+"("+o+")":"inject("+o+")";return i}(e,i),r}function Pe(t){return function(e,i){return t.forEach((function(t){if(!(t in i)){if(!(t in e))throw new Error("MobX injector: Store '"+t+"' is not available! Make sure it is provided by some Provider");i[t]=e[t]}})),i}}function Ie(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];if("function"===typeof arguments[0]){var o=arguments[0];return function(t){return ze(o,t,o.name,!0)}}return function(t){return ze(Pe(e),t,e.join("-"),!1)}}if(Me.displayName="MobXProvider",!n.Component)throw new Error("mobx-react requires React to be available");if(!o.e)throw new Error("mobx-react requires mobx to be available");var Re=r.iv`
  position: absolute;
  top: 0;
  left: 0;
  height: ${t=>t.theme.measurements.colorItem.size}px;
  width: ${t=>t.theme.measurements.colorItem.size}px;
  border-radius: ${t=>t.theme.colorItem.borderRadius||`${t.theme.shape.radiusSmall}px`};
  pointer-events: none;
`,De=r.ZP.div.attrs((t=>({style:{background:t.color}})))`
  ${Re}
  z-index: ${t=>t.theme.measurements.zIndex.colorItem.background};
`,Oe=De,Le=r.ZP.div`
  ${Re}
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: ${t=>t.theme.measurements.zIndex.colorItem.overlay};

  box-sizing: border-box;
  border: 2px solid transparent;
  border-radius: ${t=>t.theme.colorItem.borderRadius||`${t.theme.shape.radiusSmall}px`};
  transition: border-color 300ms ease-in-out;
  ${t=>t.isActive&&r.iv`
      border-color: ${t.theme.selectColor.activeBorderColor};
    `}
`,Ae=r.ZP.span`
  display: inline-block;
  height: 2px;
  width: 2px;
  border-radius: 50%;
  box-shadow: 0 1px 2px 0 rgba(0, 0, 0, 0.6);
  background: rgba(255, 255, 255, 0.87);
  margin: 1px;
  pointer-events: none;
`,_e=({isActive:t,className:e,style:i})=>n.createElement(Le,{isActive:t,className:e,style:i},t&&n.createElement(n.Fragment,null,n.createElement(Ae,null),n.createElement(Ae,null),n.createElement(Ae,null))),Fe=r.ZP.button.attrs({type:"button"})`
  &&& {
    box-sizing: border-box;
  }
  position: relative;
  background: transparent;
  border: none;
  height: ${t=>t.theme.measurements.colorItem.size}px;
  width: ${t=>t.theme.measurements.colorItem.size}px;
  margin: ${t=>t.theme.colorItem.margin};
  padding: 0;
  cursor: pointer;
  border-radius: ${t=>t.theme.colorItem.borderRadius||`${t.theme.shape.radiusSmall}px`};

  &:hover {
    opacity: 0.7;
  }

  ${c}

  &:disabled {
    opacity: ${t=>t.theme.selectColor.inactiveOpacity};
    cursor: default;
  }
`,$e=Fe,Be=r.ZP.div.attrs((t=>({style:t.url?{backgroundImage:`url(${t.url})`}:{},...t.style})))`
  ${Re}
  z-index: ${t=>t.theme.measurements.zIndex.colorItem.tiledBackground};
`,He=Be,Ne=Ie("config")(Ee((({isActive:t,onClick:e,color:i,label:o,isDisabled:r,tiledBackgroundUrl:s,className:a,style:l,children:c})=>n.createElement($e,{disabled:r,onClick:e,"aria-label":o,className:a,style:l},n.createElement(He,{url:s}),n.createElement(Oe,{color:i}),n.createElement(_e,{isActive:t}),c)))),We=r.ZP.div`
  display: block;
  opacity: 1;
  position: absolute;
  top: 0;
  right: 0;
  bottom: 0;
  left: 0;
  z-index: ${t=>t.theme.measurements.zIndex.dialog.backdrop};
  text-align: left;
  background: ${t=>t.theme.modal.backdrop};
  height: 100%;
  width: 100%;
`,Ve=We,Ue=r.ZP.div`
  display: none;
  visibility: hidden;
  opacity: 0;
  position: absolute;
  width: 100%;
  height: 100%;
  z-index: ${t=>t.theme.measurements.zIndex.dialog.base};
  transition: opacity 100s ease-in-out;

  ${t=>t.isVisible&&r.iv`
      opacity: 1;
      display: block;
      visibility: visible;
    `};
`,Ze=({isVisible:t,className:e,children:i})=>n.createElement(Ue,{isVisible:t,className:e},i),Ge=r.ZP.div.attrs((({style:t})=>({role:"dialog","aria-hidden":!1,style:t})))`
  display: flex;
  flex: 0 0 auto;
  flex-direction: column;
  transition: top 0.25s ease;
  position: absolute;
  top: calc(50% + ${t=>t.top}px);
  left: calc(50% + ${t=>t.left}px);
  width: ${t=>t.width};
  height: ${t=>t.height};
  transform: translate(-50%, -50%);
  border-radius: ${t=>t.theme.shape.radiusLarge}px;
  background: ${t=>t.theme.modal.background};
  color: ${t=>t.theme.modal.bodyForeground};
  z-index: ${t=>t.theme.measurements.zIndex.dialog.container};

  @media all and (min-width: 0) and (max-width: 640px) {
    text-align: center;
    width: auto;
    min-width: 200px;
    height: auto;
    top: 50%;
    left: 50%;
  }
`,je=Ge,Ye=({isVisible:t=!1,width:e="350px",height:i="fit-content",position:r,header:s,body:a,footer:l,className:c,style:h,children:d})=>n.createElement(Ze,{isVisible:t},n.createElement(Ve,null),n.createElement(je,{height:i,width:e,left:r.x,top:r.y,className:c,style:h,"data-test":o.Sa.Dialog},s,a,d,l)),Xe=r.ZP.div`
  display: flex;
  flex-direction: column;
  overflow: hidden;
  box-sizing: border-box;
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.body.case};
  color: ${t=>t.theme.modal.bodyForeground};

  padding: 0px 20px 11px;
  &:first-child {
    padding-top: 11px;
  }

  @media all and (min-width: 0) and (max-width: 640px) {
    align-items: center;
  }
`,Ke=Xe,Je=r.ZP.div`
  display: flex;
  border-top: 2px solid
    ${t=>"error"===t.type?t.theme.error:t.theme.warning};

  min-height: 40px;
  justify-content: flex-end;
  @media all and (min-width: 0) and (max-width: 640px) {
    height: auto;
    flex-direction: column;
    justify-content: space-around;
  }
`,qe=Je,Qe=r.ZP.h3`
  font-size: ${t=>t.theme.measurements.fontSystem.headline2.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.headline2.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.headline2.case};
  color: ${t=>t.theme.modal.headerForeground};

  padding: 11px 20px 0px;
`,ti=Qe,ei=r.F4`
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
`,ii=r.ZP.div`
  display: inline-block;
  position: relative;
  width: 45px;
  height: 45px;
`,oi=r.ZP.div`
  box-sizing: border-box;
  display: block;
  position: absolute;
  width: 40px;
  height: 40px;
  margin: 2.5px;
  border: 2.5px solid ${t=>t.theme.primary};
  border-radius: 50%;
  animation: ${ei} 1.2s cubic-bezier(0.5, 0, 0.5, 1) infinite;
  border-color: ${t=>t.theme.primary} transparent transparent
    transparent;

  :nth-child(1) {
    animation-delay: -0.45s;
  }
  :nth-child(2) {
    animation-delay: -0.3s;
  }
  :nth-child(3) {
    animation-delay: -0.15s;
  }
`,ri=({className:t,style:e})=>n.createElement(ii,{className:t,style:e},n.createElement(oi,null),n.createElement(oi,null),n.createElement(oi,null),n.createElement(oi,null)),ni=["Moz","Webkit","O","ms"];function si(t,e){return e?`${e}${function(t){let e,i="",o=!0;for(e=0;e<t.length;e+=1)o?(i+=t[e].toUpperCase(),o=!1):"-"===t[e]?o=!0:i+=t[e];return i}(t)}`:t}var ai=function(t="transform"){if("undefined"===typeof window||"undefined"===typeof window.document)return"";const{style:e}=window.document.documentElement;if(t in e)return"";let i;for(i=0;i<ni.length;i+=1)if(si(t,ni[i])in e)return ni[i];return""}();function li(t,e){for(let i=0,{length:o}=t;i<o;i+=1)if(e.apply(e,[t[i],i,t]))return t[i];return null}function ci(t){return"function"===typeof t||"[object Function]"===Object.prototype.toString.call(t)}function hi(t){return"number"===typeof t&&!Number.isNaN(t)}function di(t){return parseInt(t,10)}var pi="";function ui(t,e){return pi||(pi=li(["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"],(e=>ci(t[e])))),!!ci(t[pi])&&t[pi](e)}function gi(t,e,i){let o=t;do{if(ui(o,e))return!0;if(o===i)return!1;o=o.parentNode}while(o);return!1}function mi(t,e,i){t&&(t.attachEvent?t.attachEvent(`on${e}`,i):t.addEventListener?t.addEventListener(e,i,!0):t[`on${e}`]=i)}function fi(t,e,i){t&&(t.detachEvent?t.detachEvent(`on${e}`,i):t.removeEventListener?t.removeEventListener(e,i,!0):t[`on${e}`]=null)}function yi(t){let e=t.clientHeight;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e+=di(i.borderTopWidth),e+=di(i.borderBottomWidth),e}function bi(t){let e=t.clientWidth;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e+=di(i.borderLeftWidth),e+=di(i.borderRightWidth),e}function Si(t){let e=t.clientHeight;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e-=di(i.paddingTop),e-=di(i.paddingBottom),e}function vi(t){let e=t.clientWidth;const i=t.ownerDocument.defaultView.getComputedStyle(t);return e-=di(i.paddingLeft),e-=di(i.paddingRight),e}function xi(t){const e=t.findDOMNode();return e||null}function wi(t,e,i){const{state:o}=t,r=!hi(o.lastX),n=xi(t);return r?{node:n,deltaX:0,deltaY:0,lastX:e,lastY:i,x:e,y:i}:{node:n,deltaX:e-o.lastX,deltaY:i-o.lastY,lastX:o.lastX,lastY:o.lastY,x:e,y:i}}function Ci(t,e){return{node:e.node,x:t.state.x+e.deltaX,y:t.state.y+e.deltaY,deltaX:e.deltaX,deltaY:e.deltaY,lastX:t.state.x,lastY:t.state.y}}function Ei(t){return"both"===t.props.axis||"x"===t.props.axis}function ki(t){return"both"===t.props.axis||"y"===t.props.axis}function Ti(t,e){const i=xi(e);if(!i)return{x:0,y:0};let{offsetParent:o}=e.props;return!o&&i instanceof HTMLElement&&(o=i.offsetParent||i.ownerDocument.body),function(t,e){const i=e===e.ownerDocument.body?{left:0,top:0}:e.getBoundingClientRect();return{x:t.clientX+e.scrollLeft-i.left,y:t.clientY+e.scrollTop-i.top}}(t,o)}var Mi={start:"touchstart",move:"touchmove",stop:"touchend"},zi={start:"mousedown",move:"mousemove",stop:"mouseup"},Pi=zi,Ii={cancel:null,disabled:!1,offsetParent:null,handle:null,transform:null,onStart:()=>{},onDrag:()=>{},onStop:()=>{},onMouseDown:()=>{}},Ri=class extends n.Component{constructor(){super(...arguments),this.state={dragging:!1,lastX:NaN,lastY:NaN,touchIdentifier:void 0},this.findDOMNode=()=>{const{nodeRef:t}=this.props;return(null==t?void 0:t.current)||null},this.getTouchFromEvent=t=>{const e=function(t){return t.targetTouches&&t.targetTouches[0]?t.targetTouches[0].identifier:t.changedTouches&&t.changedTouches[0]?t.changedTouches[0].identifier:null}(t);return this.setState({touchIdentifier:e}),function(t,e){let i=null;return t.targetTouches&&(i=li(t.targetTouches,(t=>e===t.identifier))),t.changedTouches&&!i&&(i=li(t.changedTouches,(t=>e===t.identifier))),i}(t,e)},this.preventDefault=t=>{t.stopPropagation&&t.stopPropagation()},this.handleDragStart=t=>{const e=this.findDOMNode();if(!e||!e.ownerDocument||!e.ownerDocument.body)throw new Error("<DraggableCore> not mounted on DragStart!");const{ownerDocument:i}=e;if(this.props.disabled||!(t.target instanceof Node)||this.props.handle&&!gi(t.target,this.props.handle,e)||this.props.cancel&&gi(t.target,this.props.cancel,e))return!1;const o=Ti(t,this);if(null==o)return!1;const{x:r,y:n}=o,s=wi(this,r,n);if(!1===this.props.onStart(t,s))return!1;this.setState({dragging:!0,lastX:r,lastY:n}),"touchmove"===Pi.move?mi(i,Pi.move,this.onTouchDrag):mi(i,Pi.move,this.onMouseDrag),mi(i,Pi.stop,this.handleDragStop)},this.handleDrag=t=>{const e=Ti(t,this);if(null==e)return;const{x:i,y:o}=e,r=wi(this,i,o);if(!1!==this.props.onDrag(t,r))this.setState({lastX:i,lastY:o});else try{this.handleDragStop(new MouseEvent("mouseup"))}catch(n){const t=document.createEvent("MouseEvents");t.initMouseEvent("mouseup",!0,!0,window,0,0,0,0,0,!1,!1,!1,!1,0,null),this.handleDragStop(t)}},this.handleDragStop=t=>{if(!this.state.dragging)return;const e=Ti(t,this);if(null==e)return;const{x:i,y:o}=e,r=wi(this,i,o),n=this.findDOMNode();this.setState({dragging:!1,lastX:NaN,lastY:NaN}),this.props.onStop(t,r),n&&("touchmove"===Pi.move?fi(n.ownerDocument,Pi.move,this.onTouchDrag):fi(n.ownerDocument,Pi.move,this.onMouseDrag),fi(n.ownerDocument,Pi.stop,this.handleDragStop))},this.onMouseDown=t=>(this.preventDefault(t),Pi=zi,this.props.onMouseDown(t),(!t.button||"number"!==typeof t.button||0===t.button)&&this.handleDragStart(t)),this.onMouseDrag=t=>(this.preventDefault(t),this.handleDrag(t)),this.onMouseUp=t=>(this.preventDefault(t),Pi=zi,this.handleDragStop(t)),this.onTouchStart=t=>{this.preventDefault(t),Pi=Mi;const e=this.getTouchFromEvent(t);return this.handleDragStart(e)},this.onTouchDrag=t=>{this.preventDefault(t),Pi=Mi;const e=this.getTouchFromEvent(t);return this.handleDrag(e)},this.onTouchEnd=t=>{this.preventDefault(t),Pi=Mi;const e=this.getTouchFromEvent(t);return this.handleDragStop(e)}}componentWillUnmount(){const t=this.findDOMNode();if(t){const{ownerDocument:e}=t;fi(e,zi.move,this.onMouseDrag),fi(e,Mi.move,this.onTouchDrag),fi(e,zi.stop,this.handleDragStop),fi(e,Mi.stop,this.handleDragStop)}}render(){return n.cloneElement(n.Children.only(this.props.children),{style:{touchAction:"none",...this.props.children.props.style},onMouseDown:this.onMouseDown,onTouchStart:this.onTouchStart,onMouseUp:this.onMouseUp,onTouchEnd:this.onTouchEnd})}};Ri.defaultProps=Ii,Ri.displayName="DraggableCore";var Di={...Ii,axis:"both",bounds:!1,defaultClassName:"draggable",defaultClassNameDragging:"draggable-dragging",defaultClassNameDragged:"draggable-dragged",defaultPosition:{x:0,y:0},position:null,rotation:0,updateOnPosition:!1},Oi=class extends n.Component{constructor(t){super(t),this.onDragStart=(t,e)=>{if(!1===this.props.onStart(t,Ci(this,e)))return!1;this.setState({dragging:!0,dragged:!0})},this.onDrag=(t,e)=>{const{position:i,defaultPosition:o,onDrag:r,bounds:n}=this.props;if(!this.state.dragging)return!1;const s=Ci(this,e),a=Boolean(i),l={x:a?s.x:o.x,y:a?s.y:o.y,slackX:0,slackY:0};if(n){const{x:t,y:e}=l;l.x+=this.state.slackX,l.y+=this.state.slackY;const[i,o]=function(t,e,i){if(!t.props.bounds)return[e,i];let{bounds:o}=t.props;o="string"===typeof o?o:function(t){return{left:t.left,top:t.top,right:t.right,bottom:t.bottom}}(o);const r=xi(t);if(!r)return[e,i];if("string"===typeof o){const{ownerDocument:t}=r,e=t.defaultView;let i;i="parent"===o?r.parentNode:t.querySelector(o);const n=e.getComputedStyle(r),s=e.getComputedStyle(i);o={left:-r.offsetLeft+di(s.paddingLeft)+di(n.marginLeft),top:-r.offsetTop+di(s.paddingTop)+di(n.marginTop),right:vi(i)-bi(r)-r.offsetLeft+di(s.paddingRight)-di(n.marginRight),bottom:Si(i)-yi(r)-r.offsetTop+di(s.paddingBottom)-di(n.marginBottom)}}return hi(o.right)&&(e=Math.min(e,o.right)),hi(o.bottom)&&(i=Math.min(i,o.bottom)),hi(o.left)&&(e=Math.max(e,o.left)),hi(o.top)&&(i=Math.max(i,o.top)),[e,i]}(this,l.x,l.y);l.x=i,l.y=o,l.slackX=this.state.slackX+(t-l.x),l.slackY=this.state.slackY+(e-l.y),s.x=l.x,s.y=l.y,s.deltaX=l.x-this.state.x,s.deltaY=l.y-this.state.y}if(!1===r(t,s))return!1;this.setState(l)},this.onDragStop=(t,e)=>{if(!this.state.dragging)return!1;if(!1===this.props.onStop(t,Ci(this,e)))return!1;const i={dragging:!1,slackX:0,slackY:0,x:0,y:0};if(Boolean(this.props.position)){const{x:t,y:e}=this.props.position;i.x=t,i.y=e}this.setState(i)},this.findDOMNode=()=>{const{nodeRef:t}=this.props;return(null==t?void 0:t.current)||null},this.state={dragging:!1,dragged:!1,x:t.position?t.position.x:t.defaultPosition.x,y:t.position?t.position.y:t.defaultPosition.y,slackX:0,slackY:0}}componentDidUpdate(t){Boolean(this.props.position)&&(this.props.updateOnPosition?(t.position&&t.position.x!==this.props.position.x||t.position.y!==this.props.position.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}):(t.position&&this.props.position.x!==this.state.x||this.props.position.y!==this.state.y)&&this.setState({x:this.props.position.x,y:this.props.position.y}))}componentWillUnmount(){this.setState({dragging:!1})}render(){const{position:t,defaultPosition:e,rotation:i,defaultClassName:o,defaultClassNameDragging:r,defaultClassNameDragged:s,...a}=this.props,{x:l,y:c,dragging:h,dragged:d}=this.state;let p={};const u=!Boolean(t)||h,g=t||e;p=function({x:t,y:e,rotation:i}){const o=`translate(${t}px,${e}px) rotate(${i}rad)`;return{[si("transform",ai)]:o}}({x:Ei(this)&&u?l:g.x,y:ki(this)&&u?c:g.y,rotation:i});const m=n.Children.only(this.props.children),f=[m.props.className||"",o,h?r:"",d?s:""].join(" ").trim(),y=n.cloneElement(m,{className:f,style:{...m.props.style,...p}});return n.createElement(Ri,{...a,onStart:this.onDragStart,onDrag:this.onDrag,onStop:this.onDragStop},y)}};Oi.defaultProps=Di,Oi.displayName="Draggable";var Li=Oi,Ai=(0,o.b)(l()),_i=r.ZP.label`
  ${h}
`,Fi=r.ZP.label`
  display: block;
  font-size: ${t=>t.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.label.case};
  color: ${t=>t.theme.toolControlBar.inputLabelForeground};
  margin: 0;
  padding-bottom: 8px;

  ${({isDisabled:t})=>t&&r.iv`
      opacity: ${t=>t.theme.toolControlBar.inputLabelInactiveOpacity};
      cursor: default;
      pointer-events: none;
    `}
`,$i=({label:t,htmlFor:e,show:i,style:o,isDisabled:r,className:s})=>{const a=i?Fi:_i,l=e||(t?t.replace(" ","-"):void 0);return n.createElement(a,{style:o,isDisabled:r,htmlFor:l,className:s},t)};$i.defaultProps={show:!0};var Bi=r.ZP.div`
  display: flex;
  align-items: center;
  justify-content: center;
  flex-direction: column;
`,Hi=(0,r.ZP)($i)`
  align-self: flex-start;
`,Ni=(0,r.ZP)(v)`
  color: ${t=>t.theme.button.textSecondaryForeground};
  padding: 1px 7px 2px;
`,Wi=r.ZP.div`
  display: flex;
  justify-content: space-between;
  width: ${t=>t.theme.measurements.advancedUIToolControlBar.width-48}px;
`,Vi=r.ZP.article`
  /* 0.6 of width here refers to the width of the container without padding */
  width: ${t=>.6*t.theme.measurements.advancedUIToolControlBar.width}px;
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.body.case};
  text-align: center;
  margin-top: 7px;
  display: inline-block;
  color: ${t=>t.theme.toolControlBar.inputLabelForeground};
`,Ui=r.ZP.div`
  width: ${t=>.6*t.theme.measurements.advancedUIToolControlBar.width}px;
  transform: translateZ(0);
  overflow: hidden;
  transition: all 500ms ease-out;
`,Zi=r.ZP.span`
  width: ${t=>Math.round(.6*t.length*t.theme.measurements.advancedUIToolControlBar.width)}px;
  margin-left: -${t=>.6*t.activeIndex*t.theme.measurements.advancedUIToolControlBar.width}px;
  position: relative;
  display: inline-block;
  transform: translateZ(0);
  transition: all 600ms cubic-bezier(0.77, 0, 0.175, 1);
  font-family: '${t=>t.theme.typography.fontFamily}', sans-serif;
`,Gi=r.ZP.div`
  border: solid ${t=>t.theme.card.foreground};
  border-width: 0 2px 2px 0;
  padding: 3px;
  height: 0;
  width: 0;

  ${({direction:t})=>"left"===t?r.iv`
          margin-left: 2px;
          transform: rotate(135deg);
        `:r.iv`
          margin-right: 2px;
          transform: rotate(-45deg);
        `}
`,ji=class extends n.PureComponent{constructor(t){super(t),this.updateIndex=(t,e=!1)=>{let i=t+(e?-1:1);const o=this.props.list.length-1;i>o&&(i=0),i<0&&(i=o),this.props.onSelect(this.props.list[i].identifier)},this.getActiveIndex=t=>{const{list:e}=this.props,i=e.findIndex((e=>e.identifier===t));return-1!==i?i:0},this.throttledUpdateIndex=(0,Ai.default)(this.updateIndex,600)}render(){const{list:t,label:e,showLabel:i=!0}=this.props,r=this.getActiveIndex(this.props.defaultIdentifier),s=t.length<=1;return n.createElement(Bi,{"data-test":o.Sa.CarouselSlider},n.createElement(Hi,{show:i,label:e}),n.createElement(Wi,{id:`photoeditorsdk-${e.replace(" ","-")}`},n.createElement(Ni,{ariaLabel:"Select Previous",isDisabled:s,onClick:()=>this.throttledUpdateIndex(r,!0)},n.createElement(Gi,{direction:"left"})),n.createElement(Ui,null,n.createElement(Zi,{activeIndex:r,length:t.length},t.map((t=>n.createElement(Vi,{key:t.identifier},t.value))))),n.createElement(Ni,{ariaLabel:"Select Next",isDisabled:s,onClick:()=>this.throttledUpdateIndex(r)},n.createElement(Gi,{direction:"right"}))))}};ji.defaultProps={showLabel:!0};var Yi=ji,Xi=r.ZP.div`
  display: flex;
  position: relative;
  margin-bottom: 12px;
  max-width: ${t=>t.theme.measurements.inputs.checkbox.maxWidth}px;
`,Ki=Xi,Ji=r.ZP.div.attrs({tabIndex:0})`
  position: relative;
  height: 16px;
  width: 16px;
  cursor: pointer;
  background-color: ${t=>t.theme.checkbox.background};
  border-radius: ${t=>t.theme.shape.radiusSmall}px;
  transition-timing-function: ease-in;
  transition-duration: 0.3s;
  &::after {
    content: '';
    position: absolute;
    display: inline-block;
    left: 5px;
    width: 5px;
    height: 10px;
    border-style: solid;
    border-width: 0 2px 2px 0;
    border-color: transparent;
    transform: rotate(45deg) scale(0.8);
  }

  &:first-child {
    margin-right: 8px;
  }

  &:last-child {
    margin-left: 8px;
  }

  ${c}

  &:hover {
    opacity: ${t=>t.theme.checkbox.hoverOpacity};
  }
  ${t=>t.isChecked&&r.iv`
      background-color: ${t.theme.checkbox.activeBackground};
      &::after {
        color: ${t.theme.checkbox.activeForeground};
        border-color: ${t.theme.checkbox.foreground};
      }
      &:hover {
        background-color: ${t.theme.checkbox.activeBackground};
        opacity: 0.8;
      }
    `}
  ${t=>t.isDisabled&&r.iv`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`,qi=Ji,Qi=r.ZP.input.attrs({type:"checkbox",tabIndex:0})`
  position: absolute;
  opacity: 0;
  cursor: pointer;
  height: 0;
  width: 0;
  margin: 0;
  padding: 0;
  ${c}
`,to=({label:t,value:e,checkMarkPosition:i,onClick:r,isDisabled:s,className:a,style:l})=>{const c=`photoeditorsdk-${t.replace(" ","-")}`;return n.createElement(Ki,{"data-test":o.Sa.Checkbox,className:a,style:l},"left"===i&&n.createElement(qi,{onClick:r,isDisabled:s,isChecked:e}),n.createElement($i,{isDisabled:s,label:t,htmlFor:c}),n.createElement(Qi,{id:c,disabled:s,checked:e,onChange:r}),"right"===i&&n.createElement(qi,{onClick:r,isDisabled:s,isChecked:e}))},eo=to;to.defaultProps={value:!1,checkMarkPosition:"left"};var io=r.iv`
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.body.case};
  height: 100%;
  width: 100%;
  min-height: 26px;
  color: ${t=>t.theme.textInput.foreground};
  padding-bottom: 7px;
  border: none;
  appearance: none;
  border-bottom: 1px solid ${t=>t.theme.textInput.borderColor};
  background: ${t=>t.theme.textInput.background};
  font-family: '${t=>t.theme.typography.fontFamily}', sans-serif;
  transition: border-color 0.4s ease-in-out;

  &::-webkit-search-decoration,
  &::-webkit-search-cancel-button,
  &::-webkit-search-results-button,
  &::-webkit-search-results-decoration {
    -webkit-appearance: none;
  }

  &::-webkit-inner-spin-button,
  &::-webkit-outer-spin-button {
    -webkit-appearance: none;
    margin: 0;
  }

  &:-moz-focusring {
    outline: none;
    border-color: ${t=>t.theme.textInput.hoverBorderColor};
  }

  &::-ms-clear,
  &::-ms-reveal {
    display: none;
  }

  &:focus {
    outline: none;
    border-color: ${t=>t.theme.textInput.hoverBorderColor};
  }

  &:disabled {
    opacity: ${t=>t.theme.textInput.inactiveOpacity};
    pointer-events: none;
  }

  &:hover {
    border-color: ${t=>t.theme.textInput.hoverBorderColor};
  }
`,oo=r.iv`
  opacity: ${t=>t.theme.dropdown.inactiveOpacity};
  pointer-events: none;
`,ro=r.ZP.div`
  display: block;
  position: relative;
  width: 100%;
  white-space: nowrap;
  transition-duration: 0.5s;

  &:disabled {
    ${oo}
  }

  ${({isDisabled:t})=>t&&oo}
`,no=r.ZP.li`
  padding: 10px 16px;
  text-overflow: ellipsis;
  font-size: ${t=>t.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.button2.case};
  white-space: nowrap;
  color: ${t=>t.theme.dropdown.foreground};

  &:hover {
    cursor: pointer;
    background: ${t=>t.theme.dropdown.listItemHoverBackground};
  }

  ${({isActive:t})=>t&&r.iv`
      border-left: 2px solid ${t=>t.theme.primary};
    `}

  ${c}
`,so=r.ZP.div`
  display: flex;
  ${t=>(0,o.t)()||(0,o.s)()?r.iv`
        overflow: hidden;
      `:"vertical"===t.direction?r.iv`
        flex-direction: column;
        flex: 1 1 auto;
        overflow-y: auto;
        overflow-x: hidden;
      `:r.iv`
      overflow-y: hidden;
      overflow-x: auto;
    `};
`,ao=r.ZP.ul.attrs((()=>({role:"menubar","aria-label":"Tool Navigation"})))`
  display: flex;
  flex-direction: ${t=>"vertical"===t.direction?"column":"row"};

  list-style: none;
  padding: 0;
  margin: 0;

  ${t=>(0,o.t)()||(0,o.s)()?r.iv`
        ${()=>"vertical"===t.direction?r.iv`
              width: 100%;
              overflow-y: auto;
              overflow-x: hidden;

              /* hidde the arrows */
              margin-top: -10px;
              margin-bottom: -10px;
              padding-top: 10px;
              padding-bottom: 10px;

              /* hide the scrollbar */
              padding-right: 10px;
              margin-right: -10px;
            `:r.iv`
            height: 100%;
            overflow-y: hidden;
            overflow-x: auto;

            margin-right: -10px;
            margin-left: -10px;
            padding-right: 10px;
            padding-left: 10px;

            padding-bottom: 10px;
            margin-bottom: -10px;
          `}

        scrollbar-face-color: ${t.theme.scrollbar.handleColor};
        scrollbar-track-color: ${t.theme.toolbar.background};
        scrollbar-base-color: ${t.theme.toolbar.background};
        scrollbar-3dlight-color: ${t.theme.scrollbar.handleColor};
        scrollbar-highlight-color: ${t.theme.scrollbar.handleColor};
        scrollbar-arrow-color: ${t.theme.toolbar.background};
        scrollbar-shadow-color: ${t.theme.scrollbar.handleColor};
        scrollbar-dark-shadow-color: ${t.theme.scrollbar.handleColor};
      `:""}
`,lo=({direction:t="horizontal","data-test":e,className:i,children:o})=>n.createElement(so,{direction:t,className:i},n.createElement(ao,{direction:t,"data-test":e},o)),co=(0,r.ZP)(lo)`
  position: absolute;

  background: ${t=>t.theme.dropdown.listBackground};
  color: ${t=>t.theme.dropdown.listForeground};
  border: 1px solid ${t=>t.theme.dropdown.listBorderColor};
  box-shadow: ${t=>t.theme.dropdown.listShadow};

  visibility: hidden;
  opacity: 0;
  ${t=>t.isOpen?r.iv`
        visibility: visible;
        opacity: 1;
        display: flex;
      `:""}

  transition: all 0.5s ease;

  width: 100%;
  max-height: 160px;
  margin: 5px 0;

  /* had to add these changes to get the dropdown working in IE11 */
  ${()=>(0,o.t)()?r.iv`
        > ul {
          height: 160px;
          margin-bottom: 0px;
          margin-top: 0px;
          padding-bottom: 0px;
          padding-top: 0px;
        }
      `:""}

  border-radius: 0 0 ${t=>t.theme.shape.radiusMedium}px
    ${t=>t.theme.shape.radiusMedium}px;
  z-index: ${t=>t.theme.measurements.zIndex.input.list};
`;co.defaultProps={direction:"vertical"};var ho=r.ZP.div`
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.body.case};
  color: ${t=>t.theme.dropdown.foreground};
  background-color: ${t=>t.theme.dropdown.background};
  border: none;
  border-bottom: 1px solid ${t=>t.theme.dropdown.borderColor};
  padding: 5px 0;
  cursor: ${t=>t.showList?"pointer":"default"};
  transition: border-color 0.4s ease-in-out;

  &:hover {
    border-color: ${t=>t.theme.dropdown.hoverBorderColor};
  }

  ${c}
`,po=r.ZP.div`
  position: absolute;
  width: 0;
  height: 0;
  border-left: 5px solid transparent;
  border-right: 5px solid transparent;
  border-top: 5px solid ${t=>t.theme.dropdown.caretColor};
  transform: rotate(${t=>t.rotation||0}deg);
  display: inline-block;
  transition-duration: 0.3s;
  transition-timing-function: ease-in;
  right: 0;
  top: 13px;
`,uo=r.ZP.div``,go=class extends n.PureComponent{constructor(t){super(t),this.state={isOpen:!1},this.handleOutsideClick=t=>{this.node&&this.node.contains(t.target)||this.setState({isOpen:!1})},this.onSelect=t=>{const{onSelect:e}=this.props;e(t),this.setState({isOpen:!1})},this.onClick=()=>{this.setState((t=>({isOpen:!t.isOpen})))},this.listItem=t=>{const{itemStyle:e,selectedItem:i}=this.props,{isOpen:o}=this.state,{value:r,label:s}=t;let a={};return"function"===typeof e?a=e(t):null!==e&&"object"===typeof e&&(a=e),n.createElement(no,{"aria-hidden":!o,tabIndex:0,style:a,onClick:()=>this.onSelect(r),key:r,isActive:i===r},s)},this.onKeyDown=t=>{"Space"!==t.code&&"Enter"!==t.code||this.onClick()},this.nodeRef=t=>{this.node=t}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1)}render(){const{selectedItem:t,list:e,label:i,style:r,isDisabled:s}=this.props,{isOpen:a}=this.state,l=e.length>1,c=s?{}:{tabIndex:0};return n.createElement(uo,null,n.createElement($i,{isDisabled:s,style:{paddingLeft:"0px"},label:i}),n.createElement("div",{ref:this.nodeRef},n.createElement(ro,{isOpen:a,isDisabled:s},n.createElement(ho,{"data-test":o.Sa.Dropdown,"aria-hidden":s,...c,showList:l,style:r,onClick:l?this.onClick:void 0,onKeyDown:this.onKeyDown},t,l&&n.createElement(po,{rotation:a?180:0})),n.createElement(co,{"data-test":o.Sa.DropdownList,isOpen:a},l&&e.map(this.listItem)))))}},mo=r.ZP.input.attrs({type:"file",id:"fileUpload",accept:"image/*"})`
  display: none;
`,fo=({children:t})=>n.createElement("form",{onSubmit:t=>{t.preventDefault()}},t),yo=r.ZP.input`
  ${io}
  /* override user agent style */
  padding: 0;
  &:disabled {
    opacity: ${t=>t.theme.textInput.inactiveOpacity};
    cursor: default;
    pointer-events: none;
  }
`,bo=r.ZP.div`
  position: relative;
  &:first-child {
    margin-right: 15px;
  }
`,So=class extends n.Component{constructor(){super(...arguments),this.onChange=t=>{const{onChange:e}=this.props;e&&e(t.target.value)}}render(){const{id:t,testId:e,value:i,type:o,min:r,max:s,onBlur:a,onFocus:l,onKeyUp:c,onKeyDown:h,onMouseUp:d,onTouchEnd:p,isDisabled:u,className:g,children:m}=this.props;return n.createElement(bo,{className:g},n.createElement(yo,{id:t,"data-test":e,"aria-hidden":u,disabled:u,value:i,type:o,min:r,max:s,onChange:this.onChange,onBlur:a,onFocus:l,onKeyUp:c,onKeyDown:h,onMouseUp:d,onTouchEnd:p}),m)}};So.defaultProps={type:"text"};var vo=So,xo=r.ZP.div`
  ${(0,o.t)()?r.iv``:r.iv`
        display: flex;
        flex: 0 1 auto;
        flex-direction: column;
      `}
`,wo=class extends n.Component{constructor(t){super(t),this.node=null,this.handleOutsideClick=t=>{this.node&&this.node.current&&this.node.current.contains(t.target)||this.onSubmit()},this.onSubmit=()=>{const{onSubmit:t}=this.props,{value:e,isActive:i}=this.state;if(t){const o=parseFloat(wo.cleanValue(e));!Number.isNaN(o)&&i&&t(`${o}`)}this.setState({isActive:!1})},this.onBlur=()=>{this.onSubmit()},this.onFocus=()=>{this.setState({isActive:!0})},this.onKeyDown=t=>{const{value:e}=this.state;if("Enter"===t.key)this.onSubmit();else if("ArrowUp"===t.key){const t=parseFloat(wo.cleanValue(e));"number"===typeof t&&this.setState({value:(t+1).toString(),isActive:!0})}else if("ArrowDown"===t.key){const t=parseFloat(wo.cleanValue(e));"number"===typeof t&&this.setState({value:(t-1).toString(),isActive:!0})}},this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isActive:!0})},this.state={value:this.props.value||"",isActive:!1},this.node=n.createRef()}static getDerivedStateFromProps({value:t},{value:e,isActive:i}){return t===e||i?null:{value:t}}static cleanValue(t){return t?t.replace(",",".").replace(/[a-zA-Z]/g,"").trim():""}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1)}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1)}render(){const{id:t,label:e,isDisabled:i,ariaHidden:r,onMouseUp:s,onTouchEnd:a,className:l}=this.props,{value:c}=this.state;return n.createElement(xo,{ref:this.node,"data-test":o.Sa.NummericInput,className:l},n.createElement($i,{htmlFor:t,label:e,show:!!e,isDisabled:i}),n.createElement(vo,{id:t,value:c,isDisabled:i,"aria-hidden":r,onChange:this.onChange,onKeyDown:this.onKeyDown,onBlur:this.onBlur,onFocus:this.onFocus,onMouseUp:s,onTouchEnd:a}))}},Co=wo;Co.defaultProps={showLabel:!0};var Eo=Co,ko=r.ZP.input.attrs({type:"search"})`
  ${io}
`,To=(0,n.forwardRef)((({onChange:t,onKeyDown:e,placeholder:i,className:o,style:r},s)=>n.createElement("div",{className:o,style:r},n.createElement($i,{show:!1,label:"photoeditorsdk-Search"}),n.createElement(ko,{ref:s,id:"photoeditorsdk-Search",onChange:e=>{t&&t(e.target.value)},onKeyDown:e,placeholder:i,autoComplete:"off"})))),Mo=r.ZP.div``,zo=({label:t,children:e,inline:i,showLabel:o,isDisabled:r,"data-test":s})=>n.createElement(Mo,{"data-test":s},n.createElement($i,{isDisabled:r,label:t,show:o}),n.createElement(Po,{id:`photoeditorsdk-${t.replace(" ","-")}`,inline:!!i},e)),Po=r.ZP.div`
  display: inline-flex;
  ${t=>!t.inline&&r.iv`
        flex-wrap: wrap;
      `||""}
`;zo.defaultProps={showLabel:!0};var Io=zo,Ro=r.ZP.div`
  display: flex;
  flex-direction: column;
  /* needed for IE11 to properly calculate the width */
  min-width: 1px;
`,Do=(0,r.ZP)($i)`
  padding-bottom: 2px;
`,Oo=r.iv`
  ${(0,o.s)()||(0,o.t)()?r.iv`
        width: 16px;
        height: 16px;
      `:r.iv`
        width: 20px;
        height: 20px;
      `}
  background: ${t=>t.theme.slider.thumbBackground};
  border: 2px solid ${t=>t.theme.slider.thumbBorderColor};
  border-radius: 50%;
  cursor: pointer;
`,Lo=r.ZP.input`
  display: flex;
  flex: 1 0 auto;
  appearance: none;
  max-width: calc(100% - 50px);
  outline: none;
  border-radius: 0; /* iOS */

  padding: 0;
  margin: 0;
  height: 100;
  border: none;

  ${c}

  ${(0,o.s)()||(0,o.t)()?r.iv`
        margin-top: 10px;
        height: 20px;
        /* remove once we have a better concept for focus in all browser */
        &:focus {
          box-shadow: none;
        }
      `:r.iv`
        height: 2px;
        background: ${t=>`linear-gradient(to right, ${(t=>{let e=100*(t.value-t.min)/(t.max-t.min);return t.adjust?t.value>0?(e=t.value*(t.max/2)*100,`${t.theme.slider.trackColor} 0%,\n      ${t.theme.slider.trackColor} 50%,\n      ${t.theme.slider.activeTrackColor} 50%,\n      ${t.theme.slider.activeTrackColor} ${50+e}%,\n      ${t.theme.slider.trackColor} ${50+e}%,\n      ${t.theme.slider.trackColor} 100%\n      `):t.value<0?(e=t.value*(t.min/2)*100,`${t.theme.slider.trackColor} 0%,\n      ${t.theme.slider.trackColor} ${50-e}%,\n      ${t.theme.slider.activeTrackColor} ${50-e}%,\n      ${t.theme.slider.activeTrackColor} 50%,\n      ${t.theme.slider.trackColor} 50%,\n      ${t.theme.slider.trackColor} 100%\n      `):`${t.theme.slider.trackColor} 0%,\n    ${t.theme.slider.trackColor} 100%`:`${t.theme.slider.activeTrackColor} 0%,\n    ${t.theme.slider.activeTrackColor} ${e}%,\n    ${t.theme.slider.trackColor} ${e}%,\n    ${t.theme.slider.trackColor} 100%`})(t)})`};
      `}
  &::-moz-focus-outer {
    /** This is to remove the dotted focus lines in firefox */
    border: 0;
  }
  &:disabled {
    opacity: ${t=>t.theme.slider.inactiveOpacity};
    pointer-events: none;
  }
  &:hover {
    opacity: ${t=>t.theme.slider.hoverOpacity};
  }
  &::-webkit-slider-runnable-track {
    cursor: pointer;
    appearance: none;
  }
  &::-moz-range-track {
    appearance: none;
    cursor: pointer;
  }
  &::-ms-track {
    cursor: pointer;
    height: 2px;
    appearance: none;
    background: transparent;
    color: transparent;
    border-color: transparent;
    border-width: 6px 0;
  }
  &::-webkit-slider-thumb {
    appearance: none;
    ${Oo}
  }
  &::-moz-range-thumb {
    appearance: none;
    ${Oo}
  }
  &::-ms-thumb {
    appearance: none;
    ${Oo}
  }
  &::-ms-fill-lower {
    background: ${t=>`${t.theme.slider.activeTrackColor}`};
  }
  &::-ms-fill-upper {
    background: ${t=>`${t.theme.slider.trackColor}`};
  }
  &::-ms-tooltip {
    display: none;
  }
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 200px;
  }
`,Ao=r.ZP.div`
  display: flex;
  align-items: center;
  height: 26px;
  margin-right: ${t=>t.centerSlider?-56:0}px;
`,_o=(0,r.ZP)(Eo)`
  max-width: 50px;
  padding-left: 16px;
  > div > input {
    text-align: center;
  }
`,Fo=class extends n.Component{constructor(t){super(t),this.onSubmit=t=>{const{onChange:e,suffix:i,divider:o,min:r,max:n,value:s}=this.props,a=t.replace(i,""),l=a?parseFloat(a)/o:s,c=Math.max(r,Math.min(n,l));Number.isNaN(c)||(e(c),this.props.onMouseUp?this.props.onMouseUp(c):this.props.onTouchEnd&&this.props.onTouchEnd(c))},this.onSliderChange=t=>{const{onChange:e}=this.props;e(parseFloat(t.target.value))},this.onTouchOrMouseUp=t=>{const{value:e}=t.target,{onMouseUp:i,onTouchEnd:o}=this.props,r=parseFloat(e);i&&i(r),o&&o(r)},this.randomId=(0,o.Na)()}render(){const{"data-test":t,identifier:e,value:i,min:o,max:r,divider:s,suffix:a,decimal:l,showLabel:c,showInput:h,style:d,centerSlider:p,adjust:u,label:g,isDisabled:m,step:f,"aria-hidden":y,className:b}=this.props,S=`photoeditorsdk-slider-${this.randomId}`,v=`${S}-input`,x=`${(i*s).toFixed(l)}${a}`,w=h&&n.createElement(_o,{id:v,value:x,isDisabled:m,"aria-hidden":y,onSubmit:this.onSubmit});return n.createElement(Ro,{className:b,"data-test":t||e||S},n.createElement(Do,{isDisabled:m,label:g,show:c}),n.createElement(Ao,{centerSlider:h&&p},n.createElement(Lo,{type:"range",role:"slider","aria-hidden":y,tabIndex:0,value:i,min:o,max:r,step:f,style:d,disabled:m,id:S,onChange:this.onSliderChange,adjust:u,name:g,onKeyUp:this.onSliderChange,onKeyDown:this.onSliderChange,onMouseUp:this.onTouchOrMouseUp,onTouchEnd:this.onTouchOrMouseUp}),w))}};Fo.defaultProps={showLabel:!0,showInput:!0,adjust:!1,centerSlider:!1,min:-1,max:1,value:0,step:.01,decimal:0,divider:100,suffix:""};var $o=Fo,Bo=class extends n.Component{constructor(){super(...arguments),this.onDismiss=()=>{const{handleClose:t,handleDismiss:e}=this.props;t&&t(),e&&e()},this.onConfirm=()=>{const{handleClose:t,handleConfirm:e}=this.props;t&&t(),e&&e()}}render(){const{headerLabel:t,bodyLabel:e,confirmLabel:i,dismissLabel:r,type:s,children:a}=this.props,l=n.Children.toArray(a)[0];if(!n.isValidElement(l))throw new Error("Child is not a valid react element");return n.cloneElement(l,{handleConfirm:this.onConfirm,handleDismiss:this.onDismiss,header:n.createElement(ti,null,t),body:n.createElement(Ke,{"data-test":o.Sa.DialogBody},e),footer:n.createElement(qe,{type:s},r&&n.createElement(E,{label:r,ariaLabel:r,onClick:this.onDismiss}),i&&n.createElement(C,{label:i,ariaLabel:i,onClick:this.onConfirm}))})}},Ho=r.ZP.div`
  display: flex;
`,No=(0,r.ZP)(ti)`
  padding: 0;
`,Wo=r.ZP.div`
  display: flex;
  flex-direction: column;
  margin-left: 8px;
  @media all and (min-width: 640px) {
    margin-left: 30px;
  }
`,Vo=(0,r.ZP)(Ke)`
  padding: 0;
  margin: 0;
`,Uo=class extends n.PureComponent{render(){const{headerLabel:t,bodyLabel:e,children:i}=this.props,r=n.Children.toArray(i)[0];if(!n.isValidElement(r))throw new Error("Child is not a valid react element");return n.cloneElement(r,{height:"90px",body:n.createElement(Ke,{"data-test":o.Sa.DialogBody},n.createElement(Ho,null,n.createElement(ri,null),n.createElement(Wo,null,n.createElement(No,null,t),n.createElement(Vo,null,e))))})}},Zo=r.ZP.form`
  display: flex;
  flex-direction: column;
  width: 100%;
  height: 100%;
`,Go=r.ZP.textarea`
  display: flex;
  caret-color: ${t=>t.theme.primary};
  ${io}
  min-height: 100%;
  padding: 0px;
  outline-offset: -8px;
  color: ${t=>t.theme.modal.bodyForeground};
  resize: none;
  font-family: '${t=>t.theme.typography.fontFamily}', sans-serif;

  &:selection,
  &:-moz-selection {
    background-color: ${t=>t.theme.primary};
    color: ${t=>t.theme.foreground};
  }
`,jo=r.ZP.label`
  padding: 11px 20px 8px;
  font-size: ${t=>t.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.label.case};
  color: ${t=>t.theme.modal.headerForeground};
`,Yo=(0,r.ZP)(Ke)`
  height: 100%;
`,Xo=(0,r.ZP)(qe)`
  border-top: none;
`,Ko=class extends n.Component{constructor(){super(...arguments),this.state={value:""},this.input=n.createRef(),this.handleKeydown=t=>{(0,o.Ra)(this.handleDismiss)(t)},this.handleDismiss=()=>{const{handleDismiss:t}=this.props;t&&t(!1)},this.handleConfirm=()=>{const{handleConfirm:t}=this.props,{value:e}=this.input.current;e&&(t&&t(e),this.handleDismiss())},this.onChange=t=>{const{allowEmojis:e}=this.props,i=e?t.target.value:(0,o.y)(t.target.value);this.input.current.value=i,this.setState({value:i})},this.onSubmit=t=>{t.preventDefault()}}componentDidMount(){const{text:t,defaultText:e}=this.props;this.input.current.focus(),this.input.current.value=t||e||"",this.setState({value:this.input.current.value}),document.addEventListener("keydown",this.handleKeydown,!1),t===e&&this.input.current.select()}componentDidUpdate(t){const{isVisible:e}=this.props;t.isVisible!==e&&e&&this.input.current.focus()}componentWillUnmount(){document.removeEventListener("keydown",this.handleKeydown,!1)}render(){const{headerLabel:t,dismissLabel:e,confirmLabel:i,maxLength:o,type:r,children:s}=this.props,{value:a}=this.state,l=n.Children.toArray(s)[0];if(!n.isValidElement(l))throw new Error("Child is not a valid react element");return n.cloneElement(l,{handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss,isConfirmDisabled:!a,height:"150px",header:n.createElement(jo,{htmlFor:"photoeditorsdk-TextInput"},t),body:n.createElement(Yo,null,n.createElement(Zo,{onSubmit:this.onSubmit},n.createElement(Go,{ref:this.input,id:"photoeditorsdk-TextInput",placeholder:"Write Something",autoFocus:!0,onChange:this.onChange,maxLength:o}))),footer:n.createElement(Xo,{type:r},n.createElement(E,{label:e,ariaLabel:e,onClick:this.handleDismiss}),n.createElement(C,{label:i,ariaLabel:i,isDisabled:!a,onClick:this.handleConfirm}))})}};Ko.defaultProps={defaultText:"Write Something",allowEmojis:!1};var Jo=Ko,qo=r.ZP.div`
  padding-bottom: ${t=>8*(t.count||1)}px;
`;qo.defaultProps={count:1};var Qo=class extends n.Component{getChildren(){const t=[],e=[];return n.Children.forEach(this.props.children,(i=>{switch(i.type.componentName){case"case":this.props.type===i.props.value&&t.push(i);break;case"default":e.push(i)}})),t.length>0?t:e}render(){const t=this.getChildren();return 0===t.length?null:n.createElement(n.Fragment,null,t)}},tr=class extends n.Component{render(){return this.props.children}};tr.componentName="case";var er=class extends n.Component{render(){return this.props.children}};er.componentName="default";var ir=r.F4`
  from { transform: translate(-50%, 0%); }
  to { transform: translate(-50%, 50%); }
`,or=r.ZP.div`
  position: absolute;
  top: ${t=>t.position.y}px;
  left: ${t=>t.position.x}px;
  transform: translate(-50%, 50%);
  background: black;
  color: white;
  border-radius: ${t=>t.theme.shape.radiusMedium}px;
  padding: 10px 16px;
  text-align: center;
  z-index: ${t=>t.theme.measurements.zIndex.toast};
  visibility: hidden;

  ${({show:t})=>t&&r.iv`
      visibility: visible;
      animation: ${ir} 0.5s, fadeout 0.5s 2.5s;
    `}
`,rr=or,nr=r.iv`
  border: 1px solid ${t=>t.theme.card.activeBorderColor};
  ${u} {
    background-color: ${t=>t.theme.card.activeOverlayColor};
  }
`,sr=r.ZP.button.attrs((t=>{const e={};return t.image&&(e.backgroundImage=`url(${t.image})`),{style:e,...t.style}}))`
  &&& {
    box-sizing: border-box;
  }

  /* basic ui text items use position absolute */
  position: relative;

  padding: 0;
  cursor: pointer;
  /* Safari will change the height of the toolbar and position the category cards at the bottom for some reason */
  vertical-align: top;
  border: none;
  box-sizing: border-box;
  background-size: cover;
  background-position: center center;
  background-repeat: no-repeat;
  background-color: ${t=>t.theme.card.background};
  color: ${t=>t.theme.card.foreground};

  border-radius: ${t=>t.theme.shape.radiusMedium}px;
  ${()=>r.iv`
    animation: ${V} 0.2s linear;
  `};
  animation-fill-mode: both;
  overflow: hidden;

  ${c}

  /* Active */

  /* No :active styles on purpose. */

  ${({isActive:t})=>t&&nr}

  /* Disabled */

  &:disabled {
    cursor: default;
    pointer-events: none;

    ${g} {
      background-color: ${t=>t.theme.card.inactiveOverlayColor};
    }
  }

  /* Hover */

  &:hover {
    ${m} {
      background-color: ${t=>t.theme.card.hoverOverlayColor};
    }
  }
`,ar=class extends n.Component{constructor(){super(...arguments),this.state=f,this.timeout=null,this.onKeyDown=t=>{"Space"!==t.key&&"Enter"!==t.key||this.props.onClick&&this.props.onClick()},this.onClick=t=>{const e=t.currentTarget.getBoundingClientRect(),i=t.pageX-e.left,o=t.pageY-e.top;"block"===this.state.display?this.setState({display:"none"},(()=>{this.setRippleState(i,o)})):this.setRippleState(i,o),this.props.onClick(t)},this.setRippleState=(t,e)=>{this.setState({left:t,top:e,display:"block"}),this.timeout=setTimeout((()=>{this.setState({display:"none"})}),1200)}}componentWillUnmount(){clearTimeout(this.timeout)}render(){const{children:t,label:e,isActive:i,isDisabled:o,image:r,style:s,className:a}=this.props,{left:l,top:c,display:h}=this.state;return n.createElement(sr,{isActive:i,"aria-label":e,"data-test":e,disabled:o,image:r,onClick:this.onClick,onKeyDown:this.onKeyDown,style:s,className:a},t,n.createElement(y,{display:h,left:l,top:c}),n.createElement(u,null),n.createElement(g,null),n.createElement(m,null))}};ar.defaultProps={isActive:!1};var lr={Focused:c,VisuallyHidden:h},cr=W,hr={Container:Rt,ColorItem:Ne,ColorItemBase:$e,ColorItemBackground:Oe,ColorItemTiledBackground:He,ColorItemActiveOverlay:_e,Dialog:Ye,DialogBase:Ze,DialogContainer:je,DialogBackdrop:Ve,DialogHeader:ti,DialogBody:Ke,DialogFooter:qe,DialogSpinner:ri,TextEditModal:Jo,ActionModal:Bo,InfoModal:Uo,Spacer:qo,Draggable:Li,DraggableCore:Ri,Toast:rr,Input:{Label:$i,File:mo,Search:To,Slider:$o,CarouselSlider:Yi,Selection:Io,Checkbox:eo,CheckboxBase:Ki,CheckboxInput:Qi,CheckboxCheckMark:qi,Dropdown:go,Text:vo,NumericInput:Eo,Form:fo},Switch:{Index:Qo,Case:tr,Default:er}},dr=(0,r.ZP)(z)`
  font-size: ${t=>t.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.button2.case};
  color: ${t=>t.theme.button.textSecondaryForeground};

  ${g} {
    display: none;
  }

  &:disabled {
    opacity: ${t=>t.theme.button.textInactiveOpacity};
  }
`,pr=r.ZP.div`
  display: inline-flex;
`,ur=(0,r.ZP)(z)`
  background: ${t=>t.theme.canvasActionBar.background};
  color: ${t=>t.theme.canvasActionBar.foreground};
  font-size: ${t=>t.theme.measurements.fontSystem.button2.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.button2.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.button2.case};
  padding: 4px 10px;
  position: relative;
  /* for safari */
  margin: 0;
  &:last-child:after {
    opacity: 0;
  }
`,gr=r.ZP.div`
  ${({show:t})=>t?r.iv`
          opacity: 1;
        `:r.iv`
          opacity: 0;
        `};
  position: absolute;
  transform: translate(-50%, -100%);
  background: ${t=>t.theme.canvasActionBar.background};
  color: ${t=>t.theme.canvasActionBar.foreground};
  border-radius: ${t=>t.theme.canvasActionBar.borderRadius?t.theme.canvasActionBar.borderRadius:t.theme.shape.radiusMedium}px;
  white-space: nowrap;
  transition: opacity 0.3s ease-in-out;
  z-index: ${t=>t.theme.measurements.zIndex.buttonGroup};

  ${ur} {
    &:after {
      content: '';
      position: absolute;
      right: 0px;
      top: 6px;
      height: calc(100% - 12px);
      border-right: 1px solid
        ${t=>t.theme.canvasActionBar.separatorColor};
      &:last-child {
        border-right: unset;
      }
    }
  }
`,mr=(0,r.ZP)(v)`
  width: 60px;
  height: 60px;
  background-color: gray;
  border-radius: 50%;
  position: absolute;
  left: 50%;
  transform: translateX(-50%);
  z-index: ${t=>t.theme.measurements.zIndex.button.float};
  padding: 2px;
`,fr=r.ZP.div`
  height: 56px;
  width: 56px;
  border-radius: 50%;
  background-color: ${t=>t.theme.webcam.floatButton};
`,yr=[o.E.LIBRARY,[o.E.TRANSFORM,o.E.FILTER,o.E.ADJUSTMENT],[o.E.FOCUS,o.E.FRAME,o.E.OVERLAY],[o.E.TEXT,o.E.TEXT_DESIGN,o.E.STICKER,o.E.BRUSH]],br={image:"",license:"",order:"default",language:"en",theme:"dark",layout:"advanced",mainCanvasActions:[o.D.UNDO,o.D.REDO,o.D.EXPORT,o.D.CLOSE],displayResizeWarning:!1,displayCloseWarning:!0,displayCanvasRendererWarning:!0,displayToolControlBarTitle:!0,displaySerializationModal:!0,engine:{crossOrigin:"anonymous",downscaleOptions:{maxMegaPixels:{desktop:10,mobile:5}},preferredRenderer:(0,o.x)()?"webgl":"canvas",backgroundColor:[0,0,0,1]},enableZoom:!0,scaleImageToFit:!0,restrictZoomOutToDefault:!0,forceCrop:!1,assetBaseUrl:"assets/",defaultTool:o.E.FILTER,tools:yr,snapping:new o.I,filter:new o.Y,focus:new o.da,adjustment:new o.U,library:new o.ma,overlay:new o.pa,sticker:new o.ua,text:new o.xa,textdesign:new o.Ea,frame:new o.ha,brush:new o.Ca,transform:new o.Ha,export:{image:{exportType:o.N.IMAGE,format:o.O.PNG,quality:.9,enableDownload:!0,transparent:!0},filename:"photoeditorsdk-export"},custom:{},watermark:new o.K};function Sr(t){return t&&"object"===typeof t&&"[object RegExp]"!==Object.prototype.toString.call(t)&&"[object Date]"!==Object.prototype.toString.call(t)}function vr(t,e){return e&&!0===e.clone&&Sr(t)?xr(function(t){return Array.isArray(t)?[]:{}}(t),t,e):t}function xr(t,e,i){return Array.isArray(e)?Array.isArray(t)?e:vr(e,i):function(t,e,i){const o={};return Sr(t)&&Object.keys(t).forEach((e=>{o[e]=vr(t[e],i)})),Object.keys(e).forEach((r=>{const n=Sr(e[r])&&t[r];o[r]=n?xr(t[r],e[r],i):vr(e[r],i)})),o}(t,e,i)}function wr(t,e=null){if(!Array.isArray(t)||t.length<2)throw new Error("first argument should be an array with at least two elements");return t.reduce(((t,i)=>xr(t,i,e)))}var Cr,Er,kr=t=>{let e=Number(t).toString(16);return e.length<2&&(e=`0${e}`),e},Tr=(t,e,i)=>`#${kr(255*t)}${kr(255*e)}${kr(255*i)}`,Mr=t=>{if((0,o.pb)(t)){const[e,i,o,r]=t;return`rgba(${255*e}, ${255*i}, ${255*o}, ${r})`}if((0,o.ob)(t)){const{r:e,g:i,b:o,a:r}=t;return`rgba(${255*e}, ${255*i}, ${255*o}, ${r})`}if((0,o.nb)(t)){const[e,i,o]=t;return Tr(e,i,o)}if((0,o.mb)(t)){const{r:e,g:i,b:o}=t;return Tr(e,i,o)}return t},zr=t=>t.map((t=>({identifier:t.name,color:t.color,colorString:Mr(t.color)}))),Pr={black:[0,0,0,1],white:[1,1,1,1],gray:[191/255,191/255,191/255,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},Ir={transparent:[0,0,0,0],black:[0,0,0,1],white:[1,1,1,1],blue:[.4,134/255,1,1],skyBlue:[.4,.8,1,1],red:[231/255,80/255,80/255,1],orange:[242/255,136/255,85/255,1],yellow:[1,247/255,99/255,1]},Rr={[o.R.BRIGHTNESS]:0,[o.R.SATURATION]:0,[o.R.CONTRAST]:0,[o.R.GAMMA]:0,[o.R.CLARITY]:0,[o.R.EXPOSURE]:0,[o.R.SHADOWS]:0,[o.R.HIGHLIGHTS]:0,[o.R.WHITES]:0,[o.R.BLACKS]:0,[o.R.TEMPERATURE]:0,[o.R.SHARPNESS]:0};(Er=Cr||(Cr={})).ADD="add",Er.EDIT="edit",Er.DELETE="delete";var Dr=class{constructor(t,e){this.assets=[],this.entityMapper=t=>"items"in t?this.categoryMapper(t):this.itemMapper(t),this.categoryMapper=t=>t?{...t,thumbnailURI:this.getCategoryThumbnailURI(t),name:this.config.locale[t.identifier]||t.name,items:t.items.map(this.itemMapper)}:null,this.itemMapper=t=>({...t,thumbnailURI:this.getItemThumbnailURI(t),name:this.config.locale[t.identifier]||("name"in t?t.name:"")}),this.getCategoryThumbnailURI=t=>t.thumbnailURI?(0,o.z)(t.thumbnailURI)||"data:image"===t.thumbnailURI.substr(0,10)?t.thumbnailURI:this.config.getAssetPath(t.thumbnailURI||""):"",this.getItemThumbnailURI=t=>{var e;if(null==(e=t.thumbnailURI)?void 0:e.trim())return(0,o.z)(t.thumbnailURI)||"data:image"===t.thumbnailURI.substr(0,10)?t.thumbnailURI:this.config.getAssetPath(t.thumbnailURI||"");const i=t[this.config.itemFallbackKey];return i?this.config.getAssetPath(i):""},this.config=e,this.assets=t.map(this.entityMapper).filter(Boolean)}static isCategory(t){return Object.prototype.hasOwnProperty.call(t,"items")}get categories(){return this.assets.reduce(((t,e)=>{if(Dr.isCategory(e))return[...t,e]}),[]).filter(Boolean)}get items(){return this.assets.reduce(((t,e)=>Dr.isCategory(e)?[...t,...e.items]:[...t,e]),[]).filter(Boolean)}},Or=class{constructor(t,e){this.from=t,this.to=e}contains(t){return this.from<=t&&t<=this.to}clamp(t){return Math.min(Math.max(this.from,t),this.to)}},Lr=new Or(-1,1),Ar=class{constructor(t){this.editAdjustments=({type:t,value:e})=>{const i=Lr.clamp(e);this.state[t]=i},this.reset=()=>{(0,o.m)((()=>{-1===this.indexInContainer&&(Object.keys(Rr).forEach((t=>{this.state[t]=Rr[t]})),this.orderHelper.removeIndex(o.E.ADJUSTMENT))}))},this.setAdjustmentEffect=t=>{const e=this.orderHelper.addIndex(o.E.ADJUSTMENT);return this.effect?this.effect.setProperties(t):this.effect=this.engineMediator.engine.addAdjustments(t,this.engineMediator.image.container,e),this.effect.getProperties()},this.removeAdjustmentEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),-1===this.indexInContainer&&(this.effect=void 0))},this.engineMediator=t,this.state=Rr}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get orderHelper(){return this.engineMediator.orderHelper}};(0,o.c)([o.e],Ar.prototype,"state",2),(0,o.c)([o.l],Ar.prototype,"editAdjustments",2),(0,o.c)([o.l],Ar.prototype,"reset",2);var _r=class{constructor(t){this.dirty=o.e.box(!1),this.editAdjustments=({type:t,value:e})=>{this.pureSetAdjustment({type:t,value:e}),this.editor.render()},this.toolSnapshot=()=>{(0,o.Va.default)(this.state,Rr)?this.dirty.set(!1):this.dirty.set(!0),this.addSnapshot(Cr.EDIT,o.E.ADJUSTMENT)},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.toggleOptionSelection=t=>{this.selectedOption=t},this.pureSetAdjustment=({type:t,value:e})=>{const i=this.adjustmentsStore.setAdjustmentEffect({[t]:e});this.adjustmentsStore.editAdjustments({type:t,value:i[t]})},this.pureReset=()=>{this.dirty.set(!1),this.adjustmentsStore.removeAdjustmentEffect(),this.adjustmentsStore.reset(),this.selectedOption=""},this.reset=()=>{this.pureReset(),this.addSnapshot(Cr.DELETE,this.locale.controls.buttonReset),this.editor.render()},this.updateStateFromHistory=t=>{(0,o.Va.default)(t,this.state)||((0,o.Va.default)(t,Rr)?this.pureReset():(0,o.m)((()=>{this.dirty.set(Object.values(t).some((t=>0!==t))),Object.keys(t).forEach((e=>{this.pureSetAdjustment({type:e,value:t[e]})}))})))},this.updateStateFromSerialization=t=>{this.updateStateFromHistory(t)},this.editor=t,this.adjustmentsStore=new Ar(this.editor.engineMediator),this.selectedOption="";const e=this.editor.assetProvider.getAssets("adjustment");this.entityManager=new Dr(e,{...this.config,locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("adjustment")})}get selectedAdjustmentType(){return this.selectedOption}get isDirty(){return this.dirty.get()}get state(){return this.adjustmentsStore.state}get selectedOptionLabel(){const t=this.items.find((t=>!!t&&t.identifier===this.selectedOption));return t?t.name:""}get brightness(){return this.state.brightness}get saturation(){return this.state.saturation}get contrast(){return this.state.contrast}get gamma(){return this.state.gamma}get clarity(){return this.state.clarity}get exposure(){return this.state.exposure}get shadows(){return this.state.shadows}get highlights(){return this.state.highlights}get whites(){return this.state.whites}get blacks(){return this.state.blacks}get temperature(){return this.state.temperature}get sharpness(){return this.state.sharpness}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[o.E.ADJUSTMENT]}get locale(){return this.editor.configStore.locale[o.E.ADJUSTMENT]}};(0,o.c)([o.e],_r.prototype,"selectedOption",2),(0,o.c)([o.e],_r.prototype,"dirty",2),(0,o.c)([o.l],_r.prototype,"editAdjustments",2),(0,o.c)([o.l],_r.prototype,"toggleOptionSelection",2),(0,o.c)([o.l],_r.prototype,"pureSetAdjustment",2),(0,o.c)([o.l],_r.prototype,"pureReset",2),(0,o.c)([o.l],_r.prototype,"reset",2),(0,o.c)([o.l],_r.prototype,"updateStateFromHistory",2),(0,o.c)([o.l],_r.prototype,"updateStateFromSerialization",2),(0,o.c)([o.f],_r.prototype,"selectedAdjustmentType",1),(0,o.c)([o.f],_r.prototype,"isDirty",1),(0,o.c)([o.f],_r.prototype,"state",1),(0,o.c)([o.f],_r.prototype,"selectedOptionLabel",1),(0,o.c)([o.f],_r.prototype,"brightness",1),(0,o.c)([o.f],_r.prototype,"saturation",1),(0,o.c)([o.f],_r.prototype,"contrast",1),(0,o.c)([o.f],_r.prototype,"gamma",1),(0,o.c)([o.f],_r.prototype,"clarity",1),(0,o.c)([o.f],_r.prototype,"exposure",1),(0,o.c)([o.f],_r.prototype,"shadows",1),(0,o.c)([o.f],_r.prototype,"highlights",1),(0,o.c)([o.f],_r.prototype,"whites",1),(0,o.c)([o.f],_r.prototype,"blacks",1),(0,o.c)([o.f],_r.prototype,"temperature",1),(0,o.c)([o.f],_r.prototype,"sharpness",1),(0,o.c)([o.f],_r.prototype,"categories",1),(0,o.c)([o.f],_r.prototype,"items",1),(0,o.c)([o.f],_r.prototype,"config",1),(0,o.c)([o.f],_r.prototype,"locale",1);var Fr={identifier:"identity",intensity:1,isDuotone:!1},$r=new Or(0,1),Br=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t},this.changeIfDuotone=t=>{this.state.isDuotone=t},this.changeIntensity=t=>{const e=$r.clamp(t);this.state.intensity=e},this.reset=()=>{-1===this.indexInContainer&&(this.state.identifier=Fr.identifier,this.state.intensity=Fr.intensity,this.removeIndex())},this.setFilterEffect=({identifier:t,intensity:e,isDuotone:i})=>{const r=this.state,n=()=>{this.changeIdentifier(t),this.changeIntensity(e),this.changeIfDuotone(i)};this.removeFilterEffect();const s=this.engineMediator.orderHelper.addIndex(o.E.FILTER);return new Promise(i?(i,o)=>{this.engineMediator.engine.addDuoToneFilterFromAssets(t,this.engineMediator.image.container,s).then((t=>{n(),this.effect=t,this.effect.setProperties({colorIntensity:e}),i()})).catch((t=>{this.fallbackOnError(r),o(t)}))}:(i,o)=>{this.engineMediator.engine.addLUTFilterFromAssets(t,this.engineMediator.image.container,s).then((t=>{n(),this.effect=t,this.effect.setProperties({intensity:e}),i()})).catch((t=>{this.fallbackOnError(r),o(t)}))})},this.removeFilterEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),-1===this.indexInContainer&&(this.effect=void 0))},this.setEffectProperties=({intensity:t})=>this.effect?(this.state.isDuotone?this.effect.setProperties({colorIntensity:t}):this.effect.setProperties({intensity:t}),this.effect.getProperties()):null,this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(o.E.FILTER)},this.fallbackOnError=t=>{this.changeIdentifier(t.identifier),this.changeIntensity(t.intensity),"identity"===t.identifier&&this.removeIndex()},this.engineMediator=t,this.state=Fr}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};(0,o.c)([o.e],Br.prototype,"state",2),(0,o.c)([o.l],Br.prototype,"changeIdentifier",2),(0,o.c)([o.l],Br.prototype,"changeIfDuotone",2),(0,o.c)([o.l],Br.prototype,"changeIntensity",2),(0,o.c)([o.l],Br.prototype,"reset",2);var Hr="identity",Nr=class{constructor(t){this.selectFilter=async(t,e=1)=>{if(t!==this.identifier){const i=this.selectedCategory;await this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:this.isOptionDuoTone(t)}),this.selectedCategory===Hr&&(this.selectedCategory=i),this.editor.render(),this.addSnapshot(Cr.ADD,o.E.FILTER)}},this.changeIntensity=t=>{const e=this.isOptionDuoTone(this.identifier),i=this.filterStore.setEffectProperties({intensity:t});if(i){const t=e?i.colorIntensity:i.intensity;this.filterStore.changeIntensity(t),this.editor.render()}},this.setImageAndGetPreviews=async()=>{const{image:t}=this.editor.activeStore.state;await this.editor.previewThumbnails.addImageToContainer(t),await this.getAllFilterPreview()},this.getAllFilterPreview=async()=>{const t=this.entityManager.items.map((t=>({identifier:t.identifier,isDuotone:this.isOptionDuoTone(t.identifier)}))),e=await this.editor.previewThumbnails.getAllFilterPreviewThumbnails(t);await this.editor.wait();const{config:i}=this,o=this.editor.configStore.assetProvider.getAssets("filter").map((t=>({...t,items:t.items.map((t=>({...t,thumbnailURI:e[t.identifier]})))})));this.entityManager=new Dr(o,{...i,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})},this.toolSnapshot=()=>{this.addSnapshot(Cr.EDIT,this.locale.controls.sliderIntensity)},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.pureReset=()=>{this.selectedCategory=Hr,this.filterStore.removeFilterEffect(),this.filterStore.reset()},this.reset=()=>{this.pureReset(),this.addSnapshot(Cr.DELETE,this.locale.controls.buttonReset),this.editor.render()},this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?Hr:t},this.updateStateFromSerialization=({identifier:t,intensity:e})=>{const i=this.doesFilterAssetExist(t);if(i){const r=(0,o.Z)(i);return this.filterStore.setFilterEffect({identifier:t,intensity:e,isDuotone:r})}throw new o.Ya(t)},this.updateStateFromHistory=async t=>"identity"===t.identifier?(this.pureReset(),new Promise((t=>{t()}))):this.filterStore.setFilterEffect(t),this.doesFilterAssetExist=t=>this.entityManager.items.find((e=>t===e.identifier)),this.isOptionDuoTone=t=>{const e=this.doesFilterAssetExist(t);return!!e&&(0,o.Z)(e)},this.editor=t,this.selectedCategory=Hr,this.filterStore=new Br(this.editor.engineMediator);const{config:e}=this,i=this.editor.configStore.assetProvider.getAssets("filter");this.entityManager=new Dr(i,{...e,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("filter")})}get state(){return this.filterStore.state}get identifier(){return this.state.identifier}get intensity(){return this.state.intensity}get isDuotone(){return this.state.isDuotone}get selectedCategoryIdentifier(){return this.selectedCategory}get isOptionSelected(){return"identity"!==this.identifier}get config(){return this.editor.configStore.config[o.E.FILTER]}get locale(){return this.editor.configStore.locale[o.E.FILTER]}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}};(0,o.c)([o.e],Nr.prototype,"selectedCategory",2),(0,o.c)([o.e],Nr.prototype,"entityManager",2),(0,o.c)([o.l],Nr.prototype,"selectFilter",2),(0,o.c)([o.l],Nr.prototype,"changeIntensity",2),(0,o.c)([o.l],Nr.prototype,"pureReset",2),(0,o.c)([o.l],Nr.prototype,"reset",2),(0,o.c)([o.l],Nr.prototype,"toggleCategorySelection",2),(0,o.c)([o.l],Nr.prototype,"updateStateFromSerialization",2),(0,o.c)([o.l],Nr.prototype,"updateStateFromHistory",2),(0,o.c)([o.f],Nr.prototype,"state",1),(0,o.c)([o.f],Nr.prototype,"identifier",1),(0,o.c)([o.f],Nr.prototype,"intensity",1),(0,o.c)([o.f],Nr.prototype,"isDuotone",1),(0,o.c)([o.f],Nr.prototype,"selectedCategoryIdentifier",1),(0,o.c)([o.f],Nr.prototype,"isOptionSelected",1),(0,o.c)([o.f],Nr.prototype,"config",1),(0,o.c)([o.f],Nr.prototype,"locale",1),(0,o.c)([o.f],Nr.prototype,"categories",1),(0,o.c)([o.f],Nr.prototype,"items",1);var Wr=(t,e=0,i=3)=>{const o=Math.tan(e),r=Math.sqrt(o**2+1);return{x:t.x+i/r,y:t.y+i*o/r}},Vr={blurRadius:40,gradientSize:.2},Ur={identifier:"identity",linear:{start:{x:0,y:0},end:{x:0,y:0},...Vr},radial:{center:{x:0,y:0},radius:0,...Vr},mirrored:{origin:{x:0,y:0},rotation:0,size:0,...Vr},gaussian:Vr},Zr=class{constructor(t){this.selectFocus=(t,e)=>{(0,o.m)((()=>{this.state.identifier=t,e&&(this.state[t].blurRadius=e)}))},this.changeBlurRadius=(t,e)=>{"identity"!==t&&(this.state[t].blurRadius=e)},this.reset=()=>{-1===this.indexInContainer&&(this.state.identifier=Ur.identifier,"identity"!==this.state.identifier&&(this.state[this.state.identifier].blurRadius=Ur[this.state.identifier].blurRadius))},this.setLinear=({start:t,end:e})=>{this.state.linear.start.x=t.x,this.state.linear.start.y=t.y,this.state.linear.end.x=e.x,this.state.linear.end.y=e.y},this.setLinearStart=t=>{this.state.linear.start.x=t.x,this.state.linear.start.y=t.y},this.setLinearEnd=t=>{this.state.linear.end.x=t.x,this.state.linear.end.y=t.y},this.setRadialCenter=t=>{this.state.radial.center.x=t.x,this.state.radial.center.y=t.y},this.setRadialRadius=t=>{this.state.radial.radius=t},this.setMirroredOrigin=t=>{this.state.mirrored.origin.x=t.x,this.state.mirrored.origin.y=t.y},this.setMirroredRotation=t=>{this.state.mirrored.rotation=t},this.setMirroredSize=t=>{this.state.mirrored.size=t},this.getEffectProperties=()=>this.effect?this.effect.getProperties():null,this.setLinearFocus=t=>{this.effect=this.engineMediator.engine.addLinearBlur(t,this.imageContainer,this.order),this.updateLinearState(this.effect.getProperties())},this.setGaussianFocus=t=>{this.effect=this.engineMediator.engine.addGaussianBlur(t,this.imageContainer,this.order),this.updateGaussianState(this.effect.getProperties())},this.setRadialFocus=t=>{this.effect=this.engineMediator.engine.addRadialBlur(t,this.imageContainer,this.order),this.updateRadialState(this.effect.getProperties())},this.setMirroredFocus=t=>{this.effect=this.engineMediator.engine.addMirroredBlur(t,this.imageContainer,this.order),this.updateMirroredState(this.effect.getProperties())},this.updateFromEngineState=t=>{const e=this.getEffectProperties();if(e&&"identity"!==t)switch(t){case o.ea.LINEAR:this.updateLinearState(e);break;case o.ea.RADIAL:this.updateRadialState(e);break;case o.ea.MIRRORED:this.updateMirroredState(e)}},this.updateGaussianState=t=>{this.changeBlurRadius(o.ea.GAUSSIAN,t.blurRadius)},this.updateMirroredState=t=>{const e=this.editor.worldToPreview(t.mirrorAxisOrigin),i=new o.Pa(this.editor.worldToPreview(t.mirrorAxisDirection)).subtract(e),r=Math.atan2(i.y,i.x);this.setMirroredOrigin(this.editor.worldToPreview(t.mirrorAxisOrigin)),this.setMirroredRotation(r),this.setMirroredSize(this.editor.worldToPreview(t.clearAreaWidth)),this.changeBlurRadius(o.ea.MIRRORED,t.blurRadius)},this.updateRadialState=t=>{this.setRadialCenter(this.editor.worldToPreview(t.center)),this.setRadialRadius(this.editor.worldToPreview(t.radius)),this.changeBlurRadius(o.ea.RADIAL,t.blurRadius)},this.updateLinearState=t=>{this.setLinearStart(this.editor.worldToPreview(t.start)),this.setLinearEnd(this.editor.worldToPreview(t.end)),this.changeBlurRadius(o.ea.LINEAR,t.blurRadius)},this.setEffectProperties=t=>this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null,this.removeFocus=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.engineMediator.orderHelper.removeIndex(o.E.FOCUS))},this.editor=t,this.engineMediator=this.editor.engineMediator,this.state=Ur}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}get order(){return this.engineMediator.orderHelper.addIndex(o.E.FOCUS)}get imageContainer(){return this.engineMediator.image.container}};(0,o.c)([o.e],Zr.prototype,"state",2),(0,o.c)([o.l],Zr.prototype,"selectFocus",2),(0,o.c)([o.l],Zr.prototype,"changeBlurRadius",2),(0,o.c)([o.l],Zr.prototype,"reset",2),(0,o.c)([o.l],Zr.prototype,"setLinear",2),(0,o.c)([o.l],Zr.prototype,"setLinearStart",2),(0,o.c)([o.l],Zr.prototype,"setLinearEnd",2),(0,o.c)([o.l],Zr.prototype,"setRadialCenter",2),(0,o.c)([o.l],Zr.prototype,"setRadialRadius",2),(0,o.c)([o.l],Zr.prototype,"setMirroredOrigin",2),(0,o.c)([o.l],Zr.prototype,"setMirroredRotation",2),(0,o.c)([o.l],Zr.prototype,"setMirroredSize",2),(0,o.c)([o.l],Zr.prototype,"updateFromEngineState",2);var Gr=class{constructor(t){this.selectFocus=t=>{if(t!==this.identifier){this.focusStore.removeFocus();const e=.2*this.maxIntensity,{width:i}=this.editor.engine.getOutputContainer().getBounds(),r=.2*this.editor.shortestOutputSide;switch(t){case o.ea.LINEAR:const t=this.editor.outputToWorld({x:-i/2,y:0}),n=this.editor.outputToWorld({x:i/2,y:0});this.setLinearFocus({start:t,end:n,blurRadius:e});break;case o.ea.RADIAL:const s=this.editor.outputToWorld({x:0,y:0});this.setRadialFocus({center:s,radius:r,blurRadius:e});break;case o.ea.MIRRORED:const a=this.editor.outputToWorld({x:0,y:0}),l=r,c=this.editor.outputToWorld(Wr({x:0,y:0},0));this.setMirroredFocus({mirrorAxisOrigin:a,clearAreaWidth:l,blurRadius:e,mirrorAxisDirection:c});break;case o.ea.GAUSSIAN:this.setGaussianFocus({blurRadius:e})}this.focusStore.selectFocus(t,e),this.editor.render(),this.addSnapshot(Cr.ADD,o.E.FOCUS)}},this.changeIntensity=t=>{const e=this.focusStore.setEffectProperties({blurRadius:t});e&&(this.focusStore.changeBlurRadius(this.identifier,e.blurRadius),this.editor.render())},this.changeRelativeIntensity=t=>{const e=(this.maxIntensity-Gr.minIntensity)*t/100+Gr.minIntensity,i=this.focusStore.setEffectProperties({blurRadius:e});i&&(this.focusStore.changeBlurRadius(this.identifier,i.blurRadius),this.editor.render())},this.toolSnapshot=t=>{this.addSnapshot(Cr.EDIT,t)},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.clickableCanvas=t=>{this.editor.clickableCanvas(t)},this.pureReset=()=>{this.focusStore.removeFocus(),this.focusStore.reset()},this.reset=()=>{this.pureReset(),this.editor.render(),this.addSnapshot(Cr.DELETE,this.locale.controls.buttonReset)},this.setStart=t=>{const e=this.focusStore.setEffectProperties({start:this.editor.previewToWorld(t)});e&&(this.focusStore.setLinearStart(this.editor.worldToPreview(e.start)),this.editor.render())},this.setEnd=t=>{const e=this.focusStore.setEffectProperties({end:this.editor.previewToWorld(t)});e&&(this.focusStore.setLinearEnd(this.editor.worldToPreview(e.end)),this.editor.render())},this.setCenter=t=>{const e=this.focusStore.setEffectProperties({center:this.editor.previewToWorld(t)});e&&(this.focusStore.setRadialCenter(this.editor.worldToPreview(e.center)),this.editor.render())},this.setRadius=t=>{const e=this.focusStore.setEffectProperties({radius:this.editor.previewToWorld(t)});e&&(this.focusStore.setRadialRadius(this.editor.worldToPreview(e.radius)),this.editor.render())},this.setOrigin=t=>{const e=this.focusStore.setEffectProperties({mirrorAxisOrigin:this.editor.previewToWorld(t),mirrorAxisDirection:this.editor.previewToWorld(Wr(t,this.rotation))});e&&(this.focusStore.setMirroredOrigin(this.editor.worldToPreview(e.mirrorAxisOrigin)),this.editor.render())},this.setSize=t=>{const e=this.focusStore.setEffectProperties({clearAreaWidth:this.editor.previewToWorld(t)});e&&(this.focusStore.setMirroredSize(this.editor.worldToPreview(e.clearAreaWidth)),this.editor.render())},this.setRotation=t=>{this.focusStore.setEffectProperties({mirrorAxisDirection:this.editor.previewToWorld(Wr(this.origin,t))}),this.focusStore.setMirroredRotation(t),this.editor.render()},this.updateStateFromHistory=(t,e)=>{this.focusStore.removeFocus();const{magnitude:i}=e;(0,o.m)((()=>{switch(this.focusStore.selectFocus(t.identifier),t.identifier){case o.ea.LINEAR:this.setLinearFocus({start:this.editor.previewToWorld(new o.Pa(t.linear.start).multiply(e)),end:this.editor.previewToWorld(new o.Pa(t.linear.end).multiply(e)),blurRadius:t.linear.blurRadius});break;case o.ea.GAUSSIAN:this.setGaussianFocus({blurRadius:t.gaussian.blurRadius});break;case o.ea.RADIAL:this.setRadialFocus({center:this.editor.previewToWorld(new o.Pa(t.radial.center).multiply(e)),radius:this.editor.previewToWorld(t.radial.radius*i),blurRadius:t.radial.blurRadius});break;case o.ea.MIRRORED:{const r=new o.Pa(t.mirrored.origin).multiply(e);this.setMirroredFocus({mirrorAxisOrigin:this.editor.previewToWorld(r),mirrorAxisDirection:this.editor.previewToWorld(Wr(r,t.mirrored.rotation)),clearAreaWidth:this.editor.previewToWorld(t.mirrored.size*i),blurRadius:t.mirrored.blurRadius});break}case"identity":this.pureReset()}}))},this.updateStateFromSerialization=async t=>{if(!Gr.doesFocusIdentifierExist(t.identifier))throw new o.Ya(t.identifier);this.focusStore.removeFocus(),(0,o.m)((()=>{switch(this.focusStore.selectFocus(t.identifier),t.identifier){case o.ea.LINEAR:this.setLinearFocus(t.linear);break;case o.ea.GAUSSIAN:this.setGaussianFocus(t.gaussian);break;case o.ea.RADIAL:this.setRadialFocus(t.radial);break;case o.ea.MIRRORED:this.setMirroredFocus({mirrorAxisOrigin:t.mirrored.origin,clearAreaWidth:t.mirrored.size,blurRadius:t.mirrored.blurRadius,mirrorAxisDirection:Wr(t.mirrored.origin,t.mirrored.rotation)})}}))},this.updateCanvasControls=()=>{this.focusStore.updateFromEngineState(this.identifier)},this.getFocusStateForHistory=()=>{const t=this.editor.canvasStore.sizeVector,{linear:e}=this.focusStore.state,{radial:i}=this.focusStore.state,{mirrored:r}=this.focusStore.state,n=t,{magnitude:s}=n;return{...this.focusStore.state,linear:{...e,start:new o.Pa(e.start).divide(n),end:new o.Pa(e.end).divide(n)},radial:{...i,center:new o.Pa(i.center).divide(n),radius:i.radius/s},mirrored:{...r,origin:new o.Pa(r.origin).divide(n),size:r.size/s},gaussian:{...this.focusStore.state.gaussian}}},this.editor=t,this.focusStore=new Zr(this.editor);const e=this.editor.assetProvider.getAssets("focus");this.entityManager=new Dr(e,{...this.config,flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("focus")})}static get minIntensity(){return 0}static doesFocusIdentifierExist(t){return-1!==Object.keys(o.ea).map((t=>o.ea[t])).findIndex((e=>e===t))}get state(){return this.focusStore.state}get serializableState(){switch(this.identifier){case o.ea.LINEAR:return{identifier:this.identifier,linear:this.focusStore.getEffectProperties()};case o.ea.RADIAL:return{identifier:this.identifier,radial:this.focusStore.getEffectProperties()};case o.ea.MIRRORED:const t=this.focusStore.getEffectProperties();return{identifier:this.identifier,mirrored:{blurRadius:t.blurRadius,origin:t.mirrorAxisOrigin,rotation:(0,o.p)(this.state.mirrored.rotation),size:t.clearAreaWidth}};case o.ea.GAUSSIAN:return{identifier:this.identifier,gaussian:this.focusStore.getEffectProperties()};default:return Ur}}get start(){return this.focusStore.state.linear.start}get startOnPreview(){const t=this.editor.applyFlipToPreview(this.focusStore.state.linear.start);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get end(){return this.focusStore.state.linear.end}get endOnPreview(){const t=this.editor.applyFlipToPreview(this.focusStore.state.linear.end);return{x:Math.abs(t.x),y:Math.abs(t.y)}}get center(){return this.focusStore.state.radial.center}get radius(){return this.focusStore.state.radial.radius}get origin(){return this.focusStore.state.mirrored.origin}get rotation(){return this.focusStore.state.mirrored.rotation}get rotationOnPreview(){const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();return(0,o.sb)({rotation:this.focusStore.state.mirrored.rotation,flipHorizontally:t,flipVertically:e})}get size(){return this.focusStore.state.mirrored.size}get mirroredAreaWidth(){const{width:t,height:e}=this.editor.canvasStore.canvasSize;return 2*Math.sqrt(t**2+e**2)}get identifier(){return this.state.identifier}get intensity(){return"identity"===this.identifier?Ur.gaussian.blurRadius:this.state[this.identifier].blurRadius}get relativeIntensity(){const{blurRadius:t}="identity"===this.identifier?this.state.gaussian:this.state[this.identifier];return 100*(t-Gr.minIntensity)/(this.maxIntensity-Gr.minIntensity)}get maxIntensity(){return this.editor.shortestOutputSide/10}get isOptionSelected(){return"identity"!==this.identifier}get config(){return this.editor.configStore.config[o.E.FOCUS]}get locale(){return this.editor.configStore.locale[o.E.FOCUS]}get items(){return this.entityManager.items}setGaussianFocus({blurRadius:t}){this.focusStore.setGaussianFocus({blurRadius:t})}setLinearFocus({start:t,end:e,blurRadius:i}){this.focusStore.setLinearFocus({start:t,end:e,blurRadius:i})}setRadialFocus({center:t,radius:e,blurRadius:i}){this.focusStore.setRadialFocus({center:t,radius:e,blurRadius:i})}setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:i,mirrorAxisDirection:o}){this.focusStore.setMirroredFocus({mirrorAxisOrigin:t,clearAreaWidth:e,blurRadius:i,mirrorAxisDirection:o})}},jr=Gr;(0,o.c)([o.l],jr.prototype,"selectFocus",2),(0,o.c)([o.l],jr.prototype,"changeIntensity",2),(0,o.c)([o.l],jr.prototype,"changeRelativeIntensity",2),(0,o.c)([o.l],jr.prototype,"clickableCanvas",2),(0,o.c)([o.l],jr.prototype,"pureReset",2),(0,o.c)([o.l],jr.prototype,"reset",2),(0,o.c)([o.l],jr.prototype,"setStart",2),(0,o.c)([o.l],jr.prototype,"setEnd",2),(0,o.c)([o.l],jr.prototype,"setCenter",2),(0,o.c)([o.l],jr.prototype,"setRadius",2),(0,o.c)([o.l],jr.prototype,"setOrigin",2),(0,o.c)([o.l],jr.prototype,"setSize",2),(0,o.c)([o.l],jr.prototype,"setRotation",2),(0,o.c)([o.l],jr.prototype,"updateStateFromHistory",2),(0,o.c)([o.l],jr.prototype,"updateStateFromSerialization",2),(0,o.c)([o.l],jr.prototype,"updateCanvasControls",2),(0,o.c)([o.f],jr.prototype,"state",1),(0,o.c)([o.f],jr.prototype,"start",1),(0,o.c)([o.f],jr.prototype,"startOnPreview",1),(0,o.c)([o.f],jr.prototype,"end",1),(0,o.c)([o.f],jr.prototype,"endOnPreview",1),(0,o.c)([o.f],jr.prototype,"center",1),(0,o.c)([o.f],jr.prototype,"radius",1),(0,o.c)([o.f],jr.prototype,"origin",1),(0,o.c)([o.f],jr.prototype,"rotation",1),(0,o.c)([o.f],jr.prototype,"rotationOnPreview",1),(0,o.c)([o.f],jr.prototype,"size",1),(0,o.c)([o.f],jr.prototype,"mirroredAreaWidth",1),(0,o.c)([o.f],jr.prototype,"identifier",1),(0,o.c)([o.f],jr.prototype,"intensity",1),(0,o.c)([o.f],jr.prototype,"relativeIntensity",1),(0,o.c)([o.f],jr.prototype,"maxIntensity",1),(0,o.c)([o.f],jr.prototype,"isOptionSelected",1),(0,o.c)([o.f],jr.prototype,"config",1),(0,o.c)([o.f],jr.prototype,"locale",1),(0,o.c)([o.f],jr.prototype,"items",1);var Yr={identifier:"identity",opacity:1,blendMode:o.qa.LIGHTEN},Xr=new Or(0,1),Kr=class{constructor(t,e){this.changeIdentifier=t=>{this.state.identifier=t},this.changeOpacity=t=>{const e=Xr.clamp(t);this.state.opacity=e},this.changeBlendMode=t=>{this.state.blendMode=t},this.reset=()=>{-1===this.indexInContainer&&(this.state.identifier=Yr.identifier,this.state.opacity=Yr.opacity,this.state.blendMode=Yr.blendMode,this.removeIndex())},this.correctOverlayFlip=()=>{const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();this.effect&&(this.effect.setFlipHorizontally(t),this.effect.setFlipVertically(e))},this.removeOverlayEffect=()=>{this.effect&&(this.engineMediator.engine.removeEffect(this.effect),this.removeIndex(),this.effect=void 0)},this.setEffectProperties=t=>this.effect?(this.effect.setProperties(t),this.effect.getProperties()):null,this.setOverlayEffect=({identifier:t,blendMode:e,opacity:i})=>{const r={...this.state};this.removeOverlayEffect();const n=this.engineMediator.orderHelper.addIndex(o.E.OVERLAY);return new Promise(((o,s)=>{this.engineMediator.engine.addOverlayFromAssets(t,this.engineMediator.image.container,n).then((r=>{this.changeIdentifier(t),this.changeOpacity(i),this.changeBlendMode(e),this.effect=r,this.effect.setProperties({blendMode:e,opacity:i}),this.correctOverlayFlip(),o()})).catch((t=>{this.changeIdentifier(r.identifier),this.changeOpacity(r.opacity),this.changeBlendMode(r.blendMode),"identity"===r.identifier&&this.removeIndex(),s(t)}))}))},this.removeIndex=()=>{this.engineMediator.orderHelper.removeIndex(o.E.OVERLAY)},this.engineMediator=t,this.editor=e,this.state=Yr}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};(0,o.c)([o.e],Kr.prototype,"state",2),(0,o.c)([o.l],Kr.prototype,"changeIdentifier",2),(0,o.c)([o.l],Kr.prototype,"changeOpacity",2),(0,o.c)([o.l],Kr.prototype,"changeBlendMode",2),(0,o.c)([o.l],Kr.prototype,"reset",2),(0,o.c)([o.l],Kr.prototype,"correctOverlayFlip",2);var Jr=class{constructor(t){this.selectOverlay=async t=>{if(t!==this.identifier){const e=this.defaultBlendModeForIdentifier(t);await this.overlayStore.setOverlayEffect({identifier:t,opacity:1,blendMode:e}),this.addSnapshot(Cr.ADD,o.E.OVERLAY),this.editor.render()}},this.changeOpacity=t=>{const e=this.overlayStore.setEffectProperties({opacity:t});e&&(this.overlayStore.changeOpacity(e.opacity),this.editor.render())},this.toolSnapshot=()=>{this.addSnapshot(Cr.EDIT,this.locale.controls.sliderOpacity)},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.changeBlendMode=t=>{const e=this.overlayStore.setEffectProperties({blendMode:t});e&&(this.overlayStore.changeBlendMode(e.blendMode),this.addSnapshot(Cr.EDIT,this.locale.controls.carouselBlendMode),this.editor.render())},this.pureReset=()=>{this.overlayStore.removeOverlayEffect(),this.overlayStore.reset()},this.reset=()=>{this.pureReset(),this.addSnapshot(Cr.DELETE,this.locale.controls.buttonReset),this.editor.render()},this.updateStateFromSerialization=async t=>{const e=this.entityManager.items.find((e=>e.identifier===t.identifier));if(e)return this.overlayStore.setOverlayEffect(t).then((()=>{this.editor.transformToolStore.setOverlayOpacity(t.opacity)}));throw new o.Ya(t.identifier)},this.updateStateFromHistory=async t=>"identity"===t.identifier?(this.pureReset(),new Promise((t=>{t()}))):this.overlayStore.setOverlayEffect(t),this.correctOverlayFlip=()=>{this.overlayStore.correctOverlayFlip()},this.defaultBlendModeForIdentifier=t=>{const e=this.entityManager.items.findIndex((e=>e.identifier===t));return-1!==e?this.entityManager.items[e].defaultBlendMode:o.qa.LIGHTEN},this.editor=t,this.overlayStore=new Kr(this.editor.engineMediator,t);const e=this.editor.assetProvider.getAssets("overlay"),{config:i}=this;this.entityManager=new Dr(e,{...i,flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("overlay")})}get state(){return this.overlayStore.state}get identifier(){return this.overlayStore.state.identifier}get opacity(){return this.overlayStore.state.opacity}get blendMode(){return this.overlayStore.state.blendMode}get isOptionSelected(){return"identity"!==this.identifier}get config(){return this.editor.configStore.config[o.E.OVERLAY]}get locale(){return this.editor.configStore.locale[o.E.OVERLAY]}get items(){return this.entityManager.items}get allBlendModes(){const t=this.locale.controls;return Object.keys(o.qa).map((e=>{const i=o.qa[e],r=`blendMode${i.charAt(0).toUpperCase()}${i.slice(1)}`;return{identifier:i,value:t[r]}}))}};(0,o.c)([o.l],Jr.prototype,"selectOverlay",2),(0,o.c)([o.l],Jr.prototype,"changeOpacity",2),(0,o.c)([o.l],Jr.prototype,"changeBlendMode",2),(0,o.c)([o.l],Jr.prototype,"pureReset",2),(0,o.c)([o.l],Jr.prototype,"reset",2),(0,o.c)([o.l],Jr.prototype,"updateStateFromSerialization",2),(0,o.c)([o.l],Jr.prototype,"updateStateFromHistory",2),(0,o.c)([o.l],Jr.prototype,"correctOverlayFlip",2),(0,o.c)([o.f],Jr.prototype,"state",1),(0,o.c)([o.f],Jr.prototype,"identifier",1),(0,o.c)([o.f],Jr.prototype,"opacity",1),(0,o.c)([o.f],Jr.prototype,"blendMode",1),(0,o.c)([o.f],Jr.prototype,"isOptionSelected",1),(0,o.c)([o.f],Jr.prototype,"config",1),(0,o.c)([o.f],Jr.prototype,"locale",1),(0,o.c)([o.f],Jr.prototype,"items",1),(0,o.c)([o.f],Jr.prototype,"allBlendModes",1);var qr={identifier:"identity",opacity:1,tintColor:Pr.white,tintMode:"none",resizeMode:"keepAspect"},Qr={},tn=()=>Object.keys(Pr).map((t=>{const e=Pr[t];return{identifier:t,color:e,colorString:Mr(e)}}));function en(t,e=null){return new Promise(((i,r)=>{const n=new Image;n.addEventListener("load",(()=>{const t=document.createElement("canvas"),r=t.getContext("2d");t.width=n.width,t.height=n.height,e&&(t.width=e,t.height=e*n.height/n.width),r.drawImage(n,0,0,t.width,t.height);const s=t.toDataURL(o.P.PNG);(0,o.r)(t),i(s)})),n.addEventListener("error",(()=>{r()})),n.src=t}))}var on=t=>new Promise(((e,i)=>{const r=new FileReader;r.onload=async r=>{try{const{result:i}=r.target,n=await en(i,150);e({stickerURI:i,thumbnailURI:n,name:t.name||"",type:t.type,identifier:(0,o.Na)()})}catch(n){i(n)}},r.onerror=t=>{i(t)},r.readAsDataURL(t)})),rn="identity",nn="imgly_sticker_custom",sn=class{constructor(t){this.state=o.e.map(Qr),this.customStickers=[],this.colorList=tn(),this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},this.doesStickerAssetExist=t=>-1!==this.entityManager.items.findIndex((e=>e.identifier===t)),this.add=t=>{const e=this.entityManager.items.find((e=>e.identifier===t)),i=e?e.tintMode:qr.tintMode,o=e?e.resizeMode:qr.resizeMode;this.editor.spriteStore.addSticker({state:{identifier:t,tintMode:i,tintColor:qr.tintColor,opacity:qr.opacity,resizeMode:o}})},this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id),e=this.editor.spriteStore.getDuplicateContainerFlip(this.id),{flipHorizontally:i,flipVertically:r}=this.editor.outputContainer.getData();this.editor.spriteStore.addSticker({state:{identifier:this.identifier,tintColor:(0,o.p)(this.tintColor),tintMode:this.tintMode,resizeMode:this.resizeMode,opacity:this.opacity,flipHorizontally:i!==e.flipHorizontally,flipVertically:r!==e.flipVertically},transform:t})}},this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)},this.flipHorizontally=()=>{this.id&&this.editor.spriteStore.flipHorizontally(this.id)},this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}},this.updateStateFromHistory=(t,e)=>{(0,o.Va.default)(e,this.state.get(t))||(this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e))},this.setState=(t,e)=>{const i=this.state.get(t);i?("opacity"in e&&(i.opacity=e.opacity),e.tintColor&&(i.tintColor=e.tintColor),e.tintMode&&(i.tintMode=e.tintMode),e.resizeMode&&(i.resizeMode=e.resizeMode),this.state.set(t,i)):this.state.set(t,{identifier:e.identifier,opacity:e.opacity,tintMode:e.tintMode,resizeMode:e.resizeMode,tintColor:e.tintColor?e.tintColor:qr.tintColor})},this.changeOpacity=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{opacity:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.opacity=i.opacity,this.state.set(this.id,e)}}},this.changeTintColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){const{tintMode:i}=this.entityManager.items.find((t=>t.identifier===this.identifier));this.editor.spriteStore.setContainerProperties(this.id,{tintColor:t,tintMode:i});const o=this.editor.spriteStore.getContainerProperties(this.id);e.tintColor=o.tintColor,e.tintMode=o.tintMode||qr.tintMode,this.state.set(this.id,e)}}},this.tintColorSnapshot=()=>{this.addSnapshot(Cr.EDIT,this.locale.history.color)},this.addFiles=async t=>{if(this.editor.modalStore.showInfoModal("loading"),t.length){let i=0;const o=[];for(i=0;i<t.length;i+=1)o.push(on(t[i]));try{const e=await Promise.all(o);this.addCustomStickerAsset(e),this.editor.configStore.events.onStickerUploadedAdd(e.map((({identifier:e,stickerURI:i},o)=>({identifier:e,stickerURI:i,file:t[o]}))))}catch(e){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}}},this.addCustomStickerAsset=async t=>{const e=[];t.forEach((({stickerURI:t,thumbnailURI:i,name:o,identifier:r,type:n})=>{e.push({stickerURI:t,thumbnailURI:i,name:o,tintMode:this.customStickerTintMode,resizeMode:this.customStickerResizeMode,identifier:r}),this.customStickers.push({identifier:r,type:n,stickerURI:t,name:o})}));const i=this.locale.categories[nn];this.editor.assetProvider.addCustomStickerAsset(e,nn,i);const o=this.editor.assetProvider.getAssets("sticker"),{config:r}=this;this.entityManager=new Dr(o,{...r,itemFallbackKey:"stickerURI",locale:this.locale.items,getAssetPath:this.editor.getAssetPath("sticker")}),this.selectedCategory=nn,this.editor.modalStore.hideModal()},this.toolSnapshot=()=>{this.addSnapshot(Cr.EDIT,this.locale.history.opacity)},this.addSnapshot=(t,e)=>{const i=this.editor.historyStore.getCurrentSpritesState();(null==i?void 0:i.sticker)&&(0,o.Va.default)(i.sticker,(0,o.p)(this.state))||this.currentSticker&&this.editor.spriteStore.addSnapshot(t,e)},this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory===t?rn:t},this.pureReset=()=>{this.state=o.e.map(Qr)},this.editor=t,this.selectedCategory=rn;const{config:e}=this,i=this.editor.assetProvider.getAssets("sticker");this.entityManager=new Dr(i,{...e,itemFallbackKey:"stickerURI",locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("sticker")}),qr.tintColor=(0,o.p)((0,o.Ua)(this.config,"defaultTintColor",qr.tintColor)),this.config.colors&&this.config.colors.length>0&&(this.colorList=zr((0,o.p)(this.config.colors)))}get isStickerSelected(){return this.editor.spriteStore.isSpriteSticker}get isCustomStickerEnabled(){return this.config.enableCustomUpload}get customStickerTintMode(){return this.config.customStickerTintMode}get customStickerResizeMode(){return this.config.customStickerResizeMode}get currentSticker(){if(this.isStickerSelected){const t=this.state.get(this.id);if(t)return t}}get identifier(){if(this.isStickerSelected){const t=this.state.get(this.id);if(t)return t.identifier}return"none"}get id(){if(this.isStickerSelected)return this.editor.spriteStore.id}get opacity(){return this.currentSticker?this.currentSticker.opacity:qr.opacity}get tintMode(){return this.currentSticker?this.currentSticker.tintMode:qr.tintMode}get resizeMode(){return this.currentSticker?this.currentSticker.resizeMode:qr.resizeMode}get tintable(){return!!this.currentSticker&&("solid"===this.currentSticker.tintMode||"colorized"===this.currentSticker.tintMode)}get tintColor(){return this.currentSticker?this.currentSticker.tintColor:qr.tintColor}get config(){return this.editor.configStore.config[o.E.STICKER]}get locale(){return this.editor.configStore.locale[o.E.STICKER]}get localeColor(){return this.editor.configStore.locale.common.color}get selectedCategoryIdentifier(){return this.selectedCategory}get items(){return this.entityManager.items}get categories(){return this.entityManager.categories}};(0,o.c)([o.e],sn.prototype,"selectedCategory",2),(0,o.c)([o.e],sn.prototype,"entityManager",2),(0,o.c)([o.l],sn.prototype,"selectLast",2),(0,o.c)([o.l],sn.prototype,"add",2),(0,o.c)([o.l],sn.prototype,"duplicate",2),(0,o.c)([o.l],sn.prototype,"bringToFront",2),(0,o.c)([o.l],sn.prototype,"flipHorizontally",2),(0,o.c)([o.l],sn.prototype,"delete",2),(0,o.c)([o.l],sn.prototype,"updateStateFromHistory",2),(0,o.c)([o.l],sn.prototype,"setState",2),(0,o.c)([o.l],sn.prototype,"changeOpacity",2),(0,o.c)([o.l],sn.prototype,"changeTintColor",2),(0,o.c)([o.l],sn.prototype,"addFiles",2),(0,o.c)([o.l],sn.prototype,"addCustomStickerAsset",2),(0,o.c)([o.l],sn.prototype,"toggleCategorySelection",2),(0,o.c)([o.l],sn.prototype,"pureReset",2),(0,o.c)([o.f],sn.prototype,"isStickerSelected",1),(0,o.c)([o.f],sn.prototype,"isCustomStickerEnabled",1),(0,o.c)([o.f],sn.prototype,"customStickerTintMode",1),(0,o.c)([o.f],sn.prototype,"customStickerResizeMode",1),(0,o.c)([o.f],sn.prototype,"currentSticker",1),(0,o.c)([o.f],sn.prototype,"identifier",1),(0,o.c)([o.f],sn.prototype,"id",1),(0,o.c)([o.f],sn.prototype,"opacity",1),(0,o.c)([o.f],sn.prototype,"tintMode",1),(0,o.c)([o.f],sn.prototype,"resizeMode",1),(0,o.c)([o.f],sn.prototype,"tintable",1),(0,o.c)([o.f],sn.prototype,"tintColor",1),(0,o.c)([o.f],sn.prototype,"config",1),(0,o.c)([o.f],sn.prototype,"locale",1),(0,o.c)([o.f],sn.prototype,"localeColor",1),(0,o.c)([o.f],sn.prototype,"selectedCategoryIdentifier",1),(0,o.c)([o.f],sn.prototype,"items",1),(0,o.c)([o.f],sn.prototype,"categories",1);var an={text:"Write Something",identifier:"imgly_font_open_sans_bold",fontSize:73.3,defaultFontSize:73.3,fontFamily:"Open Sans",fontStyle:"",fontWeight:"bold",lineHeight:1,alignment:"center",textColor:Pr.white,backgroundColor:Pr.transparent||[0,0,0,0],width:0},ln={},cn={100:"Extra Light",200:"Light",300:"Book",400:"Regular",500:"Medium",600:"SemiBold",700:"Bold",800:"Black",900:"Extra Black",bold:"Bold",normal:"Regular",lighter:"Lighter"},hn=class{constructor(t){this.state=o.e.map(ln),this.colorList=tn(),this.backgroundColorList=Object.keys(Ir).map((t=>{const e=Ir[t];return{identifier:t,color:e,colorString:Mr(e)}})),this.fontsLoadStatus=o.e.object({pending:!1,loaded:!1}),this.doesTextAssetExist=t=>-1!==this.editor.assetProvider.getFontAssets().findIndex((e=>e.identifier===t)),this.validFontWithConfig=t=>this.fonts.find((e=>e.identifier===t))||this.fonts[0],this.addOrselect=()=>{this.state.size?(this.selectLast(),this.loadFonts()):this.add()},this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},this.add=async()=>{const{fontsLoadStatus:t}=this,e=()=>{this.editor.spriteStore.addText({state:{identifier:an.identifier,text:an.text,textColor:an.textColor,backgroundColor:an.backgroundColor,lineHeight:an.lineHeight,alignment:an.alignment,fontSize:0}})};if(t.pending||t.loaded)e();else{this.fontsLoadStatus.pending=!0;const t=this.editor.assetProvider.getFontManager();try{await t.loadFontsWithIdentifiers([an.identifier]),e()}catch(i){this.editor.modalStore.showActionModal({type:o.H.ERROR,identifier:"fontLoading",error:an.identifier})}await this.loadFonts()}},this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addText({state:{identifier:this.identifier,text:this.text,textColor:(0,o.p)(this.textColor),lineHeight:this.lineHeight,alignment:this.alignment,fontSize:this.fontSize,backgroundColor:(0,o.p)(this.backgroundColor),width:this.width},transform:t})}},this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)},this.delete=()=>{if(this.id){const t=this.id;this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast()}},this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)},this.changeFont=t=>{const e=this.fonts.find((e=>e.identifier===t));this.changeIdentifier(e,this.id),this.id&&this.addSnapshot(Cr.EDIT,this.locale.history.fontFamily)},this.changeIdentifier=(t,e)=>{(0,o.m)((()=>{if(t&&e){const i=this.state.get(e);if(i){this.editor.spriteStore.setContainerProperties(e,{fontIdentifier:t.identifier},!0);const o=this.editor.spriteStore.getContainerProperties(e);i.identifier=o.fontIdentifier,i.fontFamily=t.fontFamily,i.fontStyle=t.fontStyle,i.fontWeight=t.fontWeight,i.fontSize=o.fontSize,i.width=o.width,i.defaultFontSize=i.fontSize,this.state.set(e,i)}}}))},this.changeFontSize=(t,e=!1)=>{if(this.id){const i=this.state.get(this.id);i&&(i.fontSize=t,e&&(i.defaultFontSize=t),this.state.set(this.id,i))}},this.updateDefaultFontSize=()=>{if(this.id){const t=this.state.get(this.id);t&&(t.defaultFontSize=t.fontSize,this.state.set(this.id,t))}},this.changeSize=(t,e)=>{const i=this.state.get(t);i&&(i.width=e.width,i.fontSize=e.fontSize,i.defaultFontSize=e.fontSize,this.state.set(t,i))},this.changeWidth=t=>{if(this.id){const e=this.state.get(this.id);e&&(e.width=t,this.state.set(this.id,e))}},this.changeText=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},!0);let i=this.editor.spriteStore.getContainerProperties(this.id);const o=this.editor.outputContainer.getSizeInOutputSpace(),r=this.editor.spriteStore.getSize(this.id);this.config.disableAutoScaling||r.height>o.height&&this.editor.spriteStore.setContainerProperties(this.id,{fontSize:this.calculateFitFontSize(this.id,o.height)},!0),i=this.editor.spriteStore.getContainerProperties(this.id),e.text=i.text,e.fontSize=i.fontSize,e.defaultFontSize=i.fontSize,this.state.set(this.id,e),this.addSnapshot(Cr.EDIT,this.locale.history.edit)}}},this.calculateFitFontSize=(t,e)=>{if(!hn.measureContext){const t=document.createElement("canvas");hn.measureContext=t.getContext("2d")}const i=this.editor.spriteStore.getContainerProperties(t),r=this.editor.engine.assetProvider.getFontManager().getFontWithId(i.fontIdentifier),n=this.config.minFontSizeForAutoScaling,s=(0,o.tb)(hn.measureContext,i.text,r,i.fontSize,i.lineHeight,i.width,r.textMetrics),a=Math.min(Math.floor(i.fontSize*(e/s.height)),1),l=Math.round(i.fontSize);let c=0,h=l-a,d=Math.floor(2*(l-a)),p=h;for(;c<=d;){h=c+Math.floor((d-c)/2);const t=(0,o.tb)(hn.measureContext,i.text,r,h,i.lineHeight,i.width,r.textMetrics);if(e<t.height)d=h-1,p=h-1;else{if(!(e>t.height)){p=h;break}if(c=h+1,a+h>=l)return l}}return n&&p<n?n:p},this.changeLineHeight=t=>{if(this.id){const e=this.state.get(this.id);if(e&&t){this.editor.spriteStore.setContainerProperties(this.id,{lineHeight:t},!0);const i=this.editor.spriteStore.getContainerProperties(this.id);e.lineHeight=i.lineHeight,this.state.set(this.id,e)}}},this.changeColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{textColor:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.textColor=i.textColor,this.state.set(this.id,e)}}},this.changeBackgroundColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{backgroundColor:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.backgroundColor=i.backgroundColor,this.state.set(this.id,e)}}},this.colorSnapshot=()=>{this.addSnapshot(Cr.EDIT,this.locale.history.textColor)},this.backgroundColorSnapshot=()=>{this.addSnapshot(Cr.EDIT,this.locale.history.backgroundColor)},this.changeAlignment=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{alignment:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.alignment=i.alignment,this.state.set(this.id,e),this.addSnapshot(Cr.EDIT,this.locale.history.alignment)}}},this.toolSnapshot=()=>{this.addSnapshot(Cr.EDIT,this.locale.history.lineSpacing)},this.addSnapshot=(t,e)=>{const i=this.editor.historyStore.getCurrentSpritesState();(null==i?void 0:i.text)&&(0,o.Va.default)(i.text,(0,o.p)(this.state))||this.currentText&&this.editor.spriteStore.addSnapshot(t,e)},this.updateStateFromHistory=(t,e)=>{(0,o.Va.default)(e,this.state.get(t))||(this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e))},this.setState=(t,e)=>{const i=this.state.get(t);if(i)e.alignment&&(i.alignment=e.alignment),e.text&&(i.text=e.text),e.lineHeight&&(i.lineHeight=e.lineHeight),e.textColor&&(i.textColor=e.textColor),e.backgroundColor&&(i.backgroundColor=e.backgroundColor),e.fontIdentifier&&(i.identifier=e.fontIdentifier),e.fontSize&&(i.fontSize=e.fontSize,i.defaultFontSize=e.fontSize),e.width&&(i.width=e.width);else{const i=this.validFontWithConfig(e.fontIdentifier);i&&this.state.set(t,{text:e.text,identifier:i.identifier,alignment:e.alignment,textColor:e.textColor?e.textColor:an.textColor,backgroundColor:e.backgroundColor?e.backgroundColor:an.backgroundColor,fontFamily:i.fontFamily,fontStyle:i.fontStyle,fontSize:e.fontSize,fontWeight:i.fontWeight,lineHeight:e.lineHeight,width:e.width,defaultFontSize:e.fontSize})}},this.setFontSize=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{fontSize:t},!0);const i=this.editor.spriteStore.getContainerProperties(this.id);e.fontSize=i.fontSize,e.defaultFontSize=i.fontSize,this.state.set(this.id,e)}}},this.pureReset=()=>{this.state=o.e.map(ln)},this.editor=t,this.fonts.find((t=>t.identifier===an.identifier))||(an.identifier=this.fonts[0].identifier),an.textColor=(0,o.p)((0,o.Ua)(this.config,"defaultColor",an.textColor)),an.backgroundColor=(0,o.p)((0,o.Ua)(this.config,"defaultBackgroundColor",an.backgroundColor)),an.text=this.locale.canvasControls.placeholderText,this.config.colors&&this.config.colors.length>0&&(this.colorList=zr((0,o.p)(this.config.colors))),this.config.backgroundColors&&this.config.backgroundColors.length>0&&(this.backgroundColorList=zr((0,o.p)(this.config.backgroundColors)))}static defaultText(){return an.text}static getDisplayFontStyle(t){const e=t.fontWeight&&"regular"!==cn[t.fontWeight].toLowerCase()?cn[t.fontWeight]:"",i=t.fontStyle&&"normal"!==t.fontStyle.toLowerCase()?t.fontStyle:"";return`${t.fontFamily.toLowerCase().includes(e.toLowerCase())?"":e} ${i}`.trim()}async loadFonts(){const{fontsLoadStatus:t}=this;if(t.loaded)return;const e=this.editor.assetProvider.getFontManager(),i=this.editor.assetProvider.getFontAssetsForText().map((t=>t.identifier));try{await e.loadFontsWithIdentifiers(i)}catch(r){const t=i.filter((t=>!e.isFontLoaded(t))).join(", ");this.editor.modalStore.showActionModal({type:o.H.ERROR,identifier:"fontLoading",error:t})}t.loaded=!0}get isEditMode(){return this.editor.spriteStore.isEditMode}get isTextSelected(){return this.editor.spriteStore.isSpriteText}get fontsLoaded(){return this.fontsLoadStatus.loaded}get currentText(){if(this.isTextSelected){const t=this.state.get(this.id);if(t)return t}}get text(){return this.currentText?this.currentText.text:an.text}get fontSize(){return this.currentText?this.currentText.fontSize:an.fontSize}get defaultFontSize(){return this.currentText?this.currentText.defaultFontSize:an.defaultFontSize}get width(){return this.currentText?this.currentText.width:an.width}get fontFamily(){return this.currentText?this.currentText.fontFamily:an.fontFamily}get fontStyle(){return this.currentText?this.currentText.fontStyle:an.fontStyle}get fontWeight(){return this.currentText?this.currentText.fontWeight:an.fontWeight}get lineHeight(){return this.currentText?this.currentText.lineHeight:an.lineHeight}get identifier(){return this.currentText?this.currentText.identifier:an.identifier}get id(){if(this.isTextSelected)return this.editor.spriteStore.id}get alignment(){return this.currentText?this.currentText.alignment:an.alignment}get textColor(){return this.currentText?this.currentText.textColor:an.textColor}get backgroundColor(){return this.currentText?this.currentText.backgroundColor:an.backgroundColor}get config(){return this.editor.configStore.config[o.E.TEXT]}get locale(){return this.editor.configStore.locale[o.E.TEXT]}get localeColor(){return this.editor.configStore.locale.common.color}get rawOptions(){return this.editor.assetProvider.getFontAssetsForText()}get fonts(){return this.rawOptions.reduce(((t,e)=>this.rawOptions.find((t=>t.identifier===e.identifier))?[...t,{identifier:e.identifier,fontFamily:e.fontFamily,fontStyle:e.fontStyle||"",fontWeight:e.fontWeight||""}]:t),[])}get fontFamilies(){return[...new Set(this.fonts)]}},dn=hn;(0,o.c)([o.l],dn.prototype,"addOrselect",2),(0,o.c)([o.l],dn.prototype,"selectLast",2),(0,o.c)([o.l],dn.prototype,"add",2),(0,o.c)([o.l],dn.prototype,"duplicate",2),(0,o.c)([o.l],dn.prototype,"bringToFront",2),(0,o.c)([o.l],dn.prototype,"delete",2),(0,o.c)([o.l],dn.prototype,"setEditMode",2),(0,o.c)([o.l],dn.prototype,"changeFont",2),(0,o.c)([o.l],dn.prototype,"changeIdentifier",2),(0,o.c)([o.l],dn.prototype,"changeFontSize",2),(0,o.c)([o.l],dn.prototype,"updateDefaultFontSize",2),(0,o.c)([o.l],dn.prototype,"changeSize",2),(0,o.c)([o.l],dn.prototype,"changeWidth",2),(0,o.c)([o.l],dn.prototype,"changeText",2),(0,o.c)([o.l],dn.prototype,"changeLineHeight",2),(0,o.c)([o.l],dn.prototype,"changeColor",2),(0,o.c)([o.l],dn.prototype,"changeBackgroundColor",2),(0,o.c)([o.l],dn.prototype,"changeAlignment",2),(0,o.c)([o.l],dn.prototype,"updateStateFromHistory",2),(0,o.c)([o.l],dn.prototype,"setState",2),(0,o.c)([o.l],dn.prototype,"setFontSize",2),(0,o.c)([o.l],dn.prototype,"pureReset",2),(0,o.c)([o.f],dn.prototype,"isEditMode",1),(0,o.c)([o.f],dn.prototype,"isTextSelected",1),(0,o.c)([o.f],dn.prototype,"fontsLoaded",1),(0,o.c)([o.f],dn.prototype,"currentText",1),(0,o.c)([o.f],dn.prototype,"text",1),(0,o.c)([o.f],dn.prototype,"fontSize",1),(0,o.c)([o.f],dn.prototype,"defaultFontSize",1),(0,o.c)([o.f],dn.prototype,"width",1),(0,o.c)([o.f],dn.prototype,"fontFamily",1),(0,o.c)([o.f],dn.prototype,"fontStyle",1),(0,o.c)([o.f],dn.prototype,"fontWeight",1),(0,o.c)([o.f],dn.prototype,"lineHeight",1),(0,o.c)([o.f],dn.prototype,"identifier",1),(0,o.c)([o.f],dn.prototype,"id",1),(0,o.c)([o.f],dn.prototype,"alignment",1),(0,o.c)([o.f],dn.prototype,"textColor",1),(0,o.c)([o.f],dn.prototype,"backgroundColor",1),(0,o.c)([o.f],dn.prototype,"config",1),(0,o.c)([o.f],dn.prototype,"locale",1),(0,o.c)([o.f],dn.prototype,"localeColor",1),(0,o.c)([o.f],dn.prototype,"rawOptions",1),(0,o.c)([o.f],dn.prototype,"fonts",1),(0,o.c)([o.f],dn.prototype,"fontFamilies",1);var pn={identifier:"imgly_text_design_blocks",color:Pr.white,isInverted:!1,text:"Write Something With Style",seed:0,padding:0,width:0},un={imgly_text_design_blocks:835,imgly_text_design_rotated:6,imgly_text_design_blocks_light:3,imgly_text_design_equal_width:727,imgly_text_design_masked:259,imgly_text_design_celebrate:579,imgly_text_design_sunshine:77,imgly_text_design_masked_badge:683,imgly_text_design_blocks_condensed:673,imgly_text_design_celebrate_simple:425,imgly_text_design_equal_width_fat:961,imgly_text_design_watercolor:671,imgly_text_design_particles:683,imgly_text_design_masked_speech_bubble:317,imgly_text_design_masked_speech_bubble_comic:229,imgly_text_design_multiline:831},gn={},mn=class{constructor(t){this.state=o.e.map(gn),this.colorList=tn(),this.fontsLoaded=!1,this.doesTextDesignAssetExist=t=>-1!==this.entityManager.items.findIndex((e=>e.identifier===t)),this.addOrselect=async()=>{await this.loadFonts(),this.state.size?this.selectLast():this.add()},this.selectLast=()=>{this.editor.spriteStore.selectHighestOrderSprite(Array.from(this.state.keys()))},this.add=()=>{this.editor.spriteStore.addTextDesign({state:{identifier:pn.identifier,text:pn.text,color:pn.color,isInverted:pn.isInverted,seed:un[pn.identifier]||pn.seed,padding:0}})},this.updateStateFromHistory=(t,e)=>{if((0,o.Va.default)(e,this.state.get(t)))return;const i=this.state.get(t);e.identifier===i.identifier?(this.setState(t,e),this.editor.spriteStore.setContainerProperties(t,e)):this.changeIdentifier(e.identifier,!1,e.seed,t)},this.setState=(t,e)=>{const i=this.state.get(t);i?(e.inverted&&(i.isInverted=e.inverted),e.seed&&(i.seed=e.seed),e.color&&(i.color=e.color),e.padding&&(i.padding=e.padding),e.width&&(i.width=e.width)):this.state.set(t,{width:e.width,text:e.text,isInverted:e.inverted,identifier:e.identifier,seed:e.seed,color:e.color?e.color:pn.color,padding:e.padding})},this.changeText=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{text:t},!0);const i=this.editor.spriteStore.getContainerProperties(this.id);e.text=i.text,this.state.set(this.id,e),this.addSnapshot(Cr.EDIT,this.locale.history.edit)}}},this.setEditMode=t=>{this.editor.spriteStore.setEditMode(t)},this.duplicate=()=>{if(this.id){const t=this.editor.spriteStore.getDuplicateContainerTransform(this.id);this.editor.spriteStore.addTextDesign({state:{identifier:this.identifier,text:this.text,color:(0,o.p)(this.color),isInverted:this.isInverted,seed:this.seed,padding:this.padding,width:this.width},transform:t})}},this.bringToFront=()=>{this.id&&this.editor.spriteStore.bringToFront(this.id)},this.addSnapshot=(t,e)=>{const i=this.editor.historyStore.getCurrentSpritesState();(null==i?void 0:i.textdesign)&&(0,o.Va.default)(i.textdesign,(0,o.p)(this.state))||this.currentTextDesign&&this.editor.spriteStore.addSnapshot(t,e)},this.delete=(t=this.id)=>{t&&(this.editor.spriteStore.removeSprite(t),this.state.delete(t),this.selectLast())},this.changeSeed=()=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{seed:-1},!0);const e=this.editor.spriteStore.getContainerProperties(this.id);t.seed=e.seed,this.state.set(this.id,t),this.addSnapshot(Cr.EDIT,this.locale.history.shuffle)}}},this.changeIdentifier=(t,e=!0,i=null,r=this.id)=>{if(r&&t!==this.identifier){const n=this.state.get(r),s=this.editor.spriteStore.getContainerTransform(r);this.editor.spriteStore.addTextDesign({spriteId:r,state:{identifier:t,text:n.text,color:(0,o.p)(n.color),isInverted:n.isInverted,seed:i||un[t]||n.seed,padding:n.padding,width:n.width},transform:s},e,!0)}},this.changeColor=t=>{if(this.id){const e=this.state.get(this.id);if(e){this.editor.spriteStore.setContainerProperties(this.id,{color:t});const i=this.editor.spriteStore.getContainerProperties(this.id);e.color=i.color,this.state.set(this.id,e)}}},this.colorSnapshot=()=>{this.addSnapshot(Cr.EDIT,this.locale.history.color)},this.invertBackground=()=>{if(this.id){const t=this.state.get(this.id);if(t){this.editor.spriteStore.setContainerProperties(this.id,{inverted:!t.isInverted},!0);const e=this.editor.spriteStore.getContainerProperties(this.id);t.isInverted=e.inverted,this.state.set(this.id,t),this.addSnapshot(Cr.EDIT,this.locale.history.invert)}}},this.changeWidth=t=>{if(this.id){const e=this.state.get(this.id);e&&(e.width=t,this.state.set(this.id,e))}},this.changePadding=t=>{if(this.id){const e=this.state.get(this.id);e&&(e.padding=t,this.state.set(this.id,e))}},this.pureReset=()=>{this.state=o.e.map(gn)},this.editor=t;const e=this.editor.assetProvider.getAssets("textdesign");this.entityManager=new Dr(e,{...this.config,flattenCategories:!0,locale:{},getAssetPath:this.editor.getAssetPath("textdesign")}),this.entityManager.items.find((t=>t.identifier===pn.identifier))||(pn.identifier=this.entityManager.items[0].identifier),pn.text=this.locale.canvasControls.placeholderText,pn.color=(0,o.p)((0,o.Ua)(this.config,"defaultColor",pn.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=zr((0,o.p)(this.config.colors)))}static defaultText(){return pn.text}async loadFonts(){if(this.fontsLoaded)return;const t=this.editor.assetProvider.getFontManager(),e=this.editor.assetProvider.getFontAssetsForTextDesign().map((t=>t.identifier));try{await t.loadFontsWithIdentifiers(e)}catch(Er){const r=e.filter((e=>!t.isFontLoaded(e))).join(", ");this.editor.modalStore.showActionModal({type:o.H.ERROR,identifier:"fontLoading",error:r})}this.fontsLoaded=!0}get isTextDesignSelected(){return this.editor.spriteStore.isSpriteTextDesign}get isEditMode(){return this.editor.spriteStore.isEditMode}get currentTextDesign(){if(this.isTextDesignSelected&&this.id){const t=this.state.get(this.id);if(t)return t}}get id(){if(this.isTextDesignSelected)return this.editor.spriteStore.id}get text(){return this.currentTextDesign?this.currentTextDesign.text:pn.text}get seed(){return this.currentTextDesign?this.currentTextDesign.seed:pn.seed}get padding(){return this.currentTextDesign?this.currentTextDesign.padding:pn.padding}get width(){return this.currentTextDesign?this.currentTextDesign.width:pn.width}get identifier(){return this.currentTextDesign?this.currentTextDesign.identifier:null}get isInverted(){return this.currentTextDesign?this.currentTextDesign.isInverted:pn.isInverted}get color(){return this.currentTextDesign?this.currentTextDesign.color:pn.color}get config(){return this.editor.configStore.config[o.E.TEXT_DESIGN]}get locale(){return this.editor.configStore.locale[o.E.TEXT_DESIGN]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}};(0,o.c)([o.l],mn.prototype,"addOrselect",2),(0,o.c)([o.l],mn.prototype,"selectLast",2),(0,o.c)([o.l],mn.prototype,"add",2),(0,o.c)([o.l],mn.prototype,"updateStateFromHistory",2),(0,o.c)([o.l],mn.prototype,"setState",2),(0,o.c)([o.l],mn.prototype,"changeText",2),(0,o.c)([o.l],mn.prototype,"setEditMode",2),(0,o.c)([o.l],mn.prototype,"duplicate",2),(0,o.c)([o.l],mn.prototype,"bringToFront",2),(0,o.c)([o.l],mn.prototype,"delete",2),(0,o.c)([o.l],mn.prototype,"changeSeed",2),(0,o.c)([o.l],mn.prototype,"changeIdentifier",2),(0,o.c)([o.l],mn.prototype,"changeColor",2),(0,o.c)([o.l],mn.prototype,"invertBackground",2),(0,o.c)([o.l],mn.prototype,"changeWidth",2),(0,o.c)([o.l],mn.prototype,"changePadding",2),(0,o.c)([o.l],mn.prototype,"pureReset",2),(0,o.c)([o.f],mn.prototype,"isTextDesignSelected",1),(0,o.c)([o.f],mn.prototype,"isEditMode",1),(0,o.c)([o.f],mn.prototype,"currentTextDesign",1),(0,o.c)([o.f],mn.prototype,"id",1),(0,o.c)([o.f],mn.prototype,"text",1),(0,o.c)([o.f],mn.prototype,"seed",1),(0,o.c)([o.f],mn.prototype,"padding",1),(0,o.c)([o.f],mn.prototype,"width",1),(0,o.c)([o.f],mn.prototype,"identifier",1),(0,o.c)([o.f],mn.prototype,"isInverted",1),(0,o.c)([o.f],mn.prototype,"color",1),(0,o.c)([o.f],mn.prototype,"config",1),(0,o.c)([o.f],mn.prototype,"locale",1),(0,o.c)([o.f],mn.prototype,"localeColor",1),(0,o.c)([o.f],mn.prototype,"items",1);var fn={identifier:"identity",opacity:1,width:0,color:Pr.white},yn=new Or(0,1),bn=class{constructor(t){this.changeIdentifier=t=>{this.state.identifier=t},this.changeOpacity=t=>{const e=yn.clamp(t);this.state.opacity=e},this.changeWidth=t=>{this.state.width=t},this.changeColor=t=>{this.state.color=t},this.reset=()=>{-1===this.indexInContainer&&(this.state.identifier=fn.identifier,this.state.opacity=fn.opacity,this.state.width=fn.width,this.state.color=fn.color,this.removeIndex())},this.removeFrameEffect=()=>{this.effect&&(this.engine.removeEffect(this.effect),this.effect=void 0)},this.setEffectProperties=t=>this.effect?(this.removeIndex(),this.effect.setProperties(t),this.effect.getProperties()):null,this.setFrameEffect=({identifier:t,width:e,opacity:i,color:o})=>{const r={...this.state};return this.changeIdentifier(t),this.changeWidth(e),this.changeOpacity(i),this.changeColor(o),this.removeFrameEffect(),new Promise(((n,s)=>{this.engine.addFrameFromAssets(t,this.engineMediator.image.container).then((t=>{this.effect=t,this.effect.setProperties({tintColor:o,opacity:i,width:e}),n()})).catch((t=>{this.changeIdentifier(r.identifier),this.changeOpacity(r.opacity),this.changeWidth(r.width),this.changeColor(r.color),"identity"===r.identifier&&this.removeIndex(),s(t)}))}))},this.removeIndex=()=>{this.engineMediator.orderHelper.removeSprite(this.state.identifier)},this.engineMediator=t,this.state=fn}get engine(){return this.engineMediator.engine}get imageContainer(){return this.engineMediator.image.container}get indexInContainer(){return this.effect?this.effect.getIndexInParent():-1}};(0,o.c)([o.e],bn.prototype,"state",2),(0,o.c)([o.l],bn.prototype,"changeIdentifier",2),(0,o.c)([o.l],bn.prototype,"changeOpacity",2),(0,o.c)([o.l],bn.prototype,"changeWidth",2),(0,o.c)([o.l],bn.prototype,"changeColor",2),(0,o.c)([o.l],bn.prototype,"reset",2);var Sn=class{constructor(t){this.colorList=tn(),this.selectFrame=async t=>{if(t!==this.identifier){const e=.1*this.editor.shortestOutputSide;await this.frameStore.setFrameEffect({identifier:t,width:e,opacity:1,color:fn.color}),this.editor.render(),this.addSnapshot(Cr.ADD,o.E.FRAME)}},this.changeOpacity=t=>{const e=this.frameStore.setEffectProperties({opacity:t});e&&(this.frameStore.changeOpacity(e.opacity),this.editor.render())},this.changeWidth=t=>{const e=this.frameStore.setEffectProperties({width:t});e&&(this.frameStore.changeWidth(e.width),this.editor.render())},this.changeColor=t=>{const e=this.frameStore.setEffectProperties({tintColor:t});e&&(this.frameStore.changeColor(e.tintColor),this.editor.render())},this.colorSnapshot=()=>{this.addSnapshot(Cr.EDIT,this.locale.controls.selectColor)},this.toolSnapshot=t=>{this.addSnapshot(Cr.EDIT,t)},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.pureReset=()=>{this.frameStore.removeFrameEffect(),this.frameStore.reset()},this.reset=()=>{this.pureReset(),this.addSnapshot(Cr.DELETE,this.locale.controls.buttonReset),this.editor.render()},this.updateStateFromHistory=t=>"identity"===t.identifier?(this.pureReset(),new Promise((t=>{t()}))):this.frameStore.setFrameEffect(t),this.updateStateFromSerialization=async t=>{const e=this.entityManager.items.find((e=>e.identifier===t.identifier));return e?this.frameStore.setFrameEffect(t).then((()=>{this.editor.transformToolStore.setFrameOpacity(t.opacity)})):new Promise(((t,e)=>{e(new Error("Frame Asset doesn't exist"))}))},this.editor=t,this.frameStore=new bn(this.editor.engineMediator);const e=this.editor.assetProvider.getAssets("frame"),{config:i}=this;this.entityManager=new Dr(e,{...i,flattenCategories:!0,locale:this.locale.items,getAssetPath:this.editor.getAssetPath("frame")}),fn.color=(0,o.p)((0,o.Ua)(this.config,"defaultColor",fn.color)),this.config.colors&&this.config.colors.length>0&&(this.colorList=zr((0,o.p)(this.config.colors)))}get state(){return this.frameStore.state}get identifier(){return this.state.identifier}get color(){return this.state.color}get size(){return this.state.width}get tintable(){const t=this.entityManager.items.find((t=>t.identifier===this.identifier));return t&&t.tintable||!1}get opacity(){return this.state.opacity}get minSize(){return.05*this.editor.shortestOutputSide}get maxSize(){return.3*this.editor.shortestOutputSide}get config(){return this.editor.configStore.config[o.E.FRAME]}get locale(){return this.editor.configStore.locale[o.E.FRAME]}get localeColor(){return this.editor.configStore.locale.common.color}get items(){return this.entityManager.items}get isOptionSelected(){return"identity"!==this.identifier}};(0,o.c)([o.l],Sn.prototype,"selectFrame",2),(0,o.c)([o.l],Sn.prototype,"changeOpacity",2),(0,o.c)([o.l],Sn.prototype,"changeWidth",2),(0,o.c)([o.l],Sn.prototype,"changeColor",2),(0,o.c)([o.l],Sn.prototype,"pureReset",2),(0,o.c)([o.l],Sn.prototype,"reset",2),(0,o.c)([o.l],Sn.prototype,"updateStateFromHistory",2),(0,o.c)([o.l],Sn.prototype,"updateStateFromSerialization",2),(0,o.c)([o.f],Sn.prototype,"state",1),(0,o.c)([o.f],Sn.prototype,"identifier",1),(0,o.c)([o.f],Sn.prototype,"color",1),(0,o.c)([o.f],Sn.prototype,"size",1),(0,o.c)([o.f],Sn.prototype,"tintable",1),(0,o.c)([o.f],Sn.prototype,"opacity",1),(0,o.c)([o.f],Sn.prototype,"minSize",1),(0,o.c)([o.f],Sn.prototype,"maxSize",1),(0,o.c)([o.f],Sn.prototype,"config",1),(0,o.c)([o.f],Sn.prototype,"locale",1),(0,o.c)([o.f],Sn.prototype,"localeColor",1),(0,o.c)([o.f],Sn.prototype,"items",1),(0,o.c)([o.f],Sn.prototype,"isOptionSelected",1);var vn={size:0,color:Pr.white,hardness:0,maximumSize:.125,minimumSize:0,maximumHardness:1,minimumHardness:0},xn=class{constructor(t){this.strokes={strokes:[]},this.colorList=tn(),this.dirty=o.e.box(!1),this.id="",this.containerId=()=>this.id,this.initSize=()=>{const{minimumSize:t,maximumSize:e}=this.state,{size:i}=this;0===i&&this.changeSize((0,o.Ta)(this.config,"defaultSize",[t,e]))},this.changeColor=t=>{this.state.color=t},this.changeSize=t=>{this.state.size=t},this.changeRelativeSize=t=>{const{maximumSize:e,minimumSize:i}=this.state;this.state.size=(e-i)*t/100+i},this.changeHardness=t=>{this.state.hardness=t},this.reset=()=>{this.pureReset(),this.addSnapshot(Cr.DELETE,this.locale.controls.buttonReset),this.editor.render()},this.editor=t,this.state={...vn,hardness:(0,o.Ta)(this.config,"defaultHardness",[vn.minimumHardness,vn.maximumHardness]),color:(0,o.p)((0,o.Ua)(this.config,"defaultColor",vn.color))},this.config.colors&&this.config.colors.length>0&&(this.colorList=zr((0,o.p)(this.config.colors)))}addSnapshot(t,e){this.editor.addSnapshot(void 0,t,e)}clickableCanvas(t){this.editor.clickableCanvas(t)}beginStroke(t=[]){if(!this.drawingContainer){const e=this.editor.orderHelper.addSprite(o.E.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t},this.editor.imageContainer,e)}this.id=this.drawingContainer.getID(),this.drawingContainer.beginStroke({id:"imgly_brush_radial",color:(0,o.p)(this.state.color),size:this.state.size,hardness:this.state.hardness})}strokePosition(t){if(this.drawingContainer){const e=this.editor.previewToWorld(t,!1);this.drawingContainer.addPointToCurrentStroke(e),this.editor.render()}}endStroke(){this.drawingContainer&&(this.drawingContainer.endStroke(),this.editor.render(),this.strokes=this.drawingContainer.getData(),this.addSnapshot(Cr.EDIT,this.locale.history.brushStroke),this.dirty.set(!0))}updateStateFromHistory(t){if(!(0,o.Va.default)(t,this.strokes))if(!(0,o.Va.default)(t,{strokes:[]})&&t){if(this.drawingContainer){if(this.strokes&&this.strokes.strokes.length===t.strokes.length)return void this.dirty.set(!1);this.strokes=t,this.drawingContainer.setData(this.strokes)}else{const e=this.editor.orderHelper.addSprite(o.E.BRUSH);this.drawingContainer=this.editor.engine.addDrawing({strokes:t.strokes},this.editor.imageContainer,e),this.strokes=this.drawingContainer.getData()}this.dirty.set(0!==this.strokes.strokes.length),this.id=this.drawingContainer.getID()}else this.pureReset()}pureReset(){this.dirty.set(!1),this.strokes={strokes:[]},this.drawingContainer&&(this.editor.engine.removeContainer(this.drawingContainer),this.drawingContainer=void 0)}get config(){return this.editor.configStore.config[o.E.BRUSH]}get locale(){return this.editor.configStore.locale[o.E.BRUSH]}get localeColor(){return this.editor.configStore.locale.common.color}get color(){return this.state.color}get size(){return this.state.size}get relativeSize(){const{size:t,maximumSize:e,minimumSize:i}=this.state;return 100*(t-i)/(e-i)}get sizeOnScreenSpace(){const t=this.editor.engineMediator.engine.getSmallerOutputSide();return this.editor.worldToPreview(this.state.size*t)}get hardness(){return this.state.hardness}get isDirty(){return this.dirty.get()}};(0,o.c)([o.e],xn.prototype,"state",2),(0,o.c)([o.e],xn.prototype,"dirty",2),(0,o.c)([o.l],xn.prototype,"initSize",2),(0,o.c)([o.l],xn.prototype,"changeColor",2),(0,o.c)([o.l],xn.prototype,"changeSize",2),(0,o.c)([o.l],xn.prototype,"changeRelativeSize",2),(0,o.c)([o.l],xn.prototype,"changeHardness",2),(0,o.c)([o.l],xn.prototype,"clickableCanvas",1),(0,o.c)([o.l],xn.prototype,"beginStroke",1),(0,o.c)([o.l],xn.prototype,"strokePosition",1),(0,o.c)([o.l],xn.prototype,"endStroke",1),(0,o.c)([o.l],xn.prototype,"updateStateFromHistory",1),(0,o.c)([o.l],xn.prototype,"reset",2),(0,o.c)([o.f],xn.prototype,"config",1),(0,o.c)([o.f],xn.prototype,"locale",1),(0,o.c)([o.f],xn.prototype,"localeColor",1),(0,o.c)([o.f],xn.prototype,"color",1),(0,o.c)([o.f],xn.prototype,"size",1),(0,o.c)([o.f],xn.prototype,"relativeSize",1),(0,o.c)([o.f],xn.prototype,"sizeOnScreenSpace",1),(0,o.c)([o.f],xn.prototype,"hardness",1),(0,o.c)([o.f],xn.prototype,"isDirty",1);var wn={position:{x:0,y:0},size:{height:0,width:0},lockResolution:!1,forceDimensions:!1,ratio:"*"},Cn={identifier:"identity",outputRotation:0,rotationInDegrees:0,flipHorizontally:!1,flipVertically:!1,cropState:o.e.map({})},En=class extends o.Ka{constructor(){super(...arguments),this.prevDimensions={width:0,height:0}}onExport(t){this.emit(o.Ja.EXPORT,t)}onClose(){this.emit(o.Ja.CLOSE)}onUndo(){this.emit(o.Ja.HISTORY_UNDO)}onRedo(){this.emit(o.Ja.HISTORY_REDO)}onHistoryChange(){this.emit(o.Ja.HISTORY_CHANGE)}onEditorReady(){this.emit(o.Ja.EDITOR_READY)}onErrorImageLoading(t){this.emit(o.Ja.ERROR_IMAGE_LOADING,t)}onImageLoaded(){this.emit(o.Ja.IMAGE_LOAD)}onStickerUploadedAdd(t){this.emit(o.Ja.STICKER_UPLOAD_ADD,t)}onToolChanged(t){this.emit(o.Ja.TOOL_ENTER,t)}onErrorWebGLContextLost(){this.emit(o.Ja.ERROR_WEBGL_CONTEXT_LOST)}onCropDimensionsChanged(t){this.prevDimensions.width===t.width&&this.prevDimensions.height===t.height||(this.emit(o.Ja.CROP_DIMENSIONS_CHANGE,t),this.prevDimensions=t)}},kn=wr([br,{layout:"basic",defaultTool:null}]),Tn={common:{error:"Fehler",warning:"Warnung",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Farbe",sliderOpacity:"Farbe Transparenz"}}},mainCanvasActions:{buttonExport:"Bild Exportieren",buttonUndo:"R\xfcckg\xe4ngig machen",buttonRedo:"Wiederholen",buttonClose:"Schlie\xdfen"},infoModals:{exporting:{heading:"Exportieren...",body:"Einen Moment bitte..."},saving:{heading:"Speichere...",body:"Einen Moment bitte..."},loading:{heading:"Lade...",body:"Einen Moment bitte..."},resizing:{heading:"Bild wird bearbeitet...",body:"Einen Moment bitte..."},loadingFonts:{heading:"Lade Schriftarten...",body:"Einen Moment bitte..."},stickerLoading:{heading:"Lade Sticker...",body:"Einen Moment bitte..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Laden des Bildes fehlgeschlagen. Dies kann verschiedene Gr\xfcnde haben, beispielsweise kann die Datei defekt sein oder der Dateityp wird nicht unterst\xfctzt",buttonYes:"Neu Laden",buttonNo:"Schlie\xdfen"},rendering:{headingDelimiter:":",body:"Beim Rendern des Bildes ist ein Fehler aufgetreten",buttonYes:"Neu Laden",buttonNo:"Schlie\xdfen"},fontLoading:{headingDelimiter:":",heading:"Laden von Schriftarten ist fehlgeschlagen",body:"Die folgenden Schriftarten konnten nicht geladen werden: ${error}",buttonNo:"Schlie\xdfen"},webcamUnavailable:{headingDelimiter:":",body:"Webcam-Bild kann nicht dargestellt werden. (Fehler: ${error})",buttonYes:"Schlie\xdfen"},stickerLoading:{headingDelimiter:":",body:"Laden des Stickers fehlgeschlagen.",buttonNo:"Schlie\xdfen"},unexpectedError:{headingDelimiter:":",body:"Ein unerwarteter Fehler ist aufgetreten, ${error}",buttonYes:"Neu Laden",buttonNo:"Schlie\xdfen"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Bild verkleinert",body:"Ihr Bild \xfcbersteigt die maximale Gr\xf6sse von ${megapixels} megapixels und wurde auf ${width}x${height} Pixel verkleinert",buttonYes:"Weiter"},discardChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xc4nderungen verwerfen wollen?",buttonYes:"\xc4nderungen verwerfen",buttonNo:"\xc4nderungen beibehalten"},unsavedChanges:{headingDelimiter:":",body:"Sind Sie sicher, dass Sie die \xc4nderungen verwerfen wollen?",buttonYes:"Beenden ohne zu speichern",buttonNo:"Schlie\xdfen"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Ihre Daten wurden von einem veralteten Format geladen und k\xf6nnten anders aussehen",buttonYes:"\xc4nderungen anwenden",buttonNo:"Abbrechen"},unsupportedWebGLRenderer:{body:"Es wurde ein Problem im Browser festgestellt, welches zu langen Ladezeiten f\xfchren kann. Bitte probieren sie einen anderen Browser.",buttonYes:"Weiter"}},library:{title:"Bibliothek",controls:{buttonUpload:"Bild Hochladen",buttonWebcamOpen:"Webcam \xd6ffnen",buttonWebcamClose:"Webcam Schlie\xdfen",placeholderSearch:"Bibliothek durchsuchen",noResults:"Keine Ergebnisse"}},filter:{title:"Filter",controls:{buttonReset:"Zur\xfccksetzen",sliderIntensity:"Filter Intensit\xe4t"},categories:{[o.aa.DuoTone]:"DuoTone",[o.aa.BW]:"B & W",[o.aa.Vintage]:"Vintage",[o.aa.Smooth]:"Smooth",[o.aa.Cold]:"Cold",[o.aa.Warm]:"Warm",[o.aa.Legacy]:"Legacy"},items:{[o.$.Inferno]:"Inferno",[o.$.Chestnut]:"Chestnut",[o.$.Fixie]:"Fixie",[o.$.Fridge]:"Fridge",[o.$.Sunny70s]:"Sunny 70s",[o.$.FlatBlack]:"Flat Black",[o.$.Mellow]:"Mellow",[o.$.HardStuff]:"Hard Stuff",[o.$.Oldtimer]:"Oldtimer",[o.$.AD1920]:"1920 A.D.",[o.$.Ancient]:"Ancient",[o.$.Kalmen]:"Kalmen",[o.$.Joran]:"Joran",[o.$.Polaroid]:"Polaroid",[o.$.Zephyr]:"Zephyr",[o.$.Levante]:"Levante",[o.$.Greyed]:"Greyed",[o.$.Classic]:"Classic",[o.$.Colorful]:"Colorful",[o.$.Snappy]:"Snappy",[o.$.Candy]:"Candy",[o.$.Creamy]:"Creamy",[o.$.LowFire]:"Low Fire",[o.$.Colla]:"Colla",[o.$.Sunrise]:"Sunrise",[o.$.Moss]:"Moss",[o.$.Food]:"Food",[o.$.Glam]:"Glam",[o.$.Gobblin]:"Gobblin",[o.$.HighCarb]:"High Carb",[o.$.Hicon]:"Hicon",[o.$.K1]:"K1",[o.$.K6]:"K6",[o.$.Pebble]:"Pebble",[o.$.Keen]:"Keen",[o.$.Lemon]:"Lemon",[o.$.Litho]:"Litho",[o.$.Lomo]:"Lomo",[o.$.Lomo100]:"Lomo 100",[o.$.Lucid]:"Lucid",[o.$.Neat]:"Neat",[o.$.Pumpkin]:"Pumpkin",[o.$.Solanus]:"Solanus",[o.$.Pale]:"Pale",[o.$.Pitched]:"Pitched",[o.$.Weathered]:"Weathered",[o.$.GreenGap]:"Green Gap",[o.$.PolaSX]:"Pola SX",[o.$.Pro400]:"Pro 400",[o.$.Quozi]:"Quozi",[o.$.Sepia]:"Sepia",[o.$.Settled]:"Settled",[o.$.Seventies]:"Seventies",[o.$.Soft]:"Soft",[o.$.Steel]:"Steel",[o.$.Summer]:"Summer",[o.$.Golden]:"Golden",[o.$.Tender]:"Tender",[o.$.Twilight]:"Twilight",[o.$.Softy]:"Softy",[o.$.Dusty]:"Dusty",[o.$.Desert]:"Desert",[o.$.Peach]:"Peach",[o.$.Clash]:"Clash",[o.$.Plum]:"Plum",[o.$.Breezy]:"Breezy",[o.$.DeepBlue]:"Deep Blue",[o.$.Frog]:"Frog",[o.$.Sunset]:"Sunset"}},adjustment:{title:"Korrekturen",controls:{buttonReset:"Zur\xfccksetzen"},categories:{basics:"Grundlagen",refinements:"Feinheiten"},items:{brightness:"Helligkeit",saturation:"S\xe4ttigung",contrast:"Kontrast",gamma:"Gamma",sharpness:"Sch\xe4rfe",clarity:"Klarheit",exposure:"Belichtung",shadows:"Schatten",highlights:"Lichter",whites:"Wei\xdf",blacks:"Schwarz",temperature:"Temperatur"}},focus:{title:"Weichzeichnen",controls:{buttonReset:"Zur\xfccksetzen",sliderIntensity:"Focus Intensit\xe4t"},items:{radial:"Kreisf\xf6rmig",mirrored:"Gespiegelt",linear:"Linear",gaussian:"Gau\xdfsch"},history:{focusPosition:"Focus Position",focusSize:"Focus Gr\xf6\xdfe"}},overlay:{title:"Overlays",controls:{buttonReset:"Zur\xfccksetzen",sliderOpacity:"Overlay Transparenz",carouselBlendMode:"Overlay Mischmodus",blendModeNormal:"Normal",blendModeOverlay:"\xdcberblenden",blendModeHardLight:"Hartes Licht",blendModeSoftLight:"Weiches Licht",blendModeMultiply:"Multiplizieren",blendModeDarken:"Abdunkeln",blendModeLighten:"Aufhellen",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Transparenz",tabBlendMode:"Mischmodus"},items:{[o.ra.Bokeh]:"Bokeh",[o.ra.Chop]:"Chop",[o.ra.Clouds]:"Clouds",[o.ra.Golden]:"Golden",[o.ra.Grain]:"Grain",[o.ra.Hearts]:"Hearts",[o.ra.LightLeak1]:"Light Leak 1",[o.ra.LightLeak2]:"Light Leak 2",[o.ra.Metal]:"Metal",[o.ra.Mosaic]:"Mosaic",[o.ra.Painting]:"Painting",[o.ra.Paper]:"Paper",[o.ra.Rain]:"Rain",[o.ra.Vintage]:"Vintage",[o.ra.Wall1]:"Wall",[o.ra.Wall2]:"Wall 2",[o.ra.Wood]:"Wood"}},sticker:{title:"Sticker",controls:{buttonUpload:"Sticker Hochladen",sliderOpacity:"Sticker Transparenz",selectColor:"Stickerfarbe",tabColor:"Farbe",tabOpacity:"Transparenz"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"L\xf6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren",buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"Neuer Text",dropdownFontFamily:"Schriftart",textFontSize:"Schriftgr\xf6\xdfe",selectAlignment:"Ausrichtung",selectFontColor:"Schriftfarbe",selectBackgroundColor:"Hintergrundfarbe",sliderLineSpacing:"Zeilenabstand",tabColor:"Farbe",tabBgColor:"Hintergrund",tabAlignment:"Ausrichtung",tabLineHeight:"Zeilenh\xf6he",tabFontSize:"Schriftgr\xf6\xdfe"},canvasControls:{placeholderText:"Etwas aufschreiben",buttonSave:"Fertig",buttonClose:"Abbrechen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonDelete:"L\xf6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"Neues Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Textfarbe",tabColor:"Farbe",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Etwas aufschreiben mit Style",buttonSave:"Done",buttonClose:"Schlie\xdfen",inputText:"Texteingabe"},canvasActions:{buttonEdit:"Bearbeiten",buttonInvert:"Invertieren",buttonDelete:"L\xf6schen",buttonBringToFront:"In den Vordergrund",buttonDuplicate:"Duplizieren"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Rahmen",controls:{buttonReset:"Zur\xfccksetzen",sliderOpacity:"Rahmen Transparenz",sliderSize:"Rahmen Dicke",selectColor:"Rahmen Farbe",tabColor:"Farbe",tabOpacity:"Transparenz",tabSize:"Dicke"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Malen",controls:{buttonReset:"Zur\xfccksetzen",sliderSize:"Dicke",sliderHardness:"H\xe4rte",selectColor:"Farbe",tabSize:"Dicke",tabHardness:"H\xe4rte",tabColor:"Farbe"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Zuschneiden",controls:{buttonReset:"Zur\xfccksetzen",checkboxKeepResolution:"Fixiere Aufl\xf6sung",inputCropSize:"Bildgr\xf6\xdfe",inputHeight:"h",inputWidth:"b",tabFlipAndRotate:"Spiegeln & Drehen",tabResolution:"Aufl\xf6sung",tabCropSize:"Bildgr\xf6\xdfe"},categories:{imgly_transforms_common:"Standard",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Frei",imgly_transform_common_square:"Quadratisch",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Titel",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Horizontal spiegeln",buttonFlipVertical:"Vertikal spiegeln",buttonRotateClockwise:"Drehe im Uhrzeigersinn",buttonRotateAntiClockwise:"Drehe gegen Uhrzeigersinn"}},[o.E.CUSTOM]:{title:"Benutzerdefiniert"}},Mn={common:{error:"Error",warning:"Warning",color:{colorPicker:{hex:"Hex",r:"R",g:"G",b:"B",sliderHue:"Color",sliderOpacity:"Color Opacity"}}},mainCanvasActions:{buttonExport:"Export Image",buttonUndo:"Undo",buttonRedo:"Redo",buttonClose:"Close"},infoModals:{exporting:{heading:"Exporting...",body:"Just a few seconds..."},saving:{heading:"Saving...",body:"Just a few seconds..."},loading:{heading:"Loading...",body:"Just a few seconds..."},resizing:{heading:"Resizing...",body:"Just a few seconds..."},loadingFonts:{heading:"Loading Fonts...",body:"Just a few seconds..."},stickerLoading:{heading:"Loading Sticker...",body:"Just a few seconds..."}},errorModals:{imageLoading:{headingDelimiter:":",body:"Failed to load image. This can have multiple reasons, e.g. the file is corrupted or the file type is not supported",buttonYes:"Retry",buttonNo:"Close"},rendering:{headingDelimiter:":",body:"An error has occurred while rendering the image",buttonYes:"Retry",buttonNo:"Close"},fontLoading:{headingDelimiter:":",heading:"Failed to load font",body:"The following fonts could not be loaded: ${error}",buttonNo:"Close"},webcamUnavailable:{headingDelimiter:":",body:"Unable to display webcam image (Error: ${error})",buttonYes:"Close"},stickerLoading:{headingDelimiter:":",body:"Unable to load the sticker",buttonNo:"Close"},unexpectedError:{headingDelimiter:":",body:"An unexpected error has occured ${error}",buttonYes:"Retry",buttonNo:"Close"}},warningModals:{imageResized:{headingDelimiter:":",heading:"Image resized",body:"Your image exceeds the maximum size of ${megapixels} megapixels and has been resized to ${width}x${height} pixels",buttonYes:"Continue"},unsupportedSerializationVersion:{headingDelimiter:":",body:"Your data was restored from a legacy data format and might look different",buttonYes:"Apply changes",buttonNo:"Cancel"},discardChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to discard the changes?",buttonYes:"Discard changes",buttonNo:"Keep Changes"},unsavedChanges:{headingDelimiter:":",body:"You have unsaved changes. Are you sure you want to exit?",buttonYes:"Exit without saving",buttonNo:"Cancel"},unsupportedWebGLRenderer:{body:"A problem has been detected in the browser that could cause long loading times. Please try a different browser.",buttonYes:"Continue"}},library:{title:"Library",controls:{buttonUpload:"Upload Image",buttonWebcamOpen:"Open Webcam",buttonWebcamClose:"Close Webcam",placeholderSearch:"Search Library",noResults:"No Results"}},filter:{title:"Filters",controls:{buttonReset:"Remove Filter",sliderIntensity:"Filter Intensity"},categories:{[o.aa.DuoTone]:"DuoTone",[o.aa.BW]:"B & W",[o.aa.Vintage]:"Vintage",[o.aa.Smooth]:"Smooth",[o.aa.Cold]:"Cold",[o.aa.Warm]:"Warm",[o.aa.Legacy]:"Legacy"},items:{[o.$.Inferno]:"Inferno",[o.$.Chestnut]:"Chestnut",[o.$.Fixie]:"Fixie",[o.$.Fridge]:"Fridge",[o.$.Sunny70s]:"Sunny 70s",[o.$.FlatBlack]:"Flat Black",[o.$.Mellow]:"Mellow",[o.$.HardStuff]:"Hard Stuff",[o.$.Oldtimer]:"Oldtimer",[o.$.AD1920]:"1920 A.D.",[o.$.Ancient]:"Ancient",[o.$.Kalmen]:"Kalmen",[o.$.Joran]:"Joran",[o.$.Polaroid]:"Polaroid",[o.$.Zephyr]:"Zephyr",[o.$.Levante]:"Levante",[o.$.Greyed]:"Greyed",[o.$.Classic]:"Classic",[o.$.Colorful]:"Colorful",[o.$.Snappy]:"Snappy",[o.$.Candy]:"Candy",[o.$.Creamy]:"Creamy",[o.$.LowFire]:"Low Fire",[o.$.Colla]:"Colla",[o.$.Sunrise]:"Sunrise",[o.$.Moss]:"Moss",[o.$.Food]:"Food",[o.$.Glam]:"Glam",[o.$.Gobblin]:"Gobblin",[o.$.HighCarb]:"High Carb",[o.$.Hicon]:"Hicon",[o.$.K1]:"K1",[o.$.K6]:"K6",[o.$.Pebble]:"Pebble",[o.$.Keen]:"Keen",[o.$.Lemon]:"Lemon",[o.$.Litho]:"Litho",[o.$.Lomo]:"Lomo",[o.$.Lomo100]:"Lomo 100",[o.$.Lucid]:"Lucid",[o.$.Neat]:"Neat",[o.$.Pumpkin]:"Pumpkin",[o.$.Solanus]:"Solanus",[o.$.Pale]:"Pale",[o.$.Pitched]:"Pitched",[o.$.Weathered]:"Weathered",[o.$.GreenGap]:"Green Gap",[o.$.PolaSX]:"Pola SX",[o.$.Pro400]:"Pro 400",[o.$.Quozi]:"Quozi",[o.$.Sepia]:"Sepia",[o.$.Settled]:"Settled",[o.$.Seventies]:"Seventies",[o.$.Soft]:"Soft",[o.$.Steel]:"Steel",[o.$.Summer]:"Summer",[o.$.Golden]:"Golden",[o.$.Tender]:"Tender",[o.$.Twilight]:"Twilight",[o.$.Softy]:"Softy",[o.$.Dusty]:"Dusty",[o.$.Desert]:"Desert",[o.$.Peach]:"Peach",[o.$.Clash]:"Clash",[o.$.Plum]:"Plum",[o.$.Breezy]:"Breezy",[o.$.DeepBlue]:"Deep Blue",[o.$.Frog]:"Frog",[o.$.Sunset]:"Sunset"}},adjustment:{title:"Adjust",controls:{buttonReset:"Reset Adjustment"},categories:{basics:"Basic",refinements:"Refinements"},items:{brightness:"Brightness",saturation:"Saturation",contrast:"Contrast",gamma:"Gamma",sharpness:"Sharpness",clarity:"Clarity",exposure:"Exposure",shadows:"Shadows",highlights:"Highlights",whites:"Whites",blacks:"Blacks",temperature:"Temperature"}},focus:{title:"Focus",controls:{buttonReset:"Remove Focus",sliderIntensity:"Focus Intensity"},items:{radial:"Radial",mirrored:"Mirrored",linear:"Linear",gaussian:"Gaussian"},history:{focusPosition:"Focus Position",focusSize:"Focus Size"}},overlay:{title:"Overlays",controls:{buttonReset:"Remove Overlay",sliderOpacity:"Overlay Opacity",carouselBlendMode:"Overlay Blend mode",blendModeNormal:"Normal",blendModeOverlay:"Overlay",blendModeHardLight:"Hard Light",blendModeSoftLight:"Soft Light",blendModeMultiply:"Multiply",blendModeDarken:"Darken",blendModeLighten:"Lighten",blendModeScreen:"Screen",blendModeColorBurn:"Color Burn",tabOpacity:"Opacity",tabBlendMode:"Blend Mode"},items:{[o.ra.Bokeh]:"Bokeh",[o.ra.Chop]:"Chop",[o.ra.Clouds]:"Clouds",[o.ra.Golden]:"Golden",[o.ra.Grain]:"Grain",[o.ra.Hearts]:"Hearts",[o.ra.LightLeak1]:"Light Leak 1",[o.ra.LightLeak2]:"Light Leak 2",[o.ra.Metal]:"Metal",[o.ra.Mosaic]:"Mosaic",[o.ra.Painting]:"Painting",[o.ra.Paper]:"Paper",[o.ra.Rain]:"Rain",[o.ra.Vintage]:"Vintage",[o.ra.Wall1]:"Wall",[o.ra.Wall2]:"Wall 2",[o.ra.Wood]:"Wood"}},sticker:{title:"Stickers",controls:{buttonUpload:"Upload Sticker",sliderOpacity:"Sticker Opacity",selectColor:"Sticker Color",tabColor:"Color",tabOpacity:"Opacity"},categories:{imgly_sticker_emoticons:"Emoticons",imgly_sticker_shapes:"Shapes",imgly_sticker_custom:"Custom"},items:{imgly_sticker_emoticons_alien:"Alien",imgly_sticker_emoticons_angel:"Angel",imgly_sticker_emoticons_angry:"Angry",imgly_sticker_emoticons_anxious:"Anxious",imgly_sticker_emoticons_asleep:"Asleep",imgly_sticker_emoticons_attention:"Attention",imgly_sticker_emoticons_baby_chicken:"Baby Chicken",imgly_sticker_emoticons_batman:"Batman",imgly_sticker_emoticons_beer:"Beer",imgly_sticker_emoticons_black:"Black",imgly_sticker_emoticons_blue:"Blue",imgly_sticker_emoticons_blush:"Blush",imgly_sticker_emoticons_boxer:"Boxer",imgly_sticker_emoticons_business:"Business",imgly_sticker_emoticons_chicken:"Chicken",imgly_sticker_emoticons_cool:"Cool",imgly_sticker_emoticons_cry:"Cry",imgly_sticker_emoticons_deceased:"Deceased",imgly_sticker_emoticons_devil:"Devil",imgly_sticker_emoticons_duckface:"Duckface",imgly_sticker_emoticons_furious:"Furious",imgly_sticker_emoticons_grin:"Grin",imgly_sticker_emoticons_guitar:"Guitar",imgly_sticker_emoticons_harry_potter:"Harry Potter",imgly_sticker_emoticons_hippie:"Hippie",imgly_sticker_emoticons_hitman:"Hitman",imgly_sticker_emoticons_humourous:"Humourous",imgly_sticker_emoticons_idea:"Idea",imgly_sticker_emoticons_impatient:"Impatient",imgly_sticker_emoticons_kiss:"Kiss",imgly_sticker_emoticons_kisses:"Kisses",imgly_sticker_emoticons_laugh:"Laugh",imgly_sticker_emoticons_loud_cry:"Loud Cry",imgly_sticker_emoticons_loving:"Loving",imgly_sticker_emoticons_masked:"Masked",imgly_sticker_emoticons_music:"Music",imgly_sticker_emoticons_nerd:"Nerd",imgly_sticker_emoticons_ninja:"Ninja",imgly_sticker_emoticons_not_speaking_to_you:"Not speaking to you",imgly_sticker_emoticons_pig:"Pig",imgly_sticker_emoticons_pumpkin:"Pumpkin",imgly_sticker_emoticons_question:"Question",imgly_sticker_emoticons_rabbit:"Rabbit",imgly_sticker_emoticons_sad:"Sad",imgly_sticker_emoticons_sick:"Sick",imgly_sticker_emoticons_skateboard:"Skateboard",imgly_sticker_emoticons_skull:"Skull",imgly_sticker_emoticons_sleepy:"Sleepy",imgly_sticker_emoticons_smile:"Smile",imgly_sticker_emoticons_smoking:"Smoking",imgly_sticker_emoticons_sobbing:"Sobbing",imgly_sticker_emoticons_star:"Star",imgly_sticker_emoticons_steaming_furious:"Steaming Furious",imgly_sticker_emoticons_sunbathing:"Sunbathing",imgly_sticker_emoticons_tired:"Tired",imgly_sticker_emoticons_tongue_out_wink:"Tongue out wink",imgly_sticker_emoticons_wave:"Wave",imgly_sticker_emoticons_wide_grin:"Wide Grin",imgly_sticker_emoticons_wink:"Wink",imgly_sticker_emoticons_wrestler:"Wrestler",imgly_sticker_shapes_arrow_02:"Arrow 1",imgly_sticker_shapes_arrow_03:"Arrow 2",imgly_sticker_shapes_badge_01:"Badge 1",imgly_sticker_shapes_badge_11:"Badge 5",imgly_sticker_shapes_badge_12:"Badge 6",imgly_sticker_shapes_badge_13:"Badge 7",imgly_sticker_shapes_badge_15:"Badge 8",imgly_sticker_shapes_badge_18:"Badge 9",imgly_sticker_shapes_badge_19:"Badge 10",imgly_sticker_shapes_badge_20:"Badge 11",imgly_sticker_shapes_badge_28:"Badge 12",imgly_sticker_shapes_badge_32:"Badge 13",imgly_sticker_shapes_badge_35:"Badge 14",imgly_sticker_shapes_badge_36:"Badge 15",imgly_sticker_shapes_badge_04:"Badge 2",imgly_sticker_shapes_badge_06:"Badge 3",imgly_sticker_shapes_badge_08:"Badge 4",imgly_sticker_shapes_spray_01:"Spray 1",imgly_sticker_shapes_spray_03:"Spray 2",imgly_sticker_shapes_spray_04:"Spray 3"},canvasActions:{buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate",buttonFlipHorizontal:"Flip",buttonFlipVertical:"Flip"},history:{add:"Sticker",resize:"Sticker resize",position:"Sticker position",color:"Sticker color",delete:"Sticker delete",order:"Sticker order",opacity:"Sticker opacity",flip:"Sticker flip"}},text:{title:"Text",controls:{buttonNew:"New Text",dropdownFontFamily:"Font Family",textFontSize:"Font Size",selectAlignment:"Alignment",selectFontColor:"Font Color",selectBackgroundColor:"Background Color",sliderLineSpacing:"Line Spacing",tabColor:"Color",tabBgColor:"Bg Color",tabAlignment:"Alignment",tabLineHeight:"Line Height",tabFontSize:"Font Size"},canvasControls:{placeholderText:"Write Something",buttonSave:"Done",buttonClose:"Cancel",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text",edit:"Text edit",resize:"Text resize",position:"Text position",alignment:"Text alignment",textColor:"Text color",backgroundColor:"Text background color",fontFamily:"Font family",fontStyle:"Font style",lineSpacing:"Line spacing",width:"Text width",delete:"Text delete",order:"Text order"}},textdesign:{title:"Text Design",controls:{buttonNew:"New Text Design",buttonShuffle:"Shuffle Layout",selectColor:"Text Color",tabColor:"Color",tabShuffle:"Shuffle"},canvasControls:{placeholderText:"Write Something With Style",buttonSave:"Done",buttonClose:"Schlie\xdfen",inputText:"Text Input"},canvasActions:{buttonEdit:"Edit",buttonInvert:"Invert",buttonDelete:"Delete",buttonBringToFront:"Move to front",buttonDuplicate:"Duplicate"},history:{add:"Text design",edit:"Text design edit",resize:"Text design resize",position:"Text design position",color:"Text design color",shuffle:"Text design shuffle",invert:"Text design invert",padding:"Text design padding",order:"Text design order",delete:"Text design delete"}},frame:{title:"Frames",controls:{buttonReset:"Remove Frame",sliderOpacity:"Frame Opacity",sliderSize:"Frame Size",selectColor:"Frame Color",tabColor:"Color",tabOpacity:"Opacity",tabSize:"Size"},items:{imgly_frame_dia:"Dia",imgly_frame_art_decor:"Art Decor",imgly_frame_black_passepartout:"Black",imgly_frame_lowpoly_shadow:"Low Poly",imgly_frame_wood_passepartout:"Wood"}},brush:{title:"Brush",controls:{buttonReset:"Remove Brush",sliderSize:"Brush Size",sliderHardness:"Brush Hardness",selectColor:"Brush Color",tabSize:"Size",tabHardness:"Hardness",tabColor:"Color"},history:{brushStroke:"Brush Stroke"}},transform:{title:"Transform",controls:{buttonReset:"Reset to default",checkboxKeepResolution:"Keep Resolution",inputCropSize:"Crop Size",inputHeight:"h",inputWidth:"w",tabFlipAndRotate:"Flip & Rotate",tabResolution:"Resolution",tabCropSize:"Crop Size"},categories:{imgly_transforms_common:"Common",imgly_transforms_facebook:"Facebook",imgly_transforms_twitter:"Twitter",imgly_transforms_instagram:"Instagram"},items:{imgly_transform_common_custom:"Custom",imgly_transform_common_square:"Square",imgly_transform_common_4:"4:3",imgly_transform_common_16:"16:9",imgly_transform_common_3:"3:4",imgly_transform_common_9:"9:16",imgly_transform_facebook_profile:"Profile",imgly_transform_facebook_title:"Title",imgly_transform_facebook_post:"Post",imgly_transform_instagram_story:"Story",imgly_transform_instagram_landscape:"Landscape",imgly_transform_instagram_portrait:"Portrait",imgly_transform_instagram_square:"Square",imgly_transform_twitter_profile:"Profile",imgly_transform_twitter_title:"Title",imgly_transform_twitter_post:"Post"},transformActions:{buttonFlipHorizontal:"Flip Horizontal",buttonFlipVertical:"Flip Vertical",buttonRotateClockwise:"Rotate Clockwise",buttonRotateAntiClockwise:"Rotate Counterclockwise"}},[o.E.CUSTOM]:{title:"Custom"}},zn=t=>"de"===t?Tn:Mn,Pn={headline1:{size:16,letterSpacing:1.5,case:"uppercase"},headline2:{size:14,letterSpacing:.8,case:"uppercase"},body:{size:13,letterSpacing:0,case:"none"},label:{size:13,letterSpacing:0,case:"capitalize"},basicUICardLabel:{size:12,letterSpacing:0,case:"capitalize"},button1:{size:14,letterSpacing:0,case:"uppercase"},button2:{size:14,letterSpacing:0,case:"capitalize"},basicUITabLabel:{size:14,letterSpacing:.8,case:"uppercase"}},In={toast:2,controlsBar:5,buttonGroup:5,toolControlBar:6,toolbar:7,label:10,disable:11,canvas:{knob:4,bar:5,controls:5,snappingGuide:1,crop:{grid:2,dragImage:3,backdrop:4},webcam:{backdrop:7}},input:{list:6},button:{float:5},dialog:{base:100,backdrop:1,container:2},colorItem:{overlay:2,background:1,tiledBackground:0}},Rn=()=>{const t=230,e=166/3;return{advancedUIToolbar:{width:55,itemHeight:48,seperatorHeight:20,marginBottom:0},advancedUIToolControlBar:{width:t,paddingTop:16,paddingBottom:16,paddingLeft:24,paddingRight:24,marginBottom:0,controls:{gutter:16}},advancedCard:{small:{height:e,width:e},medium:{height:87,width:87},large:{height:86,width:182}},advancedSpacer:8,basicCanvasOffset:28,basicUIToolbar:{openHeight:88,closeHeight:40},basicUIToolControlBar:{itemsBarHeight:72,controlsBarHeight:80,maxHeight:116,maxWidth:300},basicCard:{medium:{height:56,width:90},large:{height:60,width:110}},basicSpacer:8,mainCanvasActionBar:{height:50},crop:{minSize:50},canvas:{marginTop:0,transform:{minSliderWidth:435,minValueWidth:235,minFlipWidth:160}},canvasControls:{sprite:{controlOffset:16,rotateHandle:{height:16},minSize:30,controlPadding:16},knob:{size:16,touchable:{desktop:24}},corner:{size:14,touchable:{desktop:24,mobile:48},borderWidth:4},width:{size:14}},buttons:{float:{size:56}},colorItem:{size:20},color:{colorPicker:{width:214,height:370,saturationSlider:{height:150},thumb:{size:14},arrow:{width:36}}},inputs:{cropSize:{maxWidth:t},checkbox:{maxWidth:t}},fontSystem:Pn,zIndex:In}},Dn=({primary:t="#365afc",background:e="#0B0B0B",foreground:i="#FFFFFF"}={primary:"#365afc",background:"#0B0B0B",foreground:"#FFFFFF"})=>{const o="rgba(255, 255, 255, 0.90)",r="rgba(255, 255, 255, 0.60)",n="rgba(255, 255, 255, 0.38)",s="#424242",a="#333333",l="#242424",c="#0B0B0B",h="rgba(255, 255, 255, 0.08)",d="rgba(0, 0, 0, 0.3)",p="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:e,foreground:i,primary:t,warning:"#ffba5c",error:"#c2393a",success:"#39c26c",focusOutlineColor:"rgba(255, 255, 255, 0.12)",scrollbar:{handleColor:"rgba(255, 255, 255, 0.2)"},button:{outlinedBorderColor:a,activeForeground:t,containedPrimaryBackground:t,containedPrimaryForeground:o,outlinedPrimaryBackground:l,outlinedPrimaryForeground:o,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:r,textPrimaryForeground:t,textSecondaryForeground:r,outlinedInactiveOverlayColor:d,textInactiveOpacity:"0.5",hoverOverlayColor:h},checkbox:{background:a,foreground:i,activeForeground:i,activeBackground:t,inactiveOpacity:p,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:o,headerForeground:r,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:o,activeBorderColor:t,activeOverlayColor:"rgba(89, 121, 252, 0.20)",labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:o,inactiveOverlayColor:d,hoverOverlayColor:h},tabTitle:{foreground:r,background:"transparent",activeBackground:"transparent",activeBorderColor:t,activeForeground:o},dropdown:{background:"transparent",foreground:o,hoverBorderColor:r,borderColor:a,caretColor:n,listBackground:a,listBorderColor:a,listItemHoverBackground:s,listForeground:r,listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",inactiveOpacity:p},textInput:{foreground:o,hoverBorderColor:"rgba(255, 255, 255, 0.40)",background:"transparent",borderColor:a,inactiveOpacity:p},slider:{trackColor:"rgba(255, 255, 255, 0.4)",activeTrackColor:t,thumbBackground:"#171717",thumbBorderColor:t,inactiveOpacity:p,hoverOpacity:"0.7"},selectColor:{activeBorderColor:t,inactiveOpacity:p},toolbar:{foreground:o,background:l,activeBackground:"transparent",activeForeground:t,borderColor:"transparent"},tooltip:{background:s,foreground:o},toolControlBar:{background:"rgba(23, 23, 23, 0.9)",borderColor:"transparent",shadow:"none",separatorColor:a,titleForeground:r,inputLabelForeground:r,inputLabelInactiveOpacity:p},mainCanvasActionBar:{background:"linear-gradient(0deg, transparent 0%,  rgba(0, 0, 0, 0.6) 98%)",foreground:o,borderColor:"none"},canvasActionBar:{background:s,foreground:o,separatorColor:n},canvas:{background:c,controlsOutline:"rgba(255, 255, 255, 0.5)",controlsColor:"#ffffff",cropBackdrop:"rgba(0, 0, 0, 0.5)"},colorPicker:{listBackground:a,listShadow:"0 12px 17px 2px rgba(0,0,0,0.14),\n        0 5px 22px 4px rgba(0,0,0,0.12),\n        0 7px 8px -4px rgba(0,0,0,0.20)",controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:i,background:c},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#424242",highlight:"#565656",shadow:"#333333"}}}},On=({primary:t="#1e47fb",background:e="#FBFBFB",foreground:i="#000000"}={primary:"#1e47fb",background:"#FBFBFB",foreground:"#000000"})=>{const o="rgba(0, 0, 0, 0.90)",r="rgba(0, 0, 0, 0.60)",n="rgba(0, 0, 0, 0.38)",s="#CCCCCC",a="#D4D4D4",l="#E6E6E6",c="#EEEEEE",h="#FBFBFB",d="rgba(125, 125, 125, 0.12)",p="rgba(0, 0, 0, 0.1)",u="0.3";return{shape:{radiusSmall:2,radiusMedium:4,radiusLarge:4},typography:{fontFamily:"Fira Sans",format:"woff",fontURI:"./fonts/imgly_font_fira_sans_regular.woff",provider:"file"},background:e,foreground:i,primary:t,warning:"#ffb045",error:"#c01a1b",success:"#17c658",focusOutlineColor:"rgba(125, 125, 125, 0.12)",scrollbar:{handleColor:"rgba(0, 0, 0, 0.2)"},button:{outlinedBorderColor:a,activeForeground:t,containedPrimaryBackground:t,containedPrimaryForeground:"rgba(255, 255, 255, 0.9)",outlinedPrimaryBackground:l,outlinedPrimaryForeground:o,outlinedSecondaryBackground:"transparent",outlinedSecondaryForeground:r,textPrimaryForeground:t,textSecondaryForeground:r,outlinedInactiveOverlayColor:p,textInactiveOpacity:"0.5",hoverOverlayColor:d},checkbox:{background:a,foreground:i,activeForeground:i,activeBackground:t,inactiveOpacity:u,hoverOpacity:"0.8"},modal:{background:l,bodyForeground:o,headerForeground:r,backdrop:"rgba(0, 0, 0, 0.6)"},card:{background:a,foreground:o,activeBorderColor:t,activeOverlayColor:"rgba(30, 71, 251, 0.2)",labelBackground:"linear-gradient(transparent, rgba(0, 0, 0, 0.6))",labelForeground:"rgba(255, 255, 255, 0.87)",inactiveOverlayColor:p,hoverOverlayColor:d},tabTitle:{foreground:r,background:"transparent",activeBackground:"transparent",activeBorderColor:t,activeForeground:o},dropdown:{background:"transparent",foreground:o,hoverBorderColor:r,borderColor:a,listBackground:a,caretColor:n,listForeground:r,listBorderColor:a,listItemHoverBackground:s,listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",inactiveOpacity:u},textInput:{foreground:o,hoverBorderColor:o,background:"transparent",borderColor:a,inactiveOpacity:u},slider:{trackColor:s,activeTrackColor:t,thumbBackground:c,thumbBorderColor:t,inactiveOpacity:u,hoverOpacity:"0.7"},selectColor:{activeBorderColor:t,inactiveOpacity:u},toolbar:{foreground:o,background:a,activeBackground:"transparent",activeForeground:t,borderColor:"transparent"},tooltip:{background:s,foreground:o},toolControlBar:{background:"rgba(238, 238, 238, 0.9)",borderColor:c,shadow:"none",separatorColor:a,titleForeground:r,inputLabelForeground:r,inputLabelInactiveOpacity:u},mainCanvasActionBar:{background:"transparent",foreground:o,borderColor:"none"},canvasActionBar:{background:s,foreground:o,separatorColor:n},canvas:{background:h,controlsOutline:"rgba(255, 255, 255, 0.6)",controlsColor:"#ffffff",cropBackdrop:"rgba(255, 255, 255, 0.3)"},colorPicker:{listBackground:a,listShadow:"0 8px 10px 1px rgba(0,0,0,0.14),\n        0 3px 14px 2px rgba(0,0,0,0.12),\n        0 5px 5px -3px rgba(0,0,0,0.20)",controlsColor:"#ffffff",inputBorderColor:s},colorItem:{borderRadius:"2px",margin:"1px"},webcam:{backdrop:"rgba(0, 0, 0, 0.3)",floatButton:i,background:h},snapping:{positionGuideColor:"#f0f",rotationGuideColor:"#0ff"},transform:{crops:{main:"#B8B8B8",highlight:"#E6E6E6",shadow:"#D4D4D4"}}}},Ln=Dn(),An=Rn(),_n={...Ln,measurements:An},Fn=(t,e)=>{const i=(t=>"light"===t?On:Dn)(t);if(e&&e[t]){const{primary:o,background:r,foreground:n}=e[t],s={primary:o,background:r,foreground:n};return wr([i(Object.keys(s).reduce(((t,e)=>s[e]?{...t,[e]:s[e]}:t),{})),e[t]])}return i()||Ln},$n=["canvas","advancedUIToolbar","advancedUIToolControlBar","basicUIToolbar","basicUIToolControlBar","mainCanvasActionBar","colorItem","fontSystem"],Bn={config:br,locale:Mn,theme:Ln,measurements:An},Hn=class{constructor(){this.checkDefaultToolAvailability=(t,e)=>-1!==e.indexOf(t),this.state=(0,o.e)(Bn),this.events=new En,this.licenseChecker=null}saveConfig(t){t.mainCanvasActions&&4!==t.mainCanvasActions.length&&(t.mainCanvasActions.length=4);const e=wr([t.layout&&"basic"===t.layout?kn:br,t]);this.licenseChecker=new o.vb(e.license),this.licenseChecker.areCustomAssetsAllowed()||(e.sticker.enableCustomUpload=!1);const i=((t,e)=>e&&e[t]?wr([zn(t),e[t]]):zn(t)||Mn)(e.language,e.custom.languages),r=Fn(e.theme,e.custom.themes),n=(t=>{const e=Rn();if(t){const i={};return Object.keys(t).forEach((e=>{-1!==$n.indexOf(e)&&(i[e]=t[e])})),wr([e,i])}return e})(e.custom.measurements),{provider:s}=e.library,a=[];e.adjustment.categories=e.adjustment.categories.reduce(((t,e)=>(t.push({...e,items:e.items.filter((t=>!!o.S[t.identifier]||(a.push(t.identifier),!1)))}),t)),[]),0!==a.length&&console.error(`The following identifier are incorrect for the adjustment tool: ${a.join(", ")}`),delete e.language,delete e.custom.languages,delete e.custom.themes,delete e.library.provider;let l=e.tools.reduce(((t,e)=>"object"===typeof e?[...t,...e]:[...t,e]),[]);if(l.length||(console.error("Empty list input for tools"),l=yr.reduce(((t,e)=>"object"===typeof e?[...t,...e]:[...t,e]),[])),l=l.filter((t=>this.licenseChecker.isToolAllowed(t))),e.defaultTool){this.checkDefaultToolAvailability(e.defaultTool,l)||(this.licenseChecker.isToolAllowed(e.defaultTool)&&console.warn(`Configured default tool ${e.defaultTool} is not a part of configured list of tools: [${l.join(" ")}]`),[e.defaultTool]=l)}e.tools=l,this.state.config=e,this.state.locale=i,this.state.theme=r,this.state.measurements=n;const c=this.buildCustomAssetsConfig();return this.assetProvider=new o.$a(c,this.licenseChecker.areCustomAssetsAllowed(),e.assetResolver),this.loadThemeFont(),s}get config(){return this.state.config}get locale(){return this.state.locale}get theme(){return this.state.theme}get measurements(){return this.state.measurements}get tools(){return this.config.tools.reduce(((t,e)=>"string"===typeof e?[...t,e]:[...t,"",...e]),[])}get defaultTool(){return this.config.defaultTool}get isOrderDefault(){return"default"===this.config.order}get isLayoutAdvanced(){return"advanced"===this.config.layout}get displayCloseButton(){return-1!==this.config.mainCanvasActions.indexOf(o.D.CLOSE)}loadThemeFont(){const{typography:t}=this.theme;t.skipLoading||this.assetProvider.getFontManager().injectFonts([t])}buildCustomAssetsConfig(){const t=this.tools,e=(0,o.p)(this.state.config),i=this.state.config.assetBaseUrl,{theme:r}=this.state,n=-1!==t.indexOf(o.E.FILTER)?e[o.E.FILTER]:void 0,s=-1!==t.indexOf(o.E.FOCUS)?e[o.E.FOCUS]:void 0,a=-1!==t.indexOf(o.E.ADJUSTMENT)?e[o.E.ADJUSTMENT]:void 0;return{basePath:i,theme:r,filter:n,focus:s,sticker:-1!==t.indexOf(o.E.STICKER)?e[o.E.STICKER]:void 0,frame:-1!==t.indexOf(o.E.FRAME)?e[o.E.FRAME]:void 0,overlay:-1!==t.indexOf(o.E.OVERLAY)?e[o.E.OVERLAY]:void 0,transform:-1!==t.indexOf(o.E.TRANSFORM)?e[o.E.TRANSFORM]:void 0,text:-1!==t.indexOf(o.E.TEXT)?e[o.E.TEXT]:void 0,adjustment:a,textdesign:-1!==t.indexOf(o.E.TEXT_DESIGN)?e[o.E.TEXT_DESIGN]:void 0}}};(0,o.c)([o.l],Hn.prototype,"saveConfig",1),(0,o.c)([o.f],Hn.prototype,"config",1),(0,o.c)([o.f],Hn.prototype,"locale",1),(0,o.c)([o.f],Hn.prototype,"theme",1),(0,o.c)([o.f],Hn.prototype,"measurements",1),(0,o.c)([o.f],Hn.prototype,"tools",1),(0,o.c)([o.f],Hn.prototype,"defaultTool",1),(0,o.c)([o.f],Hn.prototype,"isOrderDefault",1),(0,o.c)([o.f],Hn.prototype,"isLayoutAdvanced",1),(0,o.c)([o.f],Hn.prototype,"displayCloseButton",1);function Nn(t,e){return t.width/t.height>e.width/e.height?t.height/e.height:t.width/e.width}var Wn={transform:o.jb.IDENTITY},Vn=class{constructor(t){this.initialTransform=o.jb.IDENTITY,this.editor=t,this.state=(0,o.e)(Wn)}createPreview(t){this.container=this.editor.engine.createPreview(t)}updateTransform(t=0,e=!0){const i=this.calculateTransform(t);return!!i.scale.x&&(e?this.saveInitialTransform(i):this.savePreviewTransform(i),this.container.setTransform(this.state.transform),!0)}saveInitialTransform(t){this.initialTransform=t,this.savePreviewTransform(t)}savePreviewTransform(t){(0,o.m)((()=>{this.state.transform.position=t.position,this.state.transform.scale=t.scale,this.state.transform.rotation=t.rotation;const e=(0,o.Za)(),i=new o.Pa(t.scale).divide(e);this.previewTransformWithoutDpr={position:new o.Pa(t.position).divide(e),scale:i,rotation:t.rotation}}))}get transform(){return this.state.transform}get position(){return this.state.transform.position}get scale(){return this.state.transform.scale}get rotation(){return this.state.transform.rotation}calculateTransform(t=0){const e=(0,o.Za)(),{scaleImageToFit:i}=this.editor.configStore.config,{width:r,height:n}=this.editor.canvasStore.canvasSize,s=this.editor.engine.getOutputDimensions(),a=Nn({width:r,height:n},s);let l=i?a:Math.min(1,a);const c=n-s.height*l,h=2*this.editor.configStore.measurements.mainCanvasActionBar.height;c<h&&(l=Nn({width:r,height:n-h},s));const d=.95;s.height*l>n*d&&(l=Nn({width:r,height:n*d},s)),s.width*l>r*d&&(l=Nn({width:r*d,height:n},s)),l*=e;const p={x:r*e/2,y:n*e/2},u={x:l,y:l};return new o.jb(p,u,t)}};(0,o.c)([o.l],Vn.prototype,"updateTransform",1),(0,o.c)([o.l],Vn.prototype,"savePreviewTransform",1),(0,o.c)([o.f],Vn.prototype,"transform",1),(0,o.c)([o.f],Vn.prototype,"position",1),(0,o.c)([o.f],Vn.prototype,"scale",1),(0,o.c)([o.f],Vn.prototype,"rotation",1);var Un=class{constructor(){this.imageContainerOrder=[],this.spriteContainerOrder=[]}static checkTool(t){if(-1!==[o.E.STICKER,o.E.TEXT,o.E.TEXT_DESIGN,o.E.BRUSH].indexOf(t))throw new Error("addIndex is used for non sprites, for sprites use addSprite")}static remove(t,e){const i=e.findIndex((e=>e===t));-1!==i&&e.splice(i,1)}static indexForOrder(t,e,i){const o=t[i],r=e.findIndex((t=>t===i));if(-1!==r)return{index:r,order:e};const{length:n}=e;if(n){let r;for(r=0;r<n;r+=1){if(o<t[e[r]])return{index:r,order:e=[...e.slice(0,r),i,...e.slice(r)]}}}return e.push(i),{index:e.length-1,order:e}}addIndex(t){Un.checkTool(t);const{index:e,order:i}=Un.indexForOrder(Un.IMAGE_CONTAINER_INDEX,this.imageContainerOrder,t);return this.imageContainerOrder=i,e}removeIndex(t){Un.checkTool(t),Un.remove(t,this.imageContainerOrder)}addSprite(t){return this.spriteContainerOrder.push(t),this.imageContainerOrder.length+this.spriteContainerOrder.length-1}removeSprite(t){Un.remove(t,this.spriteContainerOrder)}renameSprite(t,e){const i=this.spriteContainerOrder.findIndex((e=>e===t));-1!==i&&(this.spriteContainerOrder[i]=e)}bringToFront(t){const e=this.spriteContainerOrder.findIndex((e=>e===t));return-1!==e&&(this.spriteContainerOrder.splice(e,1),this.spriteContainerOrder.push(t)),this.getLastSpriteIndex()}getLastSpriteId(){const{length:t}=this.spriteContainerOrder;return this.spriteContainerOrder[t-1]}getSpriteIndex(t){const e=this.spriteContainerOrder.findIndex((e=>e===t));return e+this.imageContainerOrder.length-1}getLastSpriteIndex(){return this.imageContainerOrder.length+this.spriteContainerOrder.length-1}},Zn=Un;Zn.IMAGE_CONTAINER_INDEX={[o.E.FILTER]:0,[o.E.ADJUSTMENT]:1,[o.E.FOCUS]:2,[o.E.OVERLAY]:3};var Gn=class{constructor(){this.snapshots=[],this.observeIndex=o.e.box(-1)}addSnapshot(t){this.index===this.snapshots.length-1?this.snapshots=this.snapshots.concat(JSON.stringify(t)):this.snapshots=[...this.snapshots.slice(0,this.index+1),JSON.stringify(t)],this.observeIndex.set(this.snapshots.length-1)}getCurrentState(){return this.snapshots[this.index]}reset(){this.snapshots=[],this.observeIndex.set(-1)}undo(){return this.canUndo?(this.observeIndex.set(this.index-1),JSON.parse(this.getCurrentState())):null}redo(){return this.canRedo?(this.observeIndex.set(this.index+1),JSON.parse(this.getCurrentState())):null}discardSnapshotsfromIndex(t){t>0&&t<this.snapshots.length-1&&(this.snapshots=this.snapshots.slice(0,t),this.observeIndex.set(this.snapshots.length-1))}get index(){return this.observeIndex.get()}get canUndo(){return this.index>0}get canRedo(){return this.snapshots.length-1>this.index}};(0,o.c)([o.f],Gn.prototype,"index",1),(0,o.c)([o.f],Gn.prototype,"canUndo",1),(0,o.c)([o.f],Gn.prototype,"canRedo",1);var jn=class{constructor(t){this.awaitHistoryChange=!1,this.isDirtySinceSave=!1,this.undo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onUndo(),this.awaitHistoryChange=!0;const t=this.appHistoryManager.undo();await this.applyState(t),this.awaitHistoryChange=!1,this.canUndo||(this.isDirtySinceSave=!1)}},this.redo=async()=>{if(!this.awaitHistoryChange){this.editor.configStore.events.onRedo(),this.awaitHistoryChange=!0;const t=this.appHistoryManager.redo();await this.applyState(t),this.awaitHistoryChange=!1}},this.editor=t,this.appHistoryManager=new Gn}get canUndo(){return this.appHistoryManager.canUndo}get canRedo(){return this.appHistoryManager.canRedo}getHistoryState(){const t=(0,o.p)(this.editor.adjustmentsToolStore.state),e=(0,o.p)(this.editor.filterToolStore.state),i=this.editor.focusToolStore.getFocusStateForHistory(),r=(0,o.p)(this.editor.overlayToolStore.state),n=(0,o.p)(this.editor.frameToolStore.state),{strokes:s}=this.editor.brushToolStore,a=this.editor.spriteStore.getSpriteHistoryState(),l=this.editor.transformToolStore.serializableState;return{[o.E.ADJUSTMENT]:t,[o.E.FILTER]:e,[o.E.FOCUS]:i,[o.E.OVERLAY]:r,[o.E.FRAME]:n,[o.E.BRUSH]:s,sprite:a,[o.E.TRANSFORM]:l}}addInitialSnapshot(){const t=this.getHistoryState();this.appHistoryManager.addSnapshot({state:t,type:Cr.ADD,description:"Initial State"})}addSnapshot(t,e,i){let o;o=t?t.sprite||t.transform?{...this.getHistoryState(),...t}:t:this.getHistoryState(),this.appHistoryManager.addSnapshot({state:o,type:e,description:i}),this.editor.configStore.events.onHistoryChange(),this.isDirtySinceSave||(this.isDirtySinceSave=!0)}async applyState({state:t}){try{if(t){const e=Object.keys(t);for(const i of e)switch(i){case o.E.FILTER:await this.editor.filterToolStore.updateStateFromHistory(t[i]);break;case o.E.ADJUSTMENT:await this.editor.adjustmentsToolStore.updateStateFromHistory(t[i]);break;case o.E.OVERLAY:await this.editor.overlayToolStore.updateStateFromHistory(t[i]);break;case o.E.FRAME:await this.editor.frameToolStore.updateStateFromHistory(t[i]);break;case o.E.FOCUS:await this.editor.focusToolStore.updateStateFromHistory(t[i],this.editor.canvasStore.sizeVector);break;case o.E.BRUSH:await this.editor.brushToolStore.updateStateFromHistory(t[i]);break;case"sprite":await this.editor.spriteStore.updateStateFromHistory(t[i]);break;case o.E.TRANSFORM:this.editor.outputContainer.pauseChildrenUpdates(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t[i]),this.editor.transformToolStore.onLeave(),this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.onLeave(),this.editor.outputContainer.resumeChildrenUpdates(),await this.editor.wait()}await this.editor.renderPromise()}}catch(e){console.error(e),this.editor.modalStore.showActionModal({type:o.H.ERROR,identifier:"unexpectedError",error:e,handleConfirm:()=>{this.applyState({state:t})}})}}isDirty(){return this.appHistoryManager.snapshots.length>1}reset(){this.appHistoryManager.reset(),this.isDirtySinceSave=!1}getCurrentSpritesState(){var t,e;return null==(e=null==(t=JSON.parse(this.appHistoryManager.getCurrentState()))?void 0:t.state)?void 0:e.sprite}};(0,o.c)([o.l],jn.prototype,"undo",2),(0,o.c)([o.l],jn.prototype,"redo",2),(0,o.c)([o.f],jn.prototype,"canUndo",1),(0,o.c)([o.f],jn.prototype,"canRedo",1);var Yn=(t,e)=>new Promise(((i,o)=>{const r=new Image;r.onload=()=>{i(r)},r.onerror=()=>{o(new Error(`Failed to load image with src:${t}`))},r.crossOrigin=e,r.src=t})),Xn=(t,e)=>new Promise(((i,o)=>{((t,e)=>new Promise(((i,o)=>{const r=new XMLHttpRequest;r.onload=()=>{const e=new FileReader;e.onloadend=()=>{"string"===typeof e.result&&"data:image"===e.result.substr(0,10)?i(e.result):o(new Error(`The image could not be loaded from ${t}`))},e.onerror=t=>{o(t)},e.readAsDataURL(r.response)},r.open("GET",t),r.responseType="blob",r.withCredentials="use-credentials"===e,r.send()})))(t,e).then((t=>{const e=new Image;e.addEventListener("load",(()=>{i(e)})),e.src=t})).catch((()=>{Yn(t,e).then((t=>i(t))).catch((t=>{o(t)}))}))})),Kn=async({url:t,image:e,crossOrigin:i="anonymous"})=>{try{return e&&e.src&&"data:"===e.src.substr(0,5)||e&&e.src&&e.src.includes(".svg")?e:"string"===typeof t&&"data:"===t.substr(0,5)||"string"===typeof t&&t.includes(".svg")?Yn(t,i):Xn(t||e.src,i)}catch(Er){throw new Error(Er)}},Jn={tool:null,isWebcam:!1,image:"",imageLoadedToEngine:!1},qn=class{constructor(t){this.setImage=async t=>{try{const{crossOrigin:e}=this.editor.configStore.config.engine;"string"===typeof t&&!t.trim()||void 0===t||null===t?this.state.image=void 0:"string"===typeof t?this.state.image=await Kn({url:(0,o.z)(t)?t:this.editor.assetProvider.getPath(t),crossOrigin:e}):t instanceof HTMLImageElement&&(this.state.image=await Kn({image:t,crossOrigin:e})),this.isWebcam&&(this.state.isWebcam=!1)}catch(e){throw new Error(e)}},this.setImageLoadedToEngine=t=>{this.state.imageLoadedToEngine=t},this.newImage=t=>{this.editor.init(t)},this.editor=t,this.state=(0,o.e)(Jn)}selectTool(t){const{licenseChecker:e}=this.editor.configStore;if(this.state.tool!==t&&(null==e?void 0:e.isToolAllowed(t))&&(this.image||t===o.E.LIBRARY||t===o.E.CUSTOM))switch(this.editor.onToolChange(this.state.tool,t),this.state.tool=t,this.editor.configStore.events.onToolChanged(t),t){case o.E.TEXT:this.editor.configStore.config.text.addDefaultTextOnEnter&&this.editor.spriteStore.textToolStore.addOrselect();break;case o.E.TEXT_DESIGN:this.editor.configStore.config.textdesign.addDefaultTextOnEnter&&this.editor.spriteStore.textDesignToolStore.addOrselect();break;case o.E.BRUSH:this.editor.brushToolStore.initSize();break;case o.E.TRANSFORM:this.editor.transformToolStore.applyDefaultCrop()}}selectWebcam(t){this.state.isWebcam=t}get webcamLabel(){return this.editor.libraryStore.locale.controls.buttonWebcamClose}get tool(){return this.state.tool}get isWebcam(){return this.state.isWebcam}get image(){return this.state.image}get imageLoadedToEngine(){return this.state.imageLoadedToEngine}};(0,o.c)([o.l],qn.prototype,"selectTool",1),(0,o.c)([o.l],qn.prototype,"selectWebcam",1),(0,o.c)([o.l],qn.prototype,"setImage",2),(0,o.c)([o.l],qn.prototype,"setImageLoadedToEngine",2),(0,o.c)([o.l],qn.prototype,"newImage",2),(0,o.c)([o.f],qn.prototype,"webcamLabel",1),(0,o.c)([o.f],qn.prototype,"tool",1),(0,o.c)([o.f],qn.prototype,"isWebcam",1),(0,o.c)([o.f],qn.prototype,"image",1),(0,o.c)([o.f],qn.prototype,"imageLoadedToEngine",1);var Qn={height:0,width:0},ts=class{constructor(t){this.canvasClickDisabled=o.e.box(!1),this.resizeCanvas=(t=null)=>{const e=this.editor.activeStore.tool,i=t===o.E.TRANSFORM||!t&&e===o.E.TRANSFORM,{isLayoutAdvanced:r,measurements:n}=this.editor.configStore,{storedSize:s}=this.editor.canvasStore;let a=0;!r&&i&&(a=-1*n.basicUIToolControlBar.controlsBarHeight,t===o.E.TRANSFORM&&e===o.E.BRUSH&&(a-=n.basicUIToolControlBar.itemsBarHeight+4)),this.setCanvasSize({width:s.width,height:s.height+a})},this.setCanvasSize=t=>{this.state.canvasSize=t},this.editor=t,this.state=(0,o.e)(ts.initialState)}setCanvasElement(t){this.canvas=t,this.editor.engineMediator.preview.createPreview(t),this.editor.activeStore.image&&this.editor.init(this.editor.activeStore.image)}saveDimensions({height:t,width:e,render:i}){const{imageLoadedToEngine:o}=this.editor.activeStore;t>Qn.height&&e>Qn.width&&(this.state.storedSize={width:e,height:t},0===this.state.canvasSize.height&&(this.state.canvasSize={width:e,height:t}),i&&o&&this.editor.resize())}disableCanvasClick(){this.canvasClickDisabled.set(!0)}enableCanvasClick(){this.canvasClickDisabled.set(!1)}get isCanvasClickable(){return!this.canvasClickDisabled.get()}get canvasSize(){return this.state.canvasSize}get storedSize(){return this.state.storedSize}get sizeVector(){return o.Pa.fromSize(this.state.canvasSize)}get sizeVectorMagnitude(){return this.sizeVector.magnitude}getContainersAtPreviewPoint(t){const e=this.editor.engine.getContainersAtPreviewPoint(t,this.editor.engineMediator.preview.previewTransformWithoutDpr).map((t=>t.getID())).filter((t=>t!==this.editor.engineMediator.image.getImgageContainerId()));this.editor.spriteStore.onCanvasClick(e)}},es=ts;es.initialState={canvasSize:Qn,storedSize:{height:150,width:150}},(0,o.c)([o.l],es.prototype,"setCanvasElement",1),(0,o.c)([o.l],es.prototype,"saveDimensions",1),(0,o.c)([o.l],es.prototype,"resizeCanvas",2),(0,o.c)([o.l],es.prototype,"disableCanvasClick",1),(0,o.c)([o.l],es.prototype,"enableCanvasClick",1),(0,o.c)([o.l],es.prototype,"setCanvasSize",2),(0,o.c)([o.f],es.prototype,"isCanvasClickable",1),(0,o.c)([o.f],es.prototype,"canvasSize",1),(0,o.c)([o.f],es.prototype,"storedSize",1),(0,o.c)([o.f],es.prototype,"sizeVector",1),(0,o.c)([o.f],es.prototype,"sizeVectorMagnitude",1);var is={type:null,identifier:null,isVisible:!1,error:""},os=class{constructor(t){this.showActionModal=({type:t,identifier:e,error:i,handleConfirm:o,handleDismiss:r})=>{this.resetHandlers(),this.state.isVisible=!0,this.state.identifier=e,this.state.type=t,this.state.error=i||"",this.handleConfirm=o,this.handleDismiss=r},this.hideModal=()=>{this.state.isVisible=!1,this.state.type=null,this.state.error="",this.state.identifier=null,this.resetHandlers()},this.resetHandlers=()=>{this.handleConfirm=null,this.handleDismiss=null},this.configStore=t.configStore,this.state=(0,o.e)(is)}showInfoModal(t){this.resetHandlers(),this.state.isVisible=!0,this.state.type=o.H.INFO,this.state.identifier=t,this.state.error=""}showTextEditModal(){this.resetHandlers(),this.state.isVisible=!0,this.state.type=o.H.TEXT_EDIT,this.state.identifier="inputText",this.state.error=""}get modalProps(){const{isVisible:t}=this.state,e=this.getModalLocale();if(e){const{bodyLabel:i,headerLabel:o,buttonYes:r,buttonNo:n}=e;return{headerLabel:o,bodyLabel:i,confirmLabel:r,dismissLabel:n,isVisible:t,handleClose:this.hideModal,handleConfirm:this.handleConfirm,handleDismiss:this.handleDismiss}}return{isVisible:!1}}get isVisible(){return this.state.isVisible}get type(){return this.state.type}get identifier(){return this.state.identifier}get positionOffset(){const{isLayoutAdvanced:t,measurements:{basicCanvasOffset:e,advancedUIToolControlBar:i,advancedUIToolbar:o},isOrderDefault:r}=this.configStore,n=(i.width+o.width)*(r?1:-1);return t?{x:n/2,y:0}:{x:0,y:-e}}getModalLocale(){const{identifier:t,error:e,type:i}=this.state,{locale:r}=this.configStore;if(!i||!t||i===o.H.TEXT_EDIT)return null;if(i&&t&&r[`${i}Modals`]&&r[`${i}Modals`][t]){const n=r[`${i}Modals`][t];let{body:s}=n;s&&"object"===typeof e?Object.keys(e).forEach((t=>{s=s.replace(`\${${t}}`,e[t])})):s&&(s=s.replace("${error}",e));let a=n.heading;if(i===o.H.ERROR||i===o.H.WARNING){const t={error:r.common.error,warning:r.common.warning};a=`${"error"===i?t.error:t.warning}${n.headingDelimiter||""} ${n.header||""}`}return{bodyLabel:s,headerLabel:a,buttonYes:n.buttonYes,buttonNo:n.buttonNo}}return null}};(0,o.c)([o.l],os.prototype,"showActionModal",2),(0,o.c)([o.l],os.prototype,"showInfoModal",1),(0,o.c)([o.l],os.prototype,"showTextEditModal",1),(0,o.c)([o.l],os.prototype,"hideModal",2),(0,o.c)([o.f],os.prototype,"modalProps",1),(0,o.c)([o.f],os.prototype,"isVisible",1),(0,o.c)([o.f],os.prototype,"type",1),(0,o.c)([o.f],os.prototype,"identifier",1),(0,o.c)([o.f],os.prototype,"positionOffset",1);var rs=class{constructor(t){this.defaultScale=1,this.SCALE_LEVELS=[8.33,12.5,16.66,25,33.33,50,66.66,100,125,150,200,300,400,500,600].map((t=>t/100)),this.state={position:{x:0,y:0},scaleIndex:-1},this.offset={x:0,y:0},this.in=()=>{this.canZoomIn&&(this.state.scaleIndex+=1,this.scaleRender())},this.out=()=>{if(this.canZoomOut){this.state.scaleIndex-=1;const{maxOffsetX:t,maxOffsetY:e}=this.checkOffset({x:0,y:0});this.state.scaleIndex===this.defaultIndex&&(this.offset.y=e),this.state.scaleIndex===this.defaultIndex&&(this.offset.x=t),this.savePosition(),this.scaleRender()}},this.setOffset=t=>{const{canDragX:e,canDragY:i}=this.checkOffset(t);e&&(this.offset.x=t.x),i&&(this.offset.y=t.y),this.scaleRender()},this.editor=t}setInitialTransform(t=0){const e=(0,o.Za)(),{scaleImageToFit:i}=this.editor.configStore.config,{transform:r}=this.editor.engineMediator.preview;(0,o.m)((()=>{const o=Math.abs(t||r.scale.x);this.setDefaultScale(i?o:Math.min(1*e,o)),this.setPosition(r.position)}))}resetScale(){this.state.scaleIndex=-1}resetPosition(){const{width:t,height:e}=this.editor.canvasStore.canvas;this.setPosition({x:t/2,y:e/2})}resetOffset(){this.offset={x:0,y:0}}setPosition(t){this.state.position.x=t.x,this.state.position.y=t.y}savePosition(){this.setPosition(this.getPositionWithOffset()),this.offset={x:0,y:0}}setDefaultScale(t){if(1!==this.defaultScale){const t=this.SCALE_LEVELS.findIndex((t=>t===this.defaultScale));-1!==t&&(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,t),...this.SCALE_LEVELS.slice(t+1)])}const e=this.SCALE_LEVELS.findIndex((e=>e===t));if(-1!==e)this.state.scaleIndex=e;else{const e=this.SCALE_LEVELS.findIndex(((e,i)=>(0===i||this.SCALE_LEVELS[i-1]<t)&&t<e));-1!==e?(this.SCALE_LEVELS=[...this.SCALE_LEVELS.slice(0,e),t,...this.SCALE_LEVELS.slice(e)],this.state.scaleIndex=e):(this.SCALE_LEVELS=[...this.SCALE_LEVELS,t],this.state.scaleIndex=this.SCALE_LEVELS.length-1)}this.defaultScale=t}setScaleToDefault(){this.state.scaleIndex=this.defaultIndex}checkOffset(t){const e=(0,o.Za)(),{scaledSize:i}=this,{previewSize:r}=this,n=this.editor.engineMediator.preview.initialTransform.position,s=this.getPositionWithOffset(t),a=(i.width-r.width)*e/2,l=(i.height-r.height)*e/2,c=n.x-s.x,h=n.y-s.y,d=Math.abs(c)-a,p=Math.abs(h)-l;return{canDragX:d<0,canDragY:p<0,maxOffsetX:c>0?-d:d,maxOffsetY:h>0?-p:p}}calculateScale(t=0,e=this.previewSize,i=this.defaultScale){const{width:r,height:n}=e,s=new o.Pa({x:r,y:n}),a=new o.Pa(Math.abs(s.x*Math.cos(t))+Math.abs(s.y*Math.sin(t)),Math.abs(s.x*Math.sin(t))+Math.abs(s.y*Math.cos(t))),l=s.subtract(a).divide(2).multiply(i).abs;return l.y>l.x?2*l.y/s.y+i:2*l.x/s.x+i}get defaultIndex(){return this.SCALE_LEVELS.findIndex((t=>t===this.defaultScale))}getPositionWithOffset(t=this.offset){const{position:e}=this;return{x:e.x-t.x,y:e.y-t.y}}scaleRender(t=!1){const e=this.editor.scale.getPositionWithOffset(),i=t?this.defaultScale:this.scale,o={x:i,y:i};this.editor.engineMediator.preview.container.setScale(o),this.editor.engineMediator.preview.container.setPosition(e),this.editor.engineMediator.preview.savePreviewTransform({scale:o,position:e,rotation:0}),t||this.editor.render()}get scale(){const t=this.state.scaleIndex;return-1!==t?this.SCALE_LEVELS[t]:this.defaultScale}get zoomLevel(){const t=(0,o.Za)();return(this.scale/t*100).toFixed(1)}get canDrag(){return this.defaultScale<this.scale}get canZoomOut(){const{restrictZoomOutToDefault:t}=this.editor.configStore.config;return t?this.state.scaleIndex>this.defaultIndex:0!==this.state.scaleIndex}get canZoomIn(){return this.SCALE_LEVELS.length-1>this.state.scaleIndex}get position(){return this.state.position}get scaledSize(){const t=this.state.scaleIndex,e=-1!==t?this.SCALE_LEVELS[t]:this.defaultScale,{previewSize:i}=this;return{width:i.width*e/this.defaultScale,height:i.height*e/this.defaultScale}}get previewSize(){return this.editor.getPreviewSize()}};(0,o.c)([o.e],rs.prototype,"state",2),(0,o.c)([o.l],rs.prototype,"in",2),(0,o.c)([o.l],rs.prototype,"out",2),(0,o.c)([o.l],rs.prototype,"setInitialTransform",1),(0,o.c)([o.l],rs.prototype,"resetScale",1),(0,o.c)([o.l],rs.prototype,"resetPosition",1),(0,o.c)([o.l],rs.prototype,"setPosition",1),(0,o.c)([o.l],rs.prototype,"savePosition",1),(0,o.c)([o.l],rs.prototype,"setDefaultScale",1),(0,o.c)([o.l],rs.prototype,"setScaleToDefault",1),(0,o.c)([o.f],rs.prototype,"scale",1),(0,o.c)([o.f],rs.prototype,"zoomLevel",1),(0,o.c)([o.f],rs.prototype,"canDrag",1),(0,o.c)([o.f],rs.prototype,"canZoomOut",1),(0,o.c)([o.f],rs.prototype,"canZoomIn",1),(0,o.c)([o.f],rs.prototype,"position",1),(0,o.c)([o.f],rs.prototype,"scaledSize",1);var ns=[[0,0],[0,1],[1,0],[1,1]],ss=[[0,1,2,3],[2,3,0,1],[1,0,3,2],[3,2,1,0]],as=class{constructor(t,e,i="center",o=!0,r=!1){this.considerRotation=!0,this.considerFlip=!0,this.store=e,this.m="center"===i?as.movePivotTo([.5,.5]):ns,this.considerRotation=o,this.considerFlip=r,this.configStore=t.configStore}static getFlippedEdgeIndex(t,e,i){return ss[(e?1:0)+(i?2:0)][t]}static movePivotTo(t){return ns.map((e=>[e[0]-t[0],e[1]-t[1]]))}get position(){return this.store.position}get size(){return this.store.size}get rotation(){return this.considerRotation?this.store.rotationWRTOutputRotation:0}get flipHorizontally(){return!!this.considerFlip&&this.store.isFlippedHorizontal}get flipVertically(){return!!this.considerFlip&&this.store.isFlippedVertical}get flipCenter(){return this.considerFlip?this.store.flipCenter:null}handleOrigin(t,e,i){const o=as.getFlippedEdgeIndex(t,e,i);return{width:this.m[o][0]*this.size.width,height:this.m[o][1]*this.size.height}}get leftTop(){const{position:t,flipHorizontally:e,flipVertically:i}=this,o=this.handleOrigin(0,e,i);return as.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottom(){const{position:t,flipHorizontally:e,flipVertically:i}=this,o=this.handleOrigin(1,e,i);return as.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightTop(){const{position:t,flipHorizontally:e,flipVertically:i}=this,o=this.handleOrigin(2,e,i);return as.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottom(){const{position:t,flipHorizontally:e,flipVertically:i}=this,o=this.handleOrigin(3,e,i);return as.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftBottomHandle(){const{position:t,flipHorizontally:e,flipVertically:i}=this,o=this.handleOrigin(1,e,i);return o.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,as.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get rightBottomHandle(){const{position:t,flipHorizontally:e,flipVertically:i}=this,o=this.handleOrigin(3,e,i);return o.height+=this.configStore.measurements.canvasControls.sprite.rotateHandle.height,as.coordinatesWithRotation(o,this.rotation,this.flipHorizontally,this.flipVertically,this.flipCenter,t)}get leftMid(){const t=new o.Pa(this.leftTop),e=new o.Pa(this.leftBottom);return t.add(e).divide(2)}get rightMid(){const t=new o.Pa(this.rightTop),e=new o.Pa(this.rightBottom);return t.add(e).divide(2)}},ls=as;ls.coordinatesWithRotation=({width:t,height:e},i,r,n,s,a)=>{let l=t*Math.cos(i)-e*Math.sin(i)+a.x,c=t*Math.sin(i)+e*Math.cos(i)+a.y;return r&&(l=2*s.x-l),n&&(c=2*s.y-c),new o.Pa({x:l,y:c}).rounded},(0,o.c)([o.f],ls.prototype,"position",1),(0,o.c)([o.f],ls.prototype,"size",1),(0,o.c)([o.f],ls.prototype,"rotation",1),(0,o.c)([o.f],ls.prototype,"flipHorizontally",1),(0,o.c)([o.f],ls.prototype,"flipVertically",1),(0,o.c)([o.f],ls.prototype,"flipCenter",1),(0,o.c)([o.f],ls.prototype,"leftTop",1),(0,o.c)([o.f],ls.prototype,"leftBottom",1),(0,o.c)([o.f],ls.prototype,"rightTop",1),(0,o.c)([o.f],ls.prototype,"rightBottom",1),(0,o.c)([o.f],ls.prototype,"leftBottomHandle",1),(0,o.c)([o.f],ls.prototype,"rightBottomHandle",1),(0,o.c)([o.f],ls.prototype,"leftMid",1),(0,o.c)([o.f],ls.prototype,"rightMid",1);var cs=class{constructor(t,e){this.minCropSize=0,this.state=Cn,this.configStore=t.configStore,this.minCropSize=this.configStore.measurements.crop.minSize,this.defaults=e}changeIdentifier(t){this.state.identifier=t;this.state.cropState.get(t)||this.state.cropState.set(t,{...wn})}changeRatio(t){const e=this.state.cropState.get(this.identifier);e&&this.state.cropState.set(this.identifier,{...e,ratio:t})}changeSize(t){const e=this.state.cropState.get(this.identifier);e&&(t.width&&t.width>0&&(e.size.width=Math.round(t.width)),t.height&&t.height>0&&(e.size.height=Math.round(t.height)),this.state.cropState.set(this.identifier,e))}changeHeight(t){const e=this.state.cropState.get(this.identifier);e&&t&&(e.size.height=Math.round(t),this.state.cropState.set(this.identifier,e))}changeWidth(t){const e=this.state.cropState.get(this.identifier);e&&t&&(e.size.width=Math.round(t),this.state.cropState.set(this.identifier,e))}changePositionX(t,e){const i=this.state.cropState.get(this.identifier);return!!(i&&t<=e-this.minCropSize&&t>=0)&&(i.position.x=Math.round(t),this.state.cropState.set(this.identifier,i),!0)}changePositionY(t,e){const i=this.state.cropState.get(this.identifier);return!!(i&&t<=e-this.minCropSize&&t>=0)&&(i.position.y=Math.round(t),this.state.cropState.set(this.identifier,i),!0)}changePosition(t,e){const i=this.state.cropState.get(this.identifier);return!!(i&&t.x<=e.width-this.minCropSize&&t.x>=0&&t.y<=e.height-this.minCropSize&&t.y>=0)&&(i.position.x=Math.round(t.x),i.position.y=Math.round(t.y),this.state.cropState.set(this.identifier,i),!0)}changeLockResolution(t){const e=this.state.cropState.get(this.identifier);e&&(e.lockResolution=void 0!==t?t:!e.lockResolution,this.state.cropState.set(this.identifier,e))}changeForceDimensions(t){const e=this.state.cropState.get(this.identifier);e&&(e.forceDimensions=t,this.state.cropState.set(this.identifier,e))}setRotation(t){this.state.rotationInDegrees=t}resetRotation(){this.state.rotationInDegrees=0}resetOutputRotation(){this.state.outputRotation=0}resetFlip(){this.state.flipHorizontally=!1,this.state.flipVertically=!1}updateFlip({flipHorizontally:t,flipVertically:e}){this.state.flipHorizontally=t,this.state.flipVertically=e}setOutputRotation(t){this.state.outputRotation=t}flipHorizontally(){this.state.flipHorizontally=!this.state.flipHorizontally}flipVertically(){this.state.flipVertically=!this.state.flipVertically}get flipCenter(){const{width:t,height:e}=this.defaults.maxCropMaskSize;return new o.Pa(t/2,e/2)}get isFlippedHorizontal(){return this.state.flipHorizontally}get isFlippedVertical(){return this.state.flipVertically}get identifier(){return this.state.identifier}get height(){return this.selectedCrop?this.selectedCrop.size.height:wn.size.height}get width(){return this.selectedCrop?this.selectedCrop.size.width:wn.size.width}get position(){return this.selectedCrop?this.selectedCrop.position:wn.position}get ratio(){return this.selectedCrop?this.selectedCrop.ratio:wn.ratio}get size(){return this.selectedCrop?this.selectedCrop.size:wn.size}get x(){return this.selectedCrop?this.selectedCrop.position.x:wn.position.x}get y(){return this.selectedCrop?this.selectedCrop.position.y:wn.position.y}get lockResolution(){return this.selectedCrop?this.selectedCrop.lockResolution:wn.lockResolution}get forceDimensions(){return this.selectedCrop?this.selectedCrop.forceDimensions:wn.forceDimensions}get selectedCrop(){return this.state.cropState.get(this.identifier)}get rotationInDegrees(){return this.state.rotationInDegrees}get outputRotation(){return this.state.outputRotation}};(0,o.c)([o.e],cs.prototype,"state",2),(0,o.c)([o.l],cs.prototype,"changeIdentifier",1),(0,o.c)([o.l],cs.prototype,"changeRatio",1),(0,o.c)([o.l],cs.prototype,"changeSize",1),(0,o.c)([o.l],cs.prototype,"changeHeight",1),(0,o.c)([o.l],cs.prototype,"changeWidth",1),(0,o.c)([o.l],cs.prototype,"changePositionX",1),(0,o.c)([o.l],cs.prototype,"changePositionY",1),(0,o.c)([o.l],cs.prototype,"changePosition",1),(0,o.c)([o.l],cs.prototype,"changeLockResolution",1),(0,o.c)([o.l],cs.prototype,"changeForceDimensions",1),(0,o.c)([o.l],cs.prototype,"setRotation",1),(0,o.c)([o.l],cs.prototype,"resetRotation",1),(0,o.c)([o.l],cs.prototype,"resetOutputRotation",1),(0,o.c)([o.l],cs.prototype,"resetFlip",1),(0,o.c)([o.l],cs.prototype,"updateFlip",1),(0,o.c)([o.l],cs.prototype,"setOutputRotation",1),(0,o.c)([o.l],cs.prototype,"flipHorizontally",1),(0,o.c)([o.l],cs.prototype,"flipVertically",1),(0,o.c)([o.f],cs.prototype,"flipCenter",1),(0,o.c)([o.f],cs.prototype,"isFlippedHorizontal",1),(0,o.c)([o.f],cs.prototype,"isFlippedVertical",1),(0,o.c)([o.f],cs.prototype,"identifier",1),(0,o.c)([o.f],cs.prototype,"height",1),(0,o.c)([o.f],cs.prototype,"width",1),(0,o.c)([o.f],cs.prototype,"position",1),(0,o.c)([o.f],cs.prototype,"ratio",1),(0,o.c)([o.f],cs.prototype,"size",1),(0,o.c)([o.f],cs.prototype,"x",1),(0,o.c)([o.f],cs.prototype,"y",1),(0,o.c)([o.f],cs.prototype,"lockResolution",1),(0,o.c)([o.f],cs.prototype,"forceDimensions",1),(0,o.c)([o.f],cs.prototype,"selectedCrop",1),(0,o.c)([o.f],cs.prototype,"rotationInDegrees",1),(0,o.c)([o.f],cs.prototype,"outputRotation",1);var hs="identity",ds=class{constructor(t){this.unRotatedDefaults={cropMaskPosition:{x:0,y:0},scale:1},this.defaultAngle=0,this.dragMode=o.e.box(!1),this.minCropSize=0,this.transformHistory=new class{constructor(t){this.store=t,this.initialState={},this.state={}}init(){this.initialState=this.store.serializableState,this.state={...this.initialState}}trackChanges(){this.state=this.store.serializableState}isEqual(){return(0,o.Va.default)(this.state,this.initialState)}hasChanges(){return!this.isEqual()}}(this),this.defaults={cropMaskPosition:{x:0,y:0},maxCropMaskSize:{width:0,height:0},imageSize:{width:0,height:0},scale:1},this.localOutputSize={width:0,height:0},this.checkIfTransformThumbnailExits=t=>{if(!t.trim())return!1;let e=this.editor.configStore.config.assetBaseUrl;const{length:i}=e;if("/"!==e[i-1]&&(e+="/"),`${e}transform`===t)return!1;const o=new Image;try{return o.src=t,!0}catch(n){return!1}},this.reset=()=>{this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.resetCrop(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0);0!==this.editor.outputContainer.getRotation()&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop(),this.editor.render(),this.trackChanges()},this.changeLocalOutputSize=t=>{this.localOutputSize.height=Math.round(t.height),this.localOutputSize.width=Math.round(t.width),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(t.width),height:Math.round(t.height)})},this.changeDefaultScale=t=>{this.defaults.scale=t},this.changeLocalOutputHeight=t=>{this.localOutputSize.height=Math.round(t)},this.changeLocalOutputWidth=t=>{this.localOutputSize.width=Math.round(t)},this.changeLockResolution=()=>{this.transformStore.changeLockResolution(),this.trackChanges()},this.rotateClockwise=()=>{const t=this.editor.outputContainer.getRotation(),e=this.isFlippedVertical?o.gb:o.hb;this.rotateOutputContainer(e(t))},this.rotateAntiClockwise=()=>{const t=this.editor.outputContainer.getRotation(),e=this.isFlippedVertical?o.hb:o.gb;this.rotateOutputContainer(e(t))},this.flipHorizontally=(t=!0)=>{this.transformStore.flipHorizontally(),this.editor.spriteStore.reverseTextHorizontally(this.transformStore.isFlippedHorizontal),this.transformRender(t),t&&this.trackChanges()},this.flipVertically=(t=!0)=>{this.transformStore.flipVertically(),this.editor.spriteStore.reverseTextVertically(this.transformStore.isFlippedVertical),this.transformRender(t),t&&this.trackChanges()},this.applyDefaultCrop=(t=!1)=>{if("identity"===this.identifier){const{identifier:e}=this.getMatchingItem();this.changeIdentifier(e,t)}},this.updateCropMask=()=>{this.changeIdentifier(this.identifier,!0)},this.onLeftTop=({x:t,y:e})=>{const i=this.getRatio(),r=this.rightBottom,{minCropMaskSize:n,maxCropMaskSize:s}=this,a=Math.min(Math.max(0,t),r.x-n.width),l=Math.min(Math.max(0,e),r.y-n.height),c=r.x-a,h=r.y-l,d={width:Math.max(this.minCropSize,Math.min(c,s.width-a)),height:Math.max(this.minCropSize,Math.min(h,s.height-l))};if("*"===i)this.changePosition({x:a,y:l})&&this.changeCropAndOutputSize(d);else{const t=this.proportionalSize(i,d),e=new o.Pa(r).subtract({x:t.width,y:t.height});this.changePosition(e)&&this.changeCropAndOutputSize(t,i)}},this.onLeftBottom=({x:t,y:e})=>{const i=this.getRatio(),o=this.rightTop,{minCropMaskSize:r,maxCropMaskSize:n}=this,s=Math.min(Math.max(0,t),o.x-r.width),a=Math.max(0,e,o.y+r.height),l=o.x-s,c=a-o.y,h={width:Math.max(1,Math.min(l,n.width-s)),height:Math.max(1,Math.min(c,n.height-o.y))};if("*"===i)this.changePositionX(s)&&this.changeCropAndOutputSize(h);else{const t=this.proportionalSize(i,h);this.changePositionX(o.x-t.width)&&this.changeCropAndOutputSize(t,i)}},this.onRightTop=({x:t,y:e})=>{const i=this.getRatio(),o=this.leftBottom,{minCropMaskSize:r,maxCropMaskSize:n}=this,s=Math.max(0,t,o.x+r.width),a=Math.min(Math.max(0,e),o.y-r.height),l=s-o.x,c=o.y-a,h={width:Math.max(1,Math.min(l,n.width-o.x)),height:Math.max(1,Math.min(c,n.height-a))};if("*"===i)this.changePositionY(a)&&this.changeCropAndOutputSize(h);else{const t=this.proportionalSize(i,h);this.changePositionY(o.y-t.height)&&this.changeCropAndOutputSize(t,i)}},this.onRightBottom=({x:t,y:e})=>{const i=this.getRatio(),o=this.leftTop,{minCropMaskSize:r,maxCropMaskSize:n}=this,s=Math.max(0,t,o.x+r.width),a=Math.max(0,e,o.y+r.height),l=s-o.x,c=a-o.y,h={width:Math.max(1,Math.min(l,n.width-o.x)),height:Math.max(1,Math.min(c,n.height-o.y))};if("*"===i)this.changeCropAndOutputSize(h);else{const t=this.proportionalSize(i,h);this.changeCropAndOutputSize(t,i)}},this.onPixelWidth=t=>{const e=JSON.stringify((0,o.p)(this.localOutputSize)),i=this.entityManager.items.find((t=>t.identifier===this.identifier)),r=this.defaults.imageSize;if(i&&i.ratio){let o=t,n=this.localOutputSize.height,{ratio:s}=i;if("*"===s&&this.lockResolution&&(s=this.localOutputSize.width/this.localOutputSize.height),"*"!==s||this.lockResolution){const t=ds.placeCropMask(s,r);o=Math.max(Math.min(o,t.width),this.minCropSize),n=o/s,this.changeLocalOutputSize({height:n,width:o})}else o=Math.max(Math.min(t,r.width),this.minCropSize),this.changeLocalOutputWidth(o),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(o),height:Math.round(n)});return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(e)),Math.round(o)}return t},this.onPixelHeight=t=>{const e=JSON.stringify((0,o.p)(this.localOutputSize)),i=this.entityManager.items.find((t=>t.identifier===this.identifier)),r=this.defaults.imageSize;if(i&&i.ratio){let o=t,n=this.localOutputSize.width,{ratio:s}=i;if("*"===s&&this.lockResolution&&(s=this.localOutputSize.width/this.localOutputSize.height),"*"!==s||this.lockResolution){const t=ds.placeCropMask(s,r);o=Math.max(Math.min(o,t.height),this.minCropSize),n=o*s,this.changeLocalOutputSize({height:o,width:n})}else o=Math.max(Math.min(t,r.height),this.minCropSize),this.changeLocalOutputHeight(o),this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(n),height:Math.round(o)});return this.lockResolution||this.updatePreviewSizeWRTImageSize(),this.checkAndAddSnapshot(JSON.parse(e)),Math.round(o)}return t},this.setFrameOpacity=t=>{this.transformations.setFrameOpacity(t)},this.setOverlayOpacity=t=>{this.transformations.setOverlayOpacity(t)},this.closestRatioReducer=t=>(e,i)=>null===i||Math.abs(t-e.ratio)<Math.abs(t-i.ratio)?-1:1,this.closestDimensionsReducer=t=>(e,i)=>{if(null===i)return-1;const o=Math.abs(e.dimensions.x/e.dimensions.y),r=Math.abs(i.dimensions.x/i.dimensions.y);return o===r?e.dimensions.x*e.dimensions.y>i.dimensions.x*i.dimensions.y?-1:1:Math.abs(t-o)<Math.abs(t-r)?-1:1},this.getMatchingItem=()=>{const t=this.entityManager.items.findIndex((t=>"imgly_transform_common_custom"===t.identifier));if(-1!==t)return this.entityManager.items[t];const e=this.entityManager.items.findIndex((t=>"*"===t.ratio));if(-1!==e)return this.entityManager.items[e];const i=(0,o.p)(this.editor.outputContainer.getResolution()),r=Math.abs(i.width/i.height),[n]=this.entityManager.items.filter((t=>t.ratio&&"number"===typeof t.ratio)).sort(this.closestRatioReducer(r)),[s]=this.entityManager.items.filter((t=>t.dimensions&&!t.ratio)).sort(this.closestDimensionsReducer(r));if(!n||!s||!n.ratio&&!s.dimensions)return this.entityManager.items[0];if(!s||!s.dimensions)return n;if(!n||!n.ratio)return s;const a=Math.abs(s.dimensions.x/s.dimensions.y);return a===n.ratio||Math.abs(r-n.ratio)<Math.abs(r-a)?n:s},this.getTransform=t=>{let e=this.entityManager.items.find((e=>e.identifier===t));return e||(e=this.getMatchingItem()),e},this.editor=t,this.selectedCategory=hs,this.transformStore=new cs(t,this.defaults),this.transformations=new class{constructor(t){this.transforms={output:JSON.stringify(o.jb.IDENTITY),preview:JSON.stringify(o.jb.IDENTITY)},this.setFrameOpacity=t=>{this.frameOpacity=t,this.entered&&"identity"!==this.editor.frameToolStore.identifier&&this.editor.frameToolStore.changeOpacity(0)},this.setOverlayOpacity=t=>{this.overlayOpacity=t,this.entered&&"identity"!==this.editor.overlayToolStore.identifier&&this.editor.overlayToolStore.changeOpacity(0)},this.editor=t,this.overlayOpacity=0,this.frameOpacity=0,this.entered=!1}onLeave(){const{flipHorizontally:t,flipVertically:e,rotation:i,outputRotation:r}=this.transformToolStore.rotateFlipState;this.entered=!1,"identity"!==this.editor.overlayToolStore.identifier&&this.editor.overlayToolStore.changeOpacity(this.overlayOpacity),"identity"!==this.editor.frameToolStore.identifier&&this.editor.frameToolStore.changeOpacity(this.frameOpacity),this.editor.engine.setWatermarkOpacity(1);const n=this.editor.previewToWorld(new o.Pa(this.transformToolStore.leftTopRespectFlip).add(new o.Pa(this.transformToolStore.rightBottomRespectFlip)).divide(2).add(new o.Pa(this.transformToolStore.unRotatedDefaults.cropMaskPosition)),!0),s=this.engineMediator.preview.container,{outputContainer:a}=this.editor;a.setResolution((0,o.p)(this.transformToolStore.localOutputImageSize)),a.setData({flipVertically:e,flipHorizontally:t});const l=s.getScale();this.editor.overlayToolStore.correctOverlayFlip(),this.saveTransforms();let c=1;if(this.transformToolStore.lockResolution){const{cropMaskSize:t,defaultImageSize:e}=this.transformToolStore,i=this.transformToolStore.maxCropMaskSize;t.height,e.height,i.height,c=t.width*e.width/i.width/this.transformToolStore.localOutputImageSize.width}const h=c/(Math.abs(l.x)/this.transformToolStore.defaultScale),d={x:h,y:h},p=-(i-r);a.setTransform({scale:d,position:n,rotation:p}),this.editor.engineMediator.preview.updateTransform(0,!1),this.editor.scale.setInitialTransform(),this.editor.spriteStore.updateCanvasControls(),this.editor.focusToolStore.updateCanvasControls()}resetTransforms(t){this.transforms=t}onEnter(){this.entered=!0,"identity"!==this.editor.overlayToolStore.identifier&&(this.overlayOpacity=this.editor.overlayToolStore.opacity,this.editor.overlayToolStore.changeOpacity(0)),"identity"!==this.editor.frameToolStore.identifier&&(this.frameOpacity=this.editor.frameToolStore.opacity,this.editor.frameToolStore.changeOpacity(0)),this.editor.engine.setWatermarkOpacity(0),this.editor.scale.setScaleToDefault();const t=this.engineMediator.preview.container,{outputContainer:e}=this.editor,i=JSON.parse(this.transforms.preview);e.setResolution((0,o.p)(this.transformToolStore.defaultImageSize)),t.setTransform(i),e.setTransform(JSON.parse(this.transforms.output));const r=i.scale;e.setData({flipVertically:!1,flipHorizontally:!1}),this.transformToolStore.transformStore.updateFlip({flipVertically:r.y<0,flipHorizontally:r.x<0}),this.engineMediator.preview.savePreviewTransform(i);const{scale:n}=this.engineMediator.preview.calculateTransform();this.editor.scale.setInitialTransform(n.x)}rotateOutputContainer(t,e=!0){const{width:i,height:r}=this.editor.engineMediator.image.container.getBounds(),n=(0,o.ib)(t)?{width:r,height:i}:{width:i,height:r};this.editor.outputContainer.rotate(t,n),this.transformToolStore.transformStore.setOutputRotation(this.editor.outputContainer.getRotation());const{rotation:s}=this.transformToolStore.rotateFlipState;this.engineMediator.preview.updateTransform(s),(0,o.m)((()=>{this.editor.scale.setInitialTransform();const t=this.getScaleWithFlip(s);this.engineMediator.preview.container.setScale(t),this.transformToolStore.setCropDefaults(!0),this.transformToolStore.updateCropMask()})),e&&this.editor.render()}applyPreviewTransform(){const{rotation:t,flipHorizontally:e,flipVertically:i}=this.transformToolStore.rotateFlipState,r=this.editor.scale.getPositionWithOffset(),n=this.getScaleWithFlip();let s=t;e&&(s=(0,o.rb)(s)),i&&(s=(0,o.rb)(s));const a={position:r,rotation:s,scale:n};this.engineMediator.preview.savePreviewTransform(a),this.engineMediator.preview.container.setTransform(a)}getScaleWithFlip(t=this.transformToolStore.rotateFlipState.rotation){const{flipHorizontally:e,flipVertically:i}=this.transformToolStore.rotateFlipState,o=e?-1:1,r=i?-1:1,n=this.editor.scale.calculateScale(t);return{x:n*o,y:n*r}}saveTransforms(){const t=JSON.stringify(this.engineMediator.preview.container.getTransform()),e=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:t,output:e}}saveTransformsBasedOnFlip(){const t=this.engineMediator.preview.container.getTransform(),{scale:e}=t,{flipVertically:i,flipHorizontally:o}=this.editor.outputContainer.getData(),r=JSON.stringify(this.editor.outputContainer.getTransform());this.transforms={preview:JSON.stringify({...t,scale:{x:o?-e.x:e.x,y:i?-e.y:e.y}}),output:r}}get engineMediator(){return this.editor.engineMediator}get transformToolStore(){return this.editor.transformToolStore}}(t);const{enableRotation:e,enableFlip:i,...r}=this.config,n=this.editor.assetProvider.getAssets("transform");this.entityManager=new Dr(n,{...r,locale:{...this.locale.items,...this.locale.categories},getAssetPath:this.editor.getAssetPath("transform")}),this.rect=new ls(this.editor,this.transformStore,"topLeft",!1,!1),this.rectForUi=new ls(this.editor,this.transformStore,"topLeft",!1,!0),this.minCropSize=this.editor.configStore.measurements.crop.minSize}static inRadians(t){return t*Math.PI/180}static placeCropMask(t,e){if(e.height*t>e.width){return{height:e.width/t,width:e.width,yChanged:!0}}const i=e.height*t;return{height:e.height,width:i,yChanged:!1}}changeIdentifier(t,e=!1){this.transformStore.changeIdentifier(t);const i=this.getCropMask(t,this.defaults.imageSize);i&&(this.transformStore.changeRatio(i.ratio),this.changeLocalOutputSize(i),this.updatePreviewSizeWRTImageSize(),void 0!==i.yChanged&&this.updateInitialCropMaskPosition(i.yChanged),i.dimensions&&this.changeLocalOutputSize({width:i.dimensions.x,height:i.dimensions.y}),e&&this.trackChanges())}setDragMode(t){this.dragMode.set(t)}getCropMask(t,e){const i=this.getTransform(t);if(i){const{ratio:t,forceDimensions:o,lockDimensions:r,dimensions:n=null}=i;if(o&&this.transformStore.changeForceDimensions(o),r&&this.transformStore.changeLockResolution(r),t)return"*"===t?(this.changePosition({x:0,y:0}),{...e,yChanged:void 0,ratio:"*",dimensions:n}):{...ds.placeCropMask(i.ratio,e),ratio:i.ratio,dimensions:n};{const{x:t,y:o}=i.dimensions;return{...ds.placeCropMask(t/o,e),ratio:null,dimensions:n}}}return null}setCropDefaults(t=!1){const e=this.editor.outputContainer.getResolution();this.setDefaultImageSize(e);const i=this.editor.getPreviewSize(),{position:o}=this.editor.engineMediator.preview.previewTransformWithoutDpr;this.setMaxCropSize(i),this.setDefaultCropPosition({x:o.x-i.width/2,y:o.y-i.height/2}),this.changeDefaultScale(this.editor.scale.defaultScale),t||(this.unRotatedDefaults.cropMaskPosition=this.defaultCropMaskPosition,this.unRotatedDefaults.scale=this.defaultScale)}setDefaultImageSize(t){this.defaults.imageSize={...(0,o.p)(t)},this.lockResolution||(this.localOutputSize={...(0,o.p)(t)})}setMaxCropSize(t){this.defaults.maxCropMaskSize.height=t.height,this.defaults.maxCropMaskSize.width=t.width}setDefaultCropPosition(t){this.defaults.cropMaskPosition.x=t.x,this.defaults.cropMaskPosition.y=t.y}resetCrop(){this.state.cropState.clear(),this.transformStore.changeIdentifier("identity")}toggleCategorySelection(t){this.selectedCategory=this.selectedCategory===t?hs:t}pureReset(){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.editor.spriteStore.correctTextFlip(),this.editor.overlayToolStore.correctOverlayFlip(),this.setDefaultAngle(0),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();const t=JSON.stringify(this.engineMediator.preview.container.getTransform()),e=JSON.stringify(this.editor.outputContainer.getTransform());this.transformations.resetTransforms({preview:t,output:e})}changePosition(t){return this.transformStore.changePosition(t,this.defaults.maxCropMaskSize)}changePositionX(t){return this.transformStore.changePositionX(t,this.defaults.maxCropMaskSize.width)}changePositionY(t){return this.transformStore.changePositionY(t,this.defaults.maxCropMaskSize.height)}changeCropAndOutputSize({width:t,height:e},i,o=!0){if(this.transformStore.changeWidth(t),this.transformStore.changeHeight(e),!this.lockResolution){const{height:r,width:n}=this.defaults.maxCropMaskSize,{height:s,width:a}=this.defaults.imageSize;let l=s/r*e;const c=a/n*t;i&&(l=c/i),o&&this.editor.configStore.events.onCropDimensionsChanged({width:Math.round(c),height:Math.round(l)}),e>=this.minCropSize&&this.changeLocalOutputHeight(l),t>=this.minCropSize&&this.changeLocalOutputWidth(c)}}transformRender(t=!0){this.transformations.applyPreviewTransform(),t&&this.editor.render()}addSnapshot(){this.transformHistory.isEqual()||this.editor.addSnapshot({[o.E.TRANSFORM]:this.serializableState},Cr.EDIT,"Transform edit")}trackChanges(){this.transformHistory.trackChanges()}get serializableState(){const{flipHorizontally:t,flipVertically:e}=this.rotateFlipState,{identifier:i,rotationInDegrees:r}=this,n=(0,o.bb)(r),s=(0,o.fb)((0,o.cb)(this.editor.engineMediator.output.container.getRotation())+r),{start:a,end:l}=this.convertUIToOperationOptions(n,s);return{flipHorizontally:t,flipVertically:e,rotation:n,start:a,end:l,identifier:i,outputRotation:s}}getStartEndForOperation(t){const{leftTop:e,rightBottom:i,maxCropMaskSize:o}=this,r=e.y,n=e.x,s=i.x,a=i.y;switch(t){case 270:return{leftTop:{x:o.height-a,y:n},rightBottom:{x:o.height-r,y:s}};case 180:return{leftTop:{x:o.width-s,y:o.height-a},rightBottom:{x:o.width-n,y:o.height-r}};case 90:return{leftTop:{x:r,y:o.width-s},rightBottom:{x:a,y:o.width-n}};default:return{leftTop:{x:n,y:r},rightBottom:{x:s,y:a}}}}getStartEndForUI(t,e,i){const{maxCropMaskSize:o}=this,r=e.y,n=e.x,s=i.x,a=i.y;switch(t){case 90:return{leftTop:{x:o.width-a,y:n},rightBottom:{x:o.width-r,y:s}};case 180:return{leftTop:{x:o.width-s,y:o.height-a},rightBottom:{x:o.width-n,y:o.height-r}};case 270:return{leftTop:{x:r,y:o.height-s},rightBottom:{x:a,y:o.height-n}};default:return{leftTop:{x:n,y:r},rightBottom:{x:s,y:a}}}}convertOperationOptionsToUI({start:t,end:e,rotation:i,outputRotation:r}){const n=90===r||270===r,s=n?o.Pa.fromSize(this.defaultImageSize).swapped:o.Pa.fromSize(this.defaultImageSize),a=Math.cos(i),l=Math.sin(i),c=this.calculateScale(i),h=new o.Pa(Math.min(t.x,e.x),Math.min(t.y,e.y)),d=new o.Pa(Math.max(t.x,e.x),Math.max(t.y,e.y)).subtract(h).divide(2),p=h.add(d).multiply(s).subtract(s.multiply(.5)),u=new o.Pa(p.x*a-p.y*l,p.x*l+p.y*a).multiply(c),g=s.multiply(.5).add(u).divide(s),m=g.subtract(d.multiply(c)),f=g.add(d.multiply(c)),y=n?o.Pa.fromSize(this.maxCropMaskSize).swapped:o.Pa.fromSize(this.maxCropMaskSize),b=m.multiply(y),S=f.multiply(y),{leftTop:v,rightBottom:x}=this.getStartEndForUI(r,b,S);return{start:new o.Pa(v),end:new o.Pa(x)}}convertUIToOperationOptions(t,e){const i=90===e||270===e,r=i?o.Pa.fromSize(this.defaultImageSize).swapped:o.Pa.fromSize(this.defaultImageSize),n=i?o.Pa.fromSize(this.maxCropMaskSize).swapped:o.Pa.fromSize(this.maxCropMaskSize),s=Math.cos(-t),a=Math.sin(-t),l=this.calculateScale(t,i),{leftTop:c,rightBottom:h}=this.getStartEndForOperation(e),d=new o.Pa(c).divide(n),p=new o.Pa(h).divide(n).subtract(d).divide(2),u=d.add(p).multiply(r).subtract(r.multiply(.5)),g=new o.Pa(u.x*s-u.y*a,u.x*a+u.y*s).divide(l),m=r.multiply(.5).add(g).divide(r);return{start:m.subtract(p.divide(l)),end:m.add(p.divide(l))}}calculateScale(t,e=!1){const i=e?o.Pa.fromSize(this.defaultImageSize).swapped:o.Pa.fromSize(this.defaultImageSize),r=new o.Pa(Math.abs(i.x*Math.cos(t))+Math.abs(i.y*Math.sin(t)),Math.abs(i.x*Math.sin(t))+Math.abs(i.y*Math.cos(t))),n=i.subtract(r.clone()).divide(2).abs;return n.y>n.x?2*n.y/i.y+1:2*n.x/i.x+1}updateStateFromSerialization(t){this.transformStore.resetRotation(),this.transformStore.resetOutputRotation(),this.transformStore.resetFlip(),this.setDefaultAngle(0),0!==this.editor.outputContainer.getRotation()&&this.engineMediator.output.applyNewImageTransform(),this.engineMediator.output.container.setData({flipHorizontally:!1,flipVertically:!1}),this.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.setCropDefaults(),this.applyInitialCrop();const e=Math.round((0,o.cb)(t.rotation));if(this.transformStore.setRotation(e>180?e-360:e),this.transformations.rotateOutputContainer((0,o.bb)((0,o.fb)(t.outputRotation||o.db.Top))),t.identifier&&this.transformStore.changeIdentifier(t.identifier),t.start&&t.end){0!==t.end.x&&0!==t.end.y||(t.end.x=1,t.end.y=1);const{start:e,end:i}=this.convertOperationOptionsToUI({start:new o.Pa(t.start),end:new o.Pa(t.end),rotation:t.rotation,outputRotation:t.outputRotation});this.changePositionX(e.x),this.changePositionY(e.y);const r=i.x-e.x,n=i.y-e.y;this.transformStore.changeSize({width:r,height:n});const{maxCropMaskSize:s,imageSize:a}=this.defaults,l={height:n*a.height/s.height,width:r*a.width/s.width};this.changeLocalOutputSize(l)}t.flipHorizontally&&this.flipHorizontally(!1),t.flipVertically&&this.flipVertically(!1),this.editor.overlayToolStore.correctOverlayFlip()}setDefaultAngle(t){this.defaultAngle=t}updateCanvasControls(t){const e=(0,o.p)(this.cropMaskPosition),i=(0,o.p)(this.cropMaskSize),r=(0,o.p)(this.defaults.maxCropMaskSize);this.changeCropAndOutputSize({height:r.height*i.height/t.height,width:r.width*i.width/t.width},void 0,!1),this.changePosition({y:r.height*e.y/t.height,x:r.width*e.x/t.width})}onLeave(){this.transformations.onLeave()}onEnter(){this.transformations.onEnter(),this.transformHistory.init()}saveTransforms(){this.transformations.saveTransforms()}saveTransformsBasedOnFlip(){this.transformations.saveTransformsBasedOnFlip()}setRotation(t){this.transformStore.setRotation(t),this.transformRender()}async rotateOutputContainer(t,e=!0){this.setDragMode(!0),this.transformations.rotateOutputContainer(t,e),await this.editor.wait(),this.setDragMode(!1)}applyInitialCrop(){const{identifier:t}=this.getMatchingItem();this.changeIdentifier(t,!1)}clickableCanvas(t){this.editor.clickableCanvas(t)}proportionalSize(t,e,i=this.defaults.maxCropMaskSize,o=this.minCropSize){let r=e.height*t,{height:n}=e;return(r>i.width||r<o||n<o)&&(r=e.width,n=e.width/t),{width:Math.round(r),height:Math.round(n)}}checkAndAddSnapshot(t){const e=(0,o.p)(this.localOutputSize);t.width===e.width&&t.height===e.height||this.trackChanges()}updateInitialCropMaskPosition(t){const{cropMaskSize:e}=this,i=this.defaults.maxCropMaskSize;t?this.changePosition({x:0,y:Math.abs(i.height-e.height)/2}):this.changePosition({x:Math.abs(i.width-e.width)/2,y:0})}updatePreviewSizeWRTImageSize(){const t=(0,o.p)(this.localOutputSize),e=(0,o.p)(this.defaults.imageSize),i=(0,o.p)(this.defaults.maxCropMaskSize),r={height:i.height*t.height/e.height,width:i.width*t.width/e.width};this.transformStore.changeSize(r)}getScaleWithFlip(t=this.rotateFlipState.rotation){return this.transformations.getScaleWithFlip(t)}get cropState(){return this.transformStore.selectedCrop}get identifier(){return this.transformStore.identifier}get ratio(){return this.transformStore.ratio}get height(){return this.transformStore.height}get width(){return this.transformStore.width}get localOutputImageSize(){return this.localOutputSize}get localOutputHeight(){return this.localOutputSize.height}get localOutputWidth(){return this.localOutputSize.width}get lockResolution(){return this.transformStore.lockResolution}get forceDimensions(){return this.transformStore.forceDimensions}get rotationInDegrees(){return this.transformStore.rotationInDegrees}get outputRotation(){return this.transformStore.outputRotation}get isDragMode(){return this.dragMode.get()}get rotateFlipState(){const{flipHorizontally:t,flipVertically:e,rotationInDegrees:i,outputRotation:o}=this.transformStore.state;return{flipHorizontally:t,flipVertically:e,rotation:ds.inRadians(i),outputRotation:o}}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.entityManager.categories}get items(){return this.entityManager.items}get config(){return this.editor.configStore.config[o.E.TRANSFORM]}get locale(){return this.editor.configStore.locale[o.E.TRANSFORM]}get isOptionSelected(){return"identity"!==this.identifier}get leftTop(){return this.rect.leftTop}get leftBottom(){return this.rect.leftBottom}get rightTop(){return this.rect.rightTop}get rightBottom(){return this.rect.rightBottom}get isFlippedHorizontal(){return this.transformStore.isFlippedHorizontal}get isFlippedVertical(){return this.transformStore.isFlippedVertical}get leftTopRespectFlip(){return this.rectForUi.leftTop}get leftBottomRespectFlip(){return this.rectForUi.leftBottom}get rightTopRespectFlip(){return this.rectForUi.rightTop}get rightBottomRespectFlip(){return this.rectForUi.rightBottom}get cropMaskPosition(){return this.transformStore.position}get cropMaskSize(){return this.transformStore.size}get state(){return this.transformStore.state}get defaultImageSize(){return this.defaults.imageSize}get maxCropMaskSize(){return this.defaults.maxCropMaskSize}get minCropMaskSize(){const t=this.getRatio();return"*"===t||1===t?{width:this.minCropSize,height:this.minCropSize}:t>1?{width:this.minCropSize*t,height:this.minCropSize}:{width:this.minCropSize,height:this.minCropSize*t}}get defaultCropMaskPosition(){return this.defaults.cropMaskPosition}get defaultScale(){return this.defaults.scale}get engineMediator(){return this.editor.engineMediator}getRatio(){const t=this.getTransform(this.identifier);if(t){if(Object.prototype.hasOwnProperty.call(t,"ratio"))return this.lockResolution?this.localOutputWidth/this.localOutputHeight:t.ratio;const{x:e,y:i}=t.dimensions;return e/i}return"*"}},ps=ds;(0,o.c)([o.e],ps.prototype,"selectedCategory",2),(0,o.c)([o.e],ps.prototype,"defaults",2),(0,o.c)([o.e],ps.prototype,"localOutputSize",2),(0,o.c)([o.l],ps.prototype,"changeIdentifier",1),(0,o.c)([o.l],ps.prototype,"setDragMode",1),(0,o.c)([o.l],ps.prototype,"setCropDefaults",1),(0,o.c)([o.l],ps.prototype,"setDefaultImageSize",1),(0,o.c)([o.l],ps.prototype,"setMaxCropSize",1),(0,o.c)([o.l],ps.prototype,"setDefaultCropPosition",1),(0,o.c)([o.l],ps.prototype,"resetCrop",1),(0,o.c)([o.l],ps.prototype,"toggleCategorySelection",1),(0,o.c)([o.l],ps.prototype,"pureReset",1),(0,o.c)([o.l],ps.prototype,"reset",2),(0,o.c)([o.l],ps.prototype,"changePosition",1),(0,o.c)([o.l],ps.prototype,"changePositionX",1),(0,o.c)([o.l],ps.prototype,"changePositionY",1),(0,o.c)([o.l],ps.prototype,"changeCropAndOutputSize",1),(0,o.c)([o.l],ps.prototype,"onLeave",1),(0,o.c)([o.l],ps.prototype,"onEnter",1),(0,o.c)([o.l],ps.prototype,"changeLocalOutputSize",2),(0,o.c)([o.l],ps.prototype,"changeDefaultScale",2),(0,o.c)([o.l],ps.prototype,"changeLocalOutputHeight",2),(0,o.c)([o.l],ps.prototype,"changeLocalOutputWidth",2),(0,o.c)([o.l],ps.prototype,"changeLockResolution",2),(0,o.c)([o.l],ps.prototype,"setRotation",1),(0,o.c)([o.l],ps.prototype,"rotateClockwise",2),(0,o.c)([o.l],ps.prototype,"rotateAntiClockwise",2),(0,o.c)([o.l],ps.prototype,"rotateOutputContainer",1),(0,o.c)([o.l],ps.prototype,"flipHorizontally",2),(0,o.c)([o.l],ps.prototype,"flipVertically",2),(0,o.c)([o.l],ps.prototype,"applyDefaultCrop",2),(0,o.c)([o.l],ps.prototype,"applyInitialCrop",1),(0,o.c)([o.l],ps.prototype,"updateCropMask",2),(0,o.c)([o.l],ps.prototype,"clickableCanvas",1),(0,o.c)([o.l],ps.prototype,"onLeftTop",2),(0,o.c)([o.l],ps.prototype,"onLeftBottom",2),(0,o.c)([o.l],ps.prototype,"onRightTop",2),(0,o.c)([o.l],ps.prototype,"onRightBottom",2),(0,o.c)([o.l],ps.prototype,"proportionalSize",1),(0,o.c)([o.l],ps.prototype,"onPixelWidth",2),(0,o.c)([o.l],ps.prototype,"onPixelHeight",2),(0,o.c)([o.l],ps.prototype,"updateInitialCropMaskPosition",1),(0,o.c)([o.l],ps.prototype,"updatePreviewSizeWRTImageSize",1),(0,o.c)([o.f],ps.prototype,"cropState",1),(0,o.c)([o.f],ps.prototype,"identifier",1),(0,o.c)([o.f],ps.prototype,"ratio",1),(0,o.c)([o.f],ps.prototype,"height",1),(0,o.c)([o.f],ps.prototype,"width",1),(0,o.c)([o.f],ps.prototype,"localOutputImageSize",1),(0,o.c)([o.f],ps.prototype,"localOutputHeight",1),(0,o.c)([o.f],ps.prototype,"localOutputWidth",1),(0,o.c)([o.f],ps.prototype,"lockResolution",1),(0,o.c)([o.f],ps.prototype,"forceDimensions",1),(0,o.c)([o.f],ps.prototype,"rotationInDegrees",1),(0,o.c)([o.f],ps.prototype,"outputRotation",1),(0,o.c)([o.f],ps.prototype,"isDragMode",1),(0,o.c)([o.f],ps.prototype,"rotateFlipState",1),(0,o.c)([o.f],ps.prototype,"selectedCategoryIdentifier",1),(0,o.c)([o.f],ps.prototype,"categories",1),(0,o.c)([o.f],ps.prototype,"items",1),(0,o.c)([o.f],ps.prototype,"config",1),(0,o.c)([o.f],ps.prototype,"locale",1),(0,o.c)([o.f],ps.prototype,"isOptionSelected",1),(0,o.c)([o.f],ps.prototype,"leftTop",1),(0,o.c)([o.f],ps.prototype,"leftBottom",1),(0,o.c)([o.f],ps.prototype,"rightTop",1),(0,o.c)([o.f],ps.prototype,"rightBottom",1),(0,o.c)([o.f],ps.prototype,"isFlippedHorizontal",1),(0,o.c)([o.f],ps.prototype,"isFlippedVertical",1),(0,o.c)([o.f],ps.prototype,"leftTopRespectFlip",1),(0,o.c)([o.f],ps.prototype,"leftBottomRespectFlip",1),(0,o.c)([o.f],ps.prototype,"rightTopRespectFlip",1),(0,o.c)([o.f],ps.prototype,"rightBottomRespectFlip",1),(0,o.c)([o.f],ps.prototype,"cropMaskPosition",1),(0,o.c)([o.f],ps.prototype,"cropMaskSize",1),(0,o.c)([o.f],ps.prototype,"state",1),(0,o.c)([o.f],ps.prototype,"defaultImageSize",1),(0,o.c)([o.f],ps.prototype,"maxCropMaskSize",1),(0,o.c)([o.f],ps.prototype,"minCropMaskSize",1),(0,o.c)([o.f],ps.prototype,"defaultCropMaskPosition",1),(0,o.c)([o.f],ps.prototype,"defaultScale",1);var us=(0,o.b)((0,o._a)()),gs={},ms="none",fs={x:0,y:0},ys=class{constructor(t){this.state=o.e.map(gs),this.selectedId=o.e.box(ms),this.editMode=o.e.box(!1),this.dragMode=o.e.box(!1),this.minLength=0,this.counter=0,this.addSticker=async(t,e=!0)=>{await this.addStickerAsync(t,e)},this.addStickerAsync=async({spriteId:t,state:e,transform:i},r=!0)=>new Promise(((n,s)=>{i=this.getInitialTransform(i);const{identifier:a}=e,l=this.editor.orderHelper.addSprite(a);this.editor.engine.addStickerFromAssets(a,this.editor.engineMediator.image.container,l).then((async s=>{t&&s.setData({id:t});const l=s.getID();this.container[l]=s,this.editor.orderHelper.renameSprite(a,l);const c=this.getSize(l);let h;if(c.width*=s.getScale().x,c.height*=s.getScale().y,s.setPivot(.5,.5),i.scale)h=i.scale;else if(i.size)h={x:i.size.width/c.width,y:i.size.height/c.height};else{const t=.4*this.editor.shortestOutputSide,e=ys.magnitude(t)/ys.sizeMagnitude(s.getSizeInWorldSpace());h={x:e,y:e}}const{flipHorizontally:d,flipVertically:p}=this.editor.outputContainer.getData();s.setFlipHorizontally(d),s.setFlipVertically(p),s.setTransform({position:i.position,scale:h,rotation:i.rotation}),void 0!==e.flipHorizontally&&s.setFlipHorizontally(e.flipHorizontally!==d),void 0!==e.flipVertically&&s.setFlipVertically(e.flipVertically!==p),this.setContainerProperties(l,{...e});const u=s.getData();this.setInitialSpriteState(l,o.E.STICKER),this.stickerToolStore.setState(l,{...u,identifier:a}),await this.editor.renderPromise(),r&&(this.setId(l),this.addSnapshot(Cr.ADD,this.stickerLocale.add)),n()})).catch((t=>{console.error(t),s()}))})),this.addText=async(t,e=!0)=>{await this.addTextAsync(t,e)},this.addTextAsync=({spriteId:t,state:e,transform:i},r=!0)=>new Promise(((n,s)=>{i=this.getInitialTransform(i);const a=this.editor.orderHelper.addSprite(e.identifier),l=this.editor.shortestOutputSide,c={fontIdentifier:e.identifier,text:e.text,width:e.width||.6*l,fontSize:e.fontSize||.1*l,lineHeight:e.lineHeight,alignment:e.alignment,textColor:e.textColor,backgroundColor:e.backgroundColor};this.editor.engine.addTextWithFontLoading(c,this.editor.engineMediator.image.container,a).then((async s=>{t&&s.setData({id:t});const a=s.getID();this.container[a]=s,this.editor.orderHelper.renameSprite(e.identifier,a);const{flipHorizontally:l,flipVertically:c}=this.editor.outputContainer.getData();s.setFlipHorizontally(l),s.setFlipVertically(c),s.setPivot(.5,.5),s.setPosition(i.position),s.setRotation(i.rotation),this.setInitialSpriteState(a,o.E.TEXT);const h=s.getData();this.textToolStore.setState(a,{...h}),await this.editor.renderPromise(),r&&(this.setId(a),this.addSnapshot(Cr.ADD,this.textLocale.add)),n()})).catch((t=>{console.error(t),s()}))})),this.addTextDesign=async(t,e=!0,i=!1)=>{await this.addTextDesignAsync(t,e,i)},this.addTextDesignAsync=({spriteId:t,state:e,transform:i},r=!0,n=!1)=>new Promise(((s,a)=>{i=this.getInitialTransform(i);const l=this.editor.orderHelper.addSprite(e.identifier),c=this.editor.shortestOutputSide,h={width:e.width||.6*c,text:e.text,color:e.color,inverted:e.isInverted,seed:e.seed,padding:e.padding};this.editor.engine.addTextDesignAsync(e.identifier,h,this.editor.engineMediator.image.container,l).then((async a=>{t&&(n&&(this.pureRemoveSprite(t),this.textDesignToolStore.state.delete(t)),a.setData({id:t}));const l=a.getID();this.container[l]=a,this.editor.orderHelper.renameSprite(e.identifier,l);const{flipHorizontally:c,flipVertically:h}=this.editor.outputContainer.getData();a.setFlipHorizontally(c),a.setFlipVertically(h),a.setPivot(.5,.5),a.setPosition(i.position),a.setRotation(i.rotation),this.setInitialSpriteState(l,o.E.TEXT_DESIGN);const d=a.getData();this.textDesignToolStore.setState(l,{...d,identifier:e.identifier}),await this.editor.renderPromise(),r&&(this.setId(l),this.addSnapshot(Cr.ADD,this.textDesignLocale.add)),s()})).catch((t=>{console.error(t),a()}))})),this.spriteLocalTransform=()=>({position:this.editor.previewToOutput(this.position),size:this.size,rotation:this.rotation}),this.clickableCanvas=t=>{this.editor.clickableCanvas(t)},this.setContainerProperties=(t,e,i=!1)=>{this.container[t].setData(e),i&&this.updatePositionAndSize(),this.editor.render()},this.setContainerPosition=(t,e)=>{this.container[t].setPosition(e)},this.pureRemoveSprite=t=>{this.editor.engine.removeContainer(this.container[t]);return-1===this.container[t].getIndexInParent()&&(delete this.container[t],this.state.delete(t),this.editor.orderHelper.removeSprite(t),!0)},this.deleteSprite=(t=this.id)=>{const e=this.state.get(t);e.tool===o.E.STICKER?this.stickerToolStore.delete():e.tool===o.E.TEXT?this.textToolStore.delete():e.tool===o.E.TEXT_DESIGN&&this.textDesignToolStore.delete()},this.removeSprite=t=>{this.pureRemoveSprite(t)&&(this.selectLast(),this.spriteSnapshot("delete"),this.editor.render())},this.addSnapshot=(t,e)=>{this.editor.addSnapshot(void 0,t,e)},this.spriteSnapshot=t=>{this.addSnapshot(Cr.EDIT,this.historyLocale[t])},this.addNewText=async(t,e)=>{if(!this.textToolStore.doesTextAssetExist(e.identifier))throw new o.Ya(e.identifier);await this.addTextAsync({...t,state:e},!1)},this.addNewTextDesign=async(t,e)=>{if(!this.textDesignToolStore.doesTextDesignAssetExist(e.identifier))throw new o.Ya(e.identifier);await this.addTextDesignAsync({...t,state:e},!1)},this.addNewSticker=async(t,e)=>{if(!this.stickerToolStore.doesStickerAssetExist(e.identifier))throw new o.Ya(e.identifier);await this.addStickerAsync({...t,state:e},!1)},this.getSpriteHistoryState=()=>{const t=(0,o.p)(this.textToolStore.state),e=(0,o.p)(this.textDesignToolStore.state),i={common:(0,o.p)(this.state),[o.E.STICKER]:(0,o.p)(this.stickerToolStore.state),[o.E.TEXT]:t,[o.E.TEXT_DESIGN]:e,spriteIdList:Object.keys(this.container)};return Object.keys(i.common).forEach((t=>{i.common[t].size=this.container[t].getSizeInWorldSpace(),i.common[t].position=this.container[t].getPosition(),i.common[t].order=this.container[t].getIndexInParent()})),i},this.updateStateFromSerialization=async(t,e,i)=>{if(e&&e.length)try{const t=await Promise.all(e.map((async({svg:t,raster:e,name:i,identifier:r})=>{const n=(null==t?void 0:t.data)?o.P.SVG:e.type,s=`data:${n};base64,${(null==t?void 0:t.data)||e.data}`;return{stickerURI:s,thumbnailURI:await en(s,150),name:i,type:n,identifier:r}})));await this.stickerToolStore.addCustomStickerAsset(t)}catch(r){this.editor.modalStore.hideModal(),this.editor.modalStore.showInfoModal("stickerLoading")}await this.updateStateByHistoryState(t.spriteIdList,t,i)},this.updateStateFromHistory=async t=>{Object.keys(this.container).filter((e=>-1===t.spriteIdList.indexOf(e))).forEach((t=>{this.pureRemoveSprite(t)})),await this.updateStateByHistoryState(t.spriteIdList,t,0)},this.serializableState=async()=>{const t=this.editor.spriteStore.getSpriteHistoryState();Object.keys(t.common).forEach((e=>{const{flipHorizontally:i,flipVertically:o}=this.editor.outputContainer.getData(),r=this.editor.outputContainer.getRotation(),n=o!==i?-t.common[e].rotation:t.common[e].rotation;t.common[e].rotation=o!==i?n+r:n-r}));const e=await Promise.all(this.editor.spriteStore.stickerToolStore.customStickers.map((async({identifier:t,type:e,stickerURI:i,name:r})=>{const n={identifier:t,name:r,raster:{data:"",type:o.P.JPEG}};if(e===o.P.SVG&&(n.svg={data:i.split(",")[1]}),e===o.P.JPEG||e===o.P.PNG||e===o.P.GIF)[,n.raster.data]=i.split(","),n.raster.type=e;else{const t=await en(i);[,n.raster.data]=t.split(","),n.raster.type=o.P.PNG}return n})));return{sprite:t,customStickers:e}},this.updateCanvasControls=()=>{Object.keys(this.container).forEach((t=>{this.updatePositionAndSize(t,!0);const e=this.state.get(t);if(e)if(e.tool===o.E.TEXT){const e=this.getContainerProperties(t);this.textToolStore.changeSize(t,e)}else if(e.tool===o.E.TEXT_DESIGN){const e=this.getContainerProperties(t);this.textToolStore.changeWidth(e.width)}}))},this.setEditMode=t=>{this.currentSprite&&-1!==[o.E.TEXT,o.E.TEXT_DESIGN].indexOf(this.tool)&&(t?this.editor.modalStore.showTextEditModal():this.editor.modalStore.hideModal(),this.editMode.set(t))},this.setDragMode=t=>{this.dragMode.set(t)},this.setPosition=t=>{const e=this.currentSprite,i=this.container[this.id];if(e&&i){i.setPosition(this.editor.previewToWorld(t));const{position:o}=this.getSizePositionFromContainer();e.position.x=o.x,e.position.y=o.y,this.state.set(this.id,e),this.editor.render()}},this.setSize=t=>{const e=this.currentSprite;e&&(e.size.width=t.width,e.size.height=t.height,this.state.set(this.id,e))},this.setRotation=t=>{const e=this.currentSprite;if(e){const{flipHorizontally:i,flipVertically:r}=this.editor.outputContainer.getData(),n=this.editor.outputContainer.getRotation(),s=(0,o.sb)({rotation:t,outputRotation:n,flipHorizontally:i,flipVertically:r});this.container[this.id].setRotation(s),e.rotation=this.container[this.id].getRotation(),this.state.set(this.id,e),this.editor.render()}},this.onCanvasClick=t=>{this.isEditMode||this.selectHighestOrderSprite(t)},this.select=t=>{const e=this.state.get(t);if(e){this.editor.activeStore.tool!==e.tool&&this.editor.activeStore.selectTool(e.tool),this.setId(t)}},this.selectLast=()=>{const t=this.editor.orderHelper.getLastSpriteId();t&&this.select(t)},this.selectNext=()=>{if(this.currentSprite){const t=this.container[this.id].getIndexInParent();if(t){const e=Object.keys(this.container).find((e=>this.container[e].getIndexInParent()===t-1));e&&this.select(e)}}},this.deselect=()=>{this.setId(ms)},this.bringToFront=async t=>{const e=this.editor.orderHelper.bringToFront(t);this.container[t].setIndexInParent(e),this.spriteSnapshot("order"),await this.editor.render(),this.counter+=1},this.flipHorizontally=t=>{const e=this.state.get(t),i=this.container[t];i.setFlipHorizontally(!i.getFlipHorizontally()),e.flipHorizontally=i.getFlipHorizontally(),this.spriteSnapshot("flip"),this.state.set(t,e),this.editor.render()},this.pureReset=()=>{this.deselect(),Array.from(this.state.keys()).forEach((t=>{this.pureRemoveSprite(t)})),this.stickerToolStore.pureReset(),this.textToolStore.pureReset(),this.textDesignToolStore.pureReset()},this.selectHighestOrderSprite=t=>{const e=this.editor.brushToolStore.containerId();if((t=t.filter((t=>t!==e))).length<1)return void this.deselect();let i="",o=0;t.forEach((t=>{const e=this.container[t],r=e&&e.getIndexInParent()||0;r>=o&&(o=r,i=t)})),this.select(i)},this.onCornerDrag=({x:t,y:e})=>{if(this.currentSprite){const i=new o.Pa(this.currentSprite.position),r=new o.Pa(t,e),n=r.subtract(i).magnitude,s=this.getSize(),a=2*n/ys.sizeMagnitude(s);if(n>this.minLength)if(this.isSpriteSticker)if("unrestricted"!==this.stickerToolStore.resizeMode)this.setStickerSize({width:s.width*a,height:s.height*a});else{const t=this.rotationWRTOutputRotation,e=r.subtract(i),o=Math.cos(t),n=Math.sin(t),s=Math.max(Math.abs(e.x*o*2+e.y*n*2),this.minLength),a=Math.max(Math.abs(e.x*-n*2+e.y*o*2),this.minLength);this.setStickerSize({width:s,height:a})}else this.isSpriteText?this.setTextSize(s.width*a):this.isSpriteTextDesign&&this.setTextDesignScale(a);this.editor.render()}},this.onWidthDrag=({x:t,y:e})=>{const i=new o.Pa(this.currentSprite.position),r=new o.Pa(t,e).subtract(i).magnitude,n=this.editor.previewToWorld(2*r);if(n>this.minLength&&(this.setContainerProperties(this.id,{width:n},!0),this.isSpriteText)){const t=this.getContainerProperties(this.id);this.textToolStore.changeWidth(t.width)}},this.onPaddingDrag=({x:t,y:e})=>{if(this.isSpriteTextDesign){let i=this.getContainerProperties(this.id);const r=new o.Pa(this.currentSprite.position),n=new o.Pa(t,e).subtract(r).magnitude,s=Math.max(this.editor.previewToWorld(n)-i.width/2,0);this.setContainerProperties(this.id,{padding:s},!0),this.isSpriteTextDesign&&(i=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(i.padding))}},this.correctTextFlip=()=>{const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData();Object.values(this.container).forEach((i=>{"text"!==i.type&&"text-design"!==i.type||(i.setFlipHorizontally(t),i.setFlipVertically(e))}))},this.reverseTextHorizontally=t=>{Object.values(this.container).forEach((e=>{"text"!==e.type&&"text-design"!==e.type||e.setFlipHorizontally(t)}))},this.reverseTextVertically=t=>{Object.values(this.container).forEach((e=>{"text"!==e.type&&"text-design"!==e.type||e.setFlipVertically(t)}))},this.getOutputProperties=()=>this.editor.outputContainer.getData(),this.getContainerProperties=t=>this.container[t].getData(),this.getContainerTransform=t=>this.container[t].getTransform(),this.getDuplicateContainerTransform=t=>{const e=this.container[t].getTransform(),i=.1*this.editor.shortestOutputSide,r=new o.Pa(e.position).add(new o.Pa(i,i));return{...e,position:r}},this.getDuplicateContainerFlip=t=>({flipHorizontally:this.container[t].getFlipHorizontally(),flipVertically:this.container[t].getFlipVertically()}),this.updatePositionAndSize=(t=this.id,e=!1)=>{const{position:i,size:o}=this.getSizePositionFromContainer(t),r=this.state.get(t);if(r){if(r.position.x=i.x,r.position.y=i.y,r.size.width=o.width,r.size.height=o.height,e){const e=this.container[t].getRotation();this.container[t].setRotation(e),r.rotation=this.container[t].getRotation()}this.state.set(t,r)}},this.getInitialTransform=t=>{const e=this.editor.outputToWorld(fs);if(!t){return{rotation:this.editor.outputContainer.getRotation(),position:e}}return{position:e,...t}},this.setInitialSpriteState=(t,e)=>{const i=this.container[t],{position:r,size:n}=this.getSizePositionFromContainer(t),s=i.getRotation(),a=e===o.E.STICKER&&i.getFlipHorizontally(),l=e===o.E.STICKER&&i.getFlipVertically();this.state.set(t,{tool:e,position:r,rotation:s,size:n,flipHorizontally:a,flipVertically:l})},this.setStickerSize=t=>{const e=this.container[this.id];e.setSizeInWorldSpace(this.editor.previewSizeToWorld(t));const i=this.currentSprite;i&&(i.size=this.editor.worldSizeToPreview(e.getSizeInWorldSpace()),this.state.set(this.id,i))},this.setTextSize=t=>{let e=this.getContainerProperties(this.id);const i={width:this.editor.previewToWorld(t)},o=i.width/e.width,r={fontSize:Math.round(e.fontSize*o)},n=this.isSpriteText?{...i,...r}:i;i.width>this.minLength&&r.fontSize&&(this.setContainerProperties(this.id,n,!0),e=this.getContainerProperties(this.id),this.textToolStore.changeFontSize(e.fontSize,!0),this.textToolStore.changeWidth(e.width))},this.setTextDesignScale=t=>{let e=this.getContainerProperties(this.id);const i=e.width*t;if(i>this.minLength){this.setContainerProperties(this.id,{width:i},!0);const{width:t}=this.getContainerProperties(this.id);this.textDesignToolStore.changeWidth(t),e=this.getContainerProperties(this.id),this.textDesignToolStore.changePadding(e.padding)}},this.getSizePositionFromContainer=(t=this.id)=>{const e=this.container[t];if(e){return{position:this.editor.worldToPreview(e.getPosition()),size:this.editor.worldSizeToPreview(e.getSizeInWorldSpace())}}return{position:{x:0,y:0},size:{height:1,width:1}}},this.getSize=(t=this.id)=>{const e=this.container[t];return e?this.editor.worldSizeToPreview(e.getSizeInWorldSpace()):{width:0,height:0}},this.editor=t,this.container={},this.stickerToolStore=new sn(t),this.textToolStore=new dn(t),this.textDesignToolStore=new mn(t),this.rect=new ls(this.editor,this),this.minLength=this.editor.configStore.measurements.canvasControls.sprite.minSize/Math.sqrt(2)}static magnitude(t,e){return new o.Pa(t,e||t).magnitude}static sizeMagnitude(t){return Math.sqrt(t.width*t.width+t.height*t.height)}async updateStateByHistoryState(t,e,i){await(0,us.default)(t,(async t=>{e.common[t]&&(this.state.get(t)?this.updateExistingItem(t,e):await this.addNewItem(t,e))})),t.forEach((t=>{const o=e.common[t],r=this.container[t];o&&r&&r.setIndexInParent(o.order+i)})),this.counter+=1}async addNewItem(t,e){const i=e.common[t],r=i.size?{width:this.editor.worldToPreview(i.size.width),height:this.editor.worldToPreview(i.size.height)}:void 0,{flipHorizontally:n,flipVertically:s}=this.editor.outputContainer.getData(),a=this.editor.outputContainer.getRotation(),l=s!==n?i.rotation-a:i.rotation+a,c=s!==n?-l:l,h={spriteId:t,transform:{size:r,position:new o.Pa(i.position),rotation:c}};if(e.text[t]){const i=e.text[t],o=this.textToolStore.validFontWithConfig(i.identifier);i.identifier=null==o?void 0:o.identifier,await this.addNewText(h,i)}e.textdesign[t]&&await this.addNewTextDesign(h,e.textdesign[t]),e.sticker[t]&&await this.addNewSticker(h,{...e.sticker[t],flipHorizontally:i.flipHorizontally,flipVertically:i.flipVertically})}updateExistingItem(t,e){const i=e.common[t],r=this.state.get(t);this.state.set(t,r);const n=this.container[t];if(n.setPosition(new o.Pa(i.position)),n.setRotation(i.rotation),r.rotation=n.getRotation(),void 0!==i.flipHorizontally&&n.setFlipHorizontally(i.flipHorizontally),void 0!==i.flipVertically&&n.setFlipVertically(i.flipVertically),e.text[t]){const i=e.text[t];this.textToolStore.updateStateFromHistory(t,{...i,fontIdentifier:i.identifier})}if(e.textdesign[t]){const i=e.textdesign[t];this.textDesignToolStore.updateStateFromHistory(t,{...i,inverted:i.isInverted})}e.sticker[t]&&(n.setSizeInWorldSpace(i.size),this.stickerToolStore.updateStateFromHistory(t,e.sticker[t])),this.updatePositionAndSize(t)}get currentSprite(){if(this.isSpriteSelected)return this.state.get(this.id)}get padding(){return this.textDesignToolStore.padding}get isEditMode(){return this.editMode.get()}get isDragMode(){return this.dragMode.get()}get id(){return this.selectedId.get()}get isSpriteSelected(){return this.id!==ms}get position(){if(this.currentSprite)return this.currentSprite.position}get tool(){if(this.currentSprite)return this.currentSprite.tool}get size(){if(this.currentSprite)return this.currentSprite.size}get rotation(){if(this.currentSprite)return this.currentSprite.rotation}get rotationWRTOutputRotation(){if(this.currentSprite){const{flipHorizontally:t,flipVertically:e}=this.editor.outputContainer.getData(),i=this.editor.outputContainer.getRotation();return(0,o.sb)({rotation:this.currentSprite.rotation-i,flipHorizontally:t,flipVertically:e})}}get flipHorizontal(){if(this.currentSprite)return this.currentSprite.flipHorizontally}get isSpriteSticker(){return this.tool===o.E.STICKER}get isSpriteText(){return this.tool===o.E.TEXT}get isSpriteTextDesign(){return this.tool===o.E.TEXT_DESIGN}get isOnTop(){this.counter;return this.editor.engine.isSpriteTop(this.id)}get spritePosition(){if(this.currentSprite){const{x:t,y:e}=this.currentSprite.position,{height:i,width:o}=this.currentSprite.size;return{x:Math.round(t-o/2),y:Math.round(e-i/2)}}}get currentRect(){if(this.currentSprite)return this.rect}get leftTopPosition(){if(this.currentSprite)return this.rect.leftTop}get leftBottomPosition(){if(this.currentSprite)return this.rect.leftBottom}get leftMidPosition(){if(this.currentSprite)return this.rect.leftMid}get leftMidPadPosition(){if(this.currentSprite){const{leftMid:t}=this.rect;return{x:t.x-this.editor.worldToPreview(this.padding),y:t.y}}}get rightTopPosition(){if(this.currentSprite)return this.rect.rightTop}get rightBottomPosition(){if(this.currentSprite)return this.rect.rightBottom}get rightMidPosition(){if(this.currentSprite)return this.rect.rightMid}get rightMidPadPosition(){if(this.currentSprite){const{rightMid:t}=this.rect;return{x:t.x+this.editor.worldToPreview(this.padding),y:t.y}}}get leftBottomHandlePosition(){if(this.currentSprite)return this.rect.leftBottomHandle}get rightBottomHandlePosition(){if(this.currentSprite)return this.rect.rightBottomHandle}get historyLocale(){return this.isSpriteSticker?this.stickerLocale:this.isSpriteText?this.textDesignLocale:this.textLocale}get stickerLocale(){return this.editor.configStore.locale[o.E.STICKER].history}get textLocale(){return this.editor.configStore.locale[o.E.TEXT].history}get textDesignLocale(){return this.editor.configStore.locale[o.E.TEXT_DESIGN].history}setId(t){this.selectedId.set(t)}},bs=ys;(0,o.c)([o.e],bs.prototype,"counter",2),(0,o.c)([o.l],bs.prototype,"addSticker",2),(0,o.c)([o.l],bs.prototype,"addStickerAsync",2),(0,o.c)([o.l],bs.prototype,"addText",2),(0,o.c)([o.l],bs.prototype,"addTextAsync",2),(0,o.c)([o.l],bs.prototype,"addTextDesign",2),(0,o.c)([o.l],bs.prototype,"addTextDesignAsync",2),(0,o.c)([o.l],bs.prototype,"clickableCanvas",2),(0,o.c)([o.l],bs.prototype,"setContainerProperties",2),(0,o.c)([o.l],bs.prototype,"setContainerPosition",2),(0,o.c)([o.l],bs.prototype,"pureRemoveSprite",2),(0,o.c)([o.l],bs.prototype,"deleteSprite",2),(0,o.c)([o.l],bs.prototype,"removeSprite",2),(0,o.c)([o.l],bs.prototype,"addSnapshot",2),(0,o.c)([o.l],bs.prototype,"addNewText",2),(0,o.c)([o.l],bs.prototype,"addNewTextDesign",2),(0,o.c)([o.l],bs.prototype,"addNewSticker",2),(0,o.c)([o.l],bs.prototype,"updateStateFromSerialization",2),(0,o.c)([o.l],bs.prototype,"updateStateFromHistory",2),(0,o.c)([o.l],bs.prototype,"updateCanvasControls",2),(0,o.c)([o.l],bs.prototype,"setEditMode",2),(0,o.c)([o.l],bs.prototype,"setDragMode",2),(0,o.c)([o.l],bs.prototype,"setPosition",2),(0,o.c)([o.l],bs.prototype,"setSize",2),(0,o.c)([o.l],bs.prototype,"setRotation",2),(0,o.c)([o.l],bs.prototype,"onCanvasClick",2),(0,o.c)([o.l],bs.prototype,"select",2),(0,o.c)([o.l],bs.prototype,"selectLast",2),(0,o.c)([o.l],bs.prototype,"selectNext",2),(0,o.c)([o.l],bs.prototype,"deselect",2),(0,o.c)([o.l],bs.prototype,"bringToFront",2),(0,o.c)([o.l],bs.prototype,"flipHorizontally",2),(0,o.c)([o.l],bs.prototype,"pureReset",2),(0,o.c)([o.l],bs.prototype,"onCornerDrag",2),(0,o.c)([o.l],bs.prototype,"onWidthDrag",2),(0,o.c)([o.l],bs.prototype,"onPaddingDrag",2),(0,o.c)([o.l],bs.prototype,"correctTextFlip",2),(0,o.c)([o.l],bs.prototype,"reverseTextHorizontally",2),(0,o.c)([o.l],bs.prototype,"reverseTextVertically",2),(0,o.c)([o.f],bs.prototype,"currentSprite",1),(0,o.c)([o.f],bs.prototype,"padding",1),(0,o.c)([o.f],bs.prototype,"isEditMode",1),(0,o.c)([o.f],bs.prototype,"isDragMode",1),(0,o.c)([o.f],bs.prototype,"id",1),(0,o.c)([o.f],bs.prototype,"isSpriteSelected",1),(0,o.c)([o.f],bs.prototype,"position",1),(0,o.c)([o.f],bs.prototype,"tool",1),(0,o.c)([o.f],bs.prototype,"size",1),(0,o.c)([o.f],bs.prototype,"rotation",1),(0,o.c)([o.f],bs.prototype,"rotationWRTOutputRotation",1),(0,o.c)([o.f],bs.prototype,"flipHorizontal",1),(0,o.c)([o.f],bs.prototype,"isSpriteSticker",1),(0,o.c)([o.f],bs.prototype,"isSpriteText",1),(0,o.c)([o.f],bs.prototype,"isSpriteTextDesign",1),(0,o.c)([o.f],bs.prototype,"isOnTop",1),(0,o.c)([o.f],bs.prototype,"spritePosition",1),(0,o.c)([o.f],bs.prototype,"currentRect",1),(0,o.c)([o.f],bs.prototype,"leftTopPosition",1),(0,o.c)([o.f],bs.prototype,"leftBottomPosition",1),(0,o.c)([o.f],bs.prototype,"leftMidPosition",1),(0,o.c)([o.f],bs.prototype,"leftMidPadPosition",1),(0,o.c)([o.f],bs.prototype,"rightTopPosition",1),(0,o.c)([o.f],bs.prototype,"rightBottomPosition",1),(0,o.c)([o.f],bs.prototype,"rightMidPosition",1),(0,o.c)([o.f],bs.prototype,"rightMidPadPosition",1),(0,o.c)([o.f],bs.prototype,"leftBottomHandlePosition",1),(0,o.c)([o.f],bs.prototype,"rightBottomHandlePosition",1),(0,o.c)([o.f],bs.prototype,"historyLocale",1),(0,o.c)([o.f],bs.prototype,"stickerLocale",1),(0,o.c)([o.f],bs.prototype,"textLocale",1),(0,o.c)([o.f],bs.prototype,"textDesignLocale",1);var Ss={categories:[],query:""},vs=class{constructor(t){this.initProvider=t=>{t&&(this.libraryProvider=new t)},this.fetchImages=async(t="")=>{if(this.libraryProvider){let e=null;try{const i=await this.libraryProvider.getCategories(),o=await this.libraryProvider.searchImages(t);e=i.map(((t,e)=>{const i=o.filter((e=>e.category===t.name));return{identifier:t.name,name:t.name,thumbnailURI:t.coverImageUrl,items:i.map((i=>({name:i.title||`image${e}`,identifier:`${t.name}-${i.title}-${e}`,thumbnailURI:i.thumbUrl,rawUrl:i.rawUrl,authorName:i.authorName,authorAvatar:i.authorAvatar})))}})).filter((t=>t.items.length))}catch(Er){console.log(Er)}(0,o.m)((()=>{this.state.query=t,this.state.categories=e}))}},this.toggleCategorySelection=t=>{this.selectedCategory=this.selectedCategory!==t?t:""},this.getRawUrl=t=>{const e=this.items.findIndex((e=>e.identifier===t));return-1!==e?this.items[e].rawUrl:t},this.configStore=t.configStore,this.state=(0,o.e)(Ss),this.selectedCategory=""}get selectedCategoryIdentifier(){return this.selectedCategory}get categories(){return this.state.categories}get items(){return this.state.categories.map((t=>t.items)).reduce(((t,e)=>[...t,...e]),[])}get query(){return this.state.query}get config(){return this.configStore.config[o.E.LIBRARY]}get locale(){return this.configStore.locale[o.E.LIBRARY]}};(0,o.c)([o.e],vs.prototype,"selectedCategory",2),(0,o.c)([o.l],vs.prototype,"initProvider",2),(0,o.c)([o.l],vs.prototype,"fetchImages",2),(0,o.c)([o.l],vs.prototype,"toggleCategorySelection",2),(0,o.c)([o.f],vs.prototype,"selectedCategoryIdentifier",1),(0,o.c)([o.f],vs.prototype,"categories",1),(0,o.c)([o.f],vs.prototype,"items",1),(0,o.c)([o.f],vs.prototype,"query",1),(0,o.c)([o.f],vs.prototype,"config",1),(0,o.c)([o.f],vs.prototype,"locale",1);var xs,ws=/^data:image\/(.+?);base64,/,Cs=class{constructor(t){this.applySerialization=async(t,e,i,r)=>{this.editor.resetToolStates();const n=this.editor.activeStore.tool===o.E.TRANSFORM;n||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.reset(),n||this.editor.transformToolStore.onLeave();const s="Unexpected error occured",a=e.deserializeImage(t);if(a.image&&a.image.data){const t=a.image.data;await this.editor.setImage(t),this.editor.scale.defaultScale=1,this.editor.scale.resetOffset(),this.editor.transformToolStore.reset(),this.editor.activeStore.setImage(t),await this.editor.engineMediator.image.addImageToContainer(),this.editor.engineMediator.output.applyNewImageTransform(),this.editor.engineMediator.preview.updateTransform(),this.editor.scale.setInitialTransform(),this.editor.transformToolStore.setCropDefaults(),this.editor.historyStore.addInitialSnapshot(),this.editor.transformToolStore.saveTransforms()}const l=e.deserializeTransformation(t);if(!l)return void r(s);await this.applyStateOnUI(l);const c=e.deserialize(t);c?(await this.applyStateOnUI(c),this.editor.historyStore.addInitialSnapshot(),n&&this.editor.transformToolStore.onEnter(),await this.editor.render(),"loading"===this.editor.modalStore.identifier&&this.editor.modalStore.hideModal(),i()):r(s)},this.editor=t}serialize({image:t}={image:!1}){const e=this.editor.activeStore.tool===o.E.TRANSFORM,{displaySerializationModal:r}=this.editor.configStore.config;return r&&this.editor.modalStore.showInfoModal("saving"),new Promise(((n,s)=>{i.e(657).then(i.bind(i,30657)).then((async({Serializer:i})=>{try{e&&this.editor.transformToolStore.onLeave(),await this.editor.wait(),this.editor.transformToolStore.applyDefaultCrop(!1);const{originalImage:s}=this.editor.imageContainer.getData(),a=this.editor.engineMediator.output.container.getResolution(),l={width:s.width,height:s.height},c=new i(this.editor.transformToolStore.defaultCropMaskPosition,this.editor.transformToolStore.maxCropMaskSize,a,l,this.editor.engine.getRootContainers()[0],this.editor.engine.getOutputContainer()),h={[o.E.ADJUSTMENT]:(0,o.p)(this.editor.adjustmentsToolStore.state),[o.E.FILTER]:(0,o.p)(this.editor.filterToolStore.state),[o.E.FOCUS]:(0,o.p)(this.editor.focusToolStore.serializableState),[o.E.OVERLAY]:(0,o.p)(this.editor.overlayToolStore.state),[o.E.FRAME]:(0,o.p)(this.editor.frameToolStore.state),[o.E.BRUSH]:this.editor.brushToolStore.strokes||{strokes:[]}},{sprite:d,customStickers:p}=await this.editor.spriteStore.serializableState();let u,g;if(d.spriteIdList=d.spriteIdList.sort(((t,e)=>d.common[t].order-d.common[e].order)),h.sprite=d,h.customStickers=p,h.transform=this.editor.transformToolStore.serializableState,t){const t=Cs.getDataURL(s);g=(t=>t.match(/^data:([^;]+)/)[1])(t),u=(t=>t.replace(ws,""))(t)}r&&this.editor.modalStore.hideModal(),n(c.serialise(h,u,g)),e&&this.editor.transformToolStore.onEnter()}catch(a){r&&this.editor.modalStore.hideModal(),s(a)}}))}))}deserialize(t){return this.editor.modalStore.showInfoModal("loading"),new Promise(((e,r)=>{try{i.e(657).then(i.bind(i,30657)).then((({Deserializers:i})=>{const n=t.version.match(/[0-3].[0-8].[0-9]/i);let s=null;s=n&&i["3.9.0"]?new i["3.9.0"](this.editor):i[t.version]?new i[t.version](this.editor):new i["3.12.0"](this.editor),n?(this.editor.modalStore.hideModal(),this.editor.modalStore.showActionModal({type:o.H.WARNING,identifier:"unsupportedSerializationVersion",handleConfirm:()=>this.applySerialization(t,s,e,r)})):this.applySerialization(t,s,e,r)}))}catch(n){"loading"===this.editor.modalStore.identifier&&this.editor.modalStore.hideModal(),r(n)}}))}static getDataURL(t){if(t instanceof HTMLImageElement){const{src:e}=t;if((t=>ws.test(t))(e))return e}if(t instanceof HTMLCanvasElement)return t.toDataURL(o.O.PNG);const e=document.createElement("canvas");e.width=t.width,e.height=t.height;e.getContext("2d").drawImage(t,0,0);const i=e.toDataURL(o.O.PNG);return(0,o.r)(e),i}async applyStateOnUI(t){const e=this.editor.activeStore.tool===o.E.TRANSFORM;try{if(t.transform&&(e||this.editor.transformToolStore.onEnter(),this.editor.transformToolStore.updateStateFromSerialization(t.transform),await this.editor.wait(),this.editor.transformToolStore.onLeave(),e||(this.editor.transformToolStore.onEnter(),await this.editor.wait(),this.editor.transformToolStore.onLeave())),t.filter&&await this.editor.filterToolStore.updateStateFromSerialization(t.filter),t.adjustment&&this.editor.adjustmentsToolStore.updateStateFromSerialization(t.adjustment),t.focus&&await this.editor.focusToolStore.updateStateFromSerialization(t.focus),t.overlay&&await this.editor.overlayToolStore.updateStateFromSerialization(t.overlay),t.sprite){let e=Object.keys(t).length-1;t.customStickers&&(e-=1),t.sprite.spriteIdList=t.sprite.spriteIdList.sort(((e,i)=>t.sprite.common[e].order-t.sprite.common[i].order)),await this.editor.spriteStore.updateStateFromSerialization(t.sprite,t.customStickers,Math.max(0,e))}t.brush&&this.editor.brushToolStore.updateStateFromHistory(t.brush),t.frame&&await this.editor.frameToolStore.updateStateFromSerialization(t.frame),this.editor.outputContainer.updateChildrenContainers()}catch(Er){"AssetNotFoundError"===Er.name?console.error(Er):(console.error(Er),this.editor.modalStore.showActionModal({type:o.H.ERROR,identifier:"unexpectedError",error:Er.message,handleConfirm:()=>{this.applyStateOnUI(t)}}))}}},Es=t=>{const e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],o=new ArrayBuffer(e.length),r=new Uint8Array(o);for(let n=0;n<e.length;n+=1)r[n]=e.charCodeAt(n);return new Blob([o],{type:i})},ks=t=>t.split(",")[0].split(":")[1].split(";")[0],Ts=(0,o.b)((0,o._a)()),Ms=class{static isImageElement(t){return t instanceof HTMLImageElement}constructor({license:t,assetProvider:e,crossOrigin:i}){this.crossOrigin=i,this.engine=new o.ub({license:t,crossOrigin:i,assetProvider:e,downscaleOptions:{maxDimensions:{width:100,height:100}}})}getAllFilterPreviewThumbnails(t){return new Promise(((e,i)=>{const o=[],r=[];t.forEach((t=>{t.isDuotone?o.push(t.identifier):r.push(t.identifier)})),this.getAllDuotonePreview(o).then((t=>{this.getAllLutPreview(r).then((i=>{e(Object.assign(t,i))})).catch((t=>{i(t)}))})).catch((t=>{i(t)}))}))}async getAllDuotonePreview(t){const e={};if(!t.length)return e;const i=await this.engine.addDuoToneFilterFromAssets(t[0],this.container);return await(0,Ts.default)(t,(async t=>{const r=this.engine.assetProvider.getDuotoneFilterAsset(t);i.filterOperation.getFilter().set({intensity:.5,lightColor:o.kb.Color.fromHex(r.lightColor),darkColor:o.kb.Color.fromHex(r.darkColor)});const n=await this.engine.export(o.N.DATA_URL,o.O.PNG);e[t]=n}),{concurrency:1}),this.engine.removeEffect(i),e}async loadLutAssets(t){const e={};return await(0,Ts.default)(t,(async t=>{e[t]=await this.getImageElement(this.engine.assetProvider.getAssetSource("filter",t))})),e}async getAllLutPreview(t){const e={};if(!t.length)return e;const i=await this.loadLutAssets(t),r=await this.engine.addLUTFilterFromAssets(t[0],this.container);return await(0,Ts.default)(t,(async t=>{const n=this.engine.assetProvider.getLUTFilterAsset(t),s=r.filterOperation.getFilter(),a={horizontalTileCount:n.horizontalTileCount||5,verticalTileCount:n.verticalTileCount||5,image:i[t]};s.set({...a,intensity:n.defaultIntensity||1}),r.setProperties({intensity:1}),s._lutPrimitive.set(a);const l=await this.engine.export(o.N.DATA_URL,o.O.PNG);e[t]=l}),{concurrency:1}),this.engine.removeEffect(r),e}addImageToContainer(t){return new Promise(((e,i)=>{let o;Ms.isImageElement(t)?(o=t,this.setBackgroundImage(o),e()):this.getImageElement(t).then((t=>{o=t,this.setBackgroundImage(o),e()})).catch((t=>{i({identifier:"imageLoading",message:t.message})}))}))}getImageElement(t){return new Promise(((e,i)=>{const o=new Image;o.addEventListener("load",(()=>{e(o)})),o.addEventListener("error",(t=>{i(t)})),o.crossOrigin=this.crossOrigin,o.src=t}))}setBackgroundImage(t){this.container?this.container.setData({image:t}):this.container=this.engine.addImage({image:t,blendMode:o.qa.NORMAL,opacity:1});const{size:e}=this.container.getBounds();this.engine.getOutputContainer().setResolution(e)}};!function(t){t.LEADING="leading",t.CENTER="center",t.TRAILING="trailing"}(xs||(xs={}));var zs={horizontalGuides:[],verticalGuides:[],rotationGuides:[]},Ps=class{constructor(t){this.previewTopLeftPosition={x:0,y:0},this.init=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig(),this.state.rotationGuides=this.getRotationGuidesFromConfig()},this.getGuideValue=(t,e)=>{const{height:i,width:o}=this.editor.getPreviewSize(),{snapToLeft:r,snapToRight:n,snapToTop:s,snapToBottom:a}=this.configStore.config.snapping.position,l=Math.min(i,o);let c=0;return"bottom"===e?c=Math.round(i-l*a):"top"===e?c=Math.round(l*s):"right"===e?c=Math.round(o-l*n):"left"===e?c=Math.round(l*r):"vertical"===t&&"center"===e?c=Math.round(o/2):"horizontal"===t&&"center"===e&&(c=Math.round(i/2)),c},this.getVerticalGuidesFromConfig=()=>{const{snapToVerticalCenter:t,snapToLeft:e,snapToRight:i}=this.configStore.config.snapping.position,o=[];return t&&o.push({value:this.getGuideValue("vertical","center"),edge:xs.CENTER,isVisible:!1,direction:"vertical"}),e&&o.push({value:this.getGuideValue("vertical","left"),edge:xs.LEADING,isVisible:!1,direction:"vertical"}),i&&o.push({value:this.getGuideValue("vertical","right"),edge:xs.TRAILING,isVisible:!1,direction:"vertical"}),o},this.getHorizontalGuidesFromConfig=()=>{const{snapToHorizontalCenter:t,snapToTop:e,snapToBottom:i}=this.configStore.config.snapping.position,o=[];return t&&o.push({value:this.getGuideValue("horizontal","center"),edge:xs.CENTER,isVisible:!1,direction:"horizontal"}),e&&o.push({value:this.getGuideValue("horizontal","top"),edge:xs.LEADING,isVisible:!1,direction:"horizontal"}),i&&o.push({value:this.getGuideValue("horizontal","bottom"),edge:xs.TRAILING,isVisible:!1,direction:"horizontal"}),o},this.getRotationGuidesFromConfig=()=>{const{angles:t}=this.configStore.config.snapping.rotation,e=[];t.forEach((t=>{e.push(t),e.push(t+360),e.push(t-360)}));return e.filter(((t,i)=>e.indexOf(t)===i)).map((t=>({value:t*Math.PI/180,edge:xs.CENTER,isVisible:!1,position:{x:0,y:0}})))},this.getSpriteDimensions=({leftTop:t,leftBottom:e,rightTop:i,rightBottom:o})=>{const r=Math.min(t.y,i.y,e.y,o.y),n=Math.max(t.y,i.y,e.y,o.y),s=Math.min(t.x,i.x,e.x,o.x),a=Math.max(t.x,i.x,e.x,o.x);return{height:Math.round(n-r),width:Math.round(a-s)}},this.mapRange=({value:t,fromMin:e,fromLength:i,toMin:o,toLength:r})=>(t-e)*r/i+o,this.updateGuides=()=>{this.state.horizontalGuides=this.getHorizontalGuidesFromConfig(),this.state.verticalGuides=this.getVerticalGuidesFromConfig()},this.mapToSnapSystem=(t,e,i,o)=>{if(0===e.length)return t;if(e[0]>t)return t-i;for(let r=0;r<e.length-1;r+=1){const n=e[r],s=e[r+1];let a=n+i,l=s-i,c=0;o&&(c=r*i*2,a+=c,l+=c+2*i);const h=1e-5;if(n<=t&&t<=s)return t<=n+h?n+c:t>=s-h?s+c+(o?2*i:0):this.mapRange({value:t,fromMin:n,fromLength:s-n,toMin:a,toLength:l-a})}return o?t+(e.length-1)*i*2+i:t},this.mapFromSnapSystem=(t,e,i,o)=>{if(0===e.length)return t;if(e[0]>t)return t>=e[0]-i?e[0]:t+i;let r=t;for(let s=0;s<e.length-1;s+=1){const n=e[s],a=e[s+1],l=n+i;let c=a-i,h=a;if(o&&(c+=2*i,h+=2*i,r=t-s*i*2),n<=r&&r<=h)return l<=r&&r<=c?this.mapRange({value:r,fromMin:l,fromLength:c-l,toMin:n,toLength:a-n}):r<l?n:a}r-=3*i;const n=e[e.length-1];return r<=n?n:r},this.centerSnapValue=(t,e)=>{const i=.5*e,{value:o,edge:r}=t;let n=o;return r===xs.LEADING?n+=i:r===xs.TRAILING&&(n-=i),n},this.mapSnappingGuidesToCenter=(t,e)=>{const i=[];return t.forEach((t=>{i.push(this.centerSnapValue(t,e))})),i},this.calcSnapThresholdInRadians=(t,e)=>0===t?0:e/t,this.calculatePreviewTopLeftPosition=()=>{const t=this.editor.engineMediator.preview.container.getPosition(),e=this.editor.getPreviewSize(),i=(0,o.Za)();this.previewTopLeftPosition={x:t.x/i-e.width/2,y:t.y/i-e.height/2}},this.snapToRotation=(t,e,i)=>{const{rotationGuides:r}=this.state,{enabled:n,threshold:s}=this.configStore.config.snapping.rotation,{x:a,y:l}=this.previewTopLeftPosition,{width:c}=this.editor.getPreviewSize();let h=(t+2*Math.PI)%(2*Math.PI);if(n){const n=new o.Pa(e).magnitude,d=r.map((t=>t.value)).sort(((t,e)=>t-e)),p=this.calcSnapThresholdInRadians(n,s);if(!this.rotationOffset){const e=this.mapToSnapSystem(t,d,p,!1);this.rotationOffset=e-h}h=this.mapFromSnapSystem(h+this.rotationOffset,d,p,!1);const u={x:i.position.x-a-c,y:i.position.y-l};return r.forEach((t=>{t.isVisible=t.value===h,t.position=u})),h}return t},this.snapToPosition=(t,e)=>{const{horizontalGuides:i,verticalGuides:r}=this.state,{enabled:n,threshold:s}=this.configStore.config.snapping.position,a=new o.Pa(this.previewTopLeftPosition),{height:l,width:c}=this.getSpriteDimensions(e),{x:h,y:d}=new o.Pa(t).subtract(a);if(n){const t=this.mapSnappingGuidesToCenter(i,l).sort(((t,e)=>t-e)),e=this.mapSnappingGuidesToCenter(r,c).sort(((t,e)=>t-e));if(!this.positionOffset){const i=this.mapToSnapSystem(h,e,s,!0),r=this.mapToSnapSystem(d,t,s,!0);this.positionOffset=new o.Pa(i,r).subtract(new o.Pa(h,d))}let n=this.mapFromSnapSystem(h+this.positionOffset.x,e,s,!0),p=this.mapFromSnapSystem(d+this.positionOffset.y,t,s,!0);return n=Math.round(n),p=Math.round(p),i.forEach((t=>{const e=Math.round(this.centerSnapValue(t,l));t.isVisible=e===p})),r.forEach((t=>{const e=Math.round(this.centerSnapValue(t,c));t.isVisible=e===n})),new o.Pa(n,p).add(a)}return{x:h,y:d}},this.editor=t,this.configStore=t.configStore,this.state=(0,o.e)(zs),this.rotationOffset=null,this.positionOffset=null}hidePositionGuides(){this.positionOffset=null,this.state.verticalGuides=this.state.verticalGuides.map((t=>({...t,isVisible:!1}))),this.state.horizontalGuides=this.state.horizontalGuides.map((t=>({...t,isVisible:!1})))}hideRotationGuides(){this.rotationOffset=null,this.state.rotationGuides=this.state.rotationGuides.map((t=>({...t,isVisible:!1})))}get positionGuides(){const{verticalGuides:t,horizontalGuides:e}=this.state;return[...t,...e]}get rotationGuides(){return this.state.rotationGuides}};(0,o.c)([o.e],Ps.prototype,"state",2),(0,o.c)([o.l],Ps.prototype,"snapToRotation",2),(0,o.c)([o.l],Ps.prototype,"snapToPosition",2),(0,o.c)([o.l],Ps.prototype,"hidePositionGuides",1),(0,o.c)([o.l],Ps.prototype,"hideRotationGuides",1),(0,o.c)([o.f],Ps.prototype,"positionGuides",1),(0,o.c)([o.f],Ps.prototype,"rotationGuides",1);var Is=class{constructor(t,e){this.initWithImage=async t=>{try{if(this.modalStore.showInfoModal("loading"),this.engineMediator.init(),this.snappingStore.init(),await this.activeStore.setImage(t),this.configStore.config.displayResizeWarning&&this.checkImageResize(),this.configStore.config.filter.enablePreviewThumbnails&&"webgl"===this.configStore.config.engine.preferredRenderer){const t=this.configStore.config.engine;this.previewThumbnails=new Ms({...t,license:this.configStore.config.license,assetProvider:this.configStore.assetProvider})}this.engine&&this.engine.pesdk.on(o.qb.WEBGL_CONTEXT_LOST,(()=>{this.configStore.events.onErrorWebGLContextLost()}))}catch(e){this.configStore.events.onErrorImageLoading(e),this.modalStore.hideModal(),this.modalStore.showActionModal({type:o.H.ERROR,identifier:e.identifier?e.identifier:"rendering",error:e,handleConfirm:()=>{this.initWithImage(t)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}},this.checkImageResize=()=>{this.engine.on(o.qb.BEGAN_IMAGE_DOWNSCALING,(()=>{this.modalStore.showInfoModal("resizing")})),this.engine.on(o.qb.IMAGE_DOWNSCALED,(({width:t,height:e})=>{const{maxMegaPixels:i}=this.configStore.config.engine.downscaleOptions,r=o.Ma.isMobile()?i.mobile:i.desktop;this.modalStore.hideModal(),this.modalStore.showActionModal({type:o.H.WARNING,identifier:"imageResized",handleConfirm:()=>{this.modalStore.hideModal()},error:{megapixels:`${r}`,width:`${t}`,height:`${e}`}})}))},this.init=t=>{if(this.activeStore.image){this.historyStore.isDirty()?this.modalStore.showActionModal({type:o.H.WARNING,identifier:"discardChanges",handleConfirm:()=>{this.setImage(t),this.resetToolStates()},handleDismiss:()=>{this.setImage(t,!0)}}):(this.historyStore.reset(),this.setImage(t,!0).then((()=>{"imageResized"!==this.modalStore.identifier&&this.modalStore.hideModal();const{engine:t,displayCanvasRendererWarning:e}=this.configStore.config;"canvas"===t.preferredRenderer&&e&&this.modalStore.showActionModal({type:o.H.WARNING,identifier:"unsupportedWebGLRenderer",handleConfirm:()=>{this.modalStore.hideModal()}})})).catch((()=>null)))}else this.initWithImage(t)},this.setImage=async(t,e=!1)=>{try{this.activeStore.setImageLoadedToEngine(!1),this.modalStore.showInfoModal(this.configStore.config.displayResizeWarning?"resizing":"loading"),this.scale.defaultScale=1,this.scale.resetOffset(),await this.activeStore.setImage(t),await this.engineMediator.image.addImageToContainer(),this.canvasStore.resizeCanvas(),this.engineMediator.output.applyNewImageTransform(),this.engineMediator.preview.updateTransform(),this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults();const{flipHorizontally:i,flipVertically:r,outputRotation:n}=this.transformToolStore.rotateFlipState;this.outputContainer.setData({flipVertically:r,flipHorizontally:i}),await this.transformToolStore.rotateOutputContainer((0,o.eb)(n),!1),e?(this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls(),this.transformToolStore.resetCrop(),this.transformToolStore.applyDefaultCrop(),this.transformToolStore.saveTransforms(),this.transformToolStore.onEnter(),this.transformToolStore.setRotation(this.transformToolStore.rotationInDegrees),this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()):this.transformToolStore.saveTransforms(),this.snappingStore.calculatePreviewTopLeftPosition(),this.historyStore.addInitialSnapshot(),await this.renderPromise(),this.configStore.config.filter.enablePreviewThumbnails&&"webgl"===this.configStore.config.engine.preferredRenderer&&this.filterToolStore.setImageAndGetPreviews();this.activeStore.tool?this.configStore.events.onImageLoaded():this.onReady(),"imageResized"!==this.modalStore.identifier&&this.modalStore.hideModal(),this.activeStore.setImageLoadedToEngine(!0),this.resize()}catch(i){throw this.configStore.events.onErrorImageLoading(i),this.modalStore.hideModal(),this.modalStore.showActionModal({type:o.H.ERROR,identifier:i.identifier?i.identifier:"rendering",error:i,handleConfirm:()=>{this.setImage(t,e)},handleDismiss:()=>{this.activeStore.setImage(void 0)}}),new Error(i)}},this.onToolChange=(t,e=null,i=!0)=>{var r,n;t!==e&&(null==(n=null==(r=this.engineMediator)?void 0:r.preview)?void 0:n.container)&&(-1!==[t,e].indexOf(o.E.TRANSFORM)?(t===o.E.TRANSFORM?(this.transformToolStore.onLeave(),this.transformToolStore.addSnapshot(),this.snappingStore.calculatePreviewTopLeftPosition()):e===o.E.TRANSFORM&&this.transformToolStore.onEnter(),this.resize(e)):(this.scale.resetOffset(),this.scale.resetPosition(),this.scale.setScaleToDefault(),this.scale.scaleRender(!0)),i&&this.render())},this.resize=(t=null)=>{if(this.engineMediator)try{const e=this.activeStore.tool,i=t===o.E.TRANSFORM||!t&&e===o.E.TRANSFORM;this.canvasStore.resizeCanvas(t),this.transformToolStore.applyDefaultCrop();const r=(0,o.p)(this.transformToolStore.maxCropMaskSize);i||this.transformToolStore.onEnter();const n=this.engineMediator.preview.container.getRotation();if(this.engineMediator.preview.updateTransform(n)){this.scale.setInitialTransform(),this.transformToolStore.setCropDefaults(),this.transformToolStore.updateCanvasControls(r),this.focusToolStore.updateCanvasControls(),this.spriteStore.updateCanvasControls();const t=this.transformToolStore.getScaleWithFlip(n);this.engineMediator.preview.container.setScale(t),i||(this.transformToolStore.onLeave(),this.transformToolStore.onEnter(),this.transformToolStore.onLeave()),this.snappingStore.calculatePreviewTopLeftPosition(),this.render()}}catch(e){this.configStore.events.onErrorImageLoading(e),this.modalStore.showActionModal({type:o.H.ERROR,identifier:"rendering",handleConfirm:()=>{this.resize(t)},handleDismiss:()=>{this.activeStore.setImage(void 0)}})}},this.export=({preventExportEvent:t,...e}={})=>new Promise(((i,r)=>{this.modalStore.showInfoModal("exporting");const n=this.activeStore.tool===o.E.TRANSFORM;n&&this.transformToolStore.onLeave();const{config:s}=this.configStore,a={...s.export.image,...e},{exportType:l,format:c,quality:h,enableDownload:d,transparent:p}=a;this.engineMediator.engine.export(l,c,h,p).then((e=>{d&&this.triggerFileDownload(s.export.filename,c,l,e),t||this.configStore.events.onExport(e),this.historyStore.isDirtySinceSave=!1,i(e)})).catch((t=>{r(t)})).finally((()=>{n&&(this.transformToolStore.onEnter(),this.render()),this.modalStore.hideModal()}))})),this.serialize=({image:t}={image:!0})=>this.serializationMediator.serialize({image:t}),this.deserialize=t=>this.serializationMediator.deserialize(t),this.close=()=>{this.historyStore.isDirtySinceSave&&this.configStore.config.displayCloseWarning?this.modalStore.showActionModal({type:o.H.WARNING,identifier:"unsavedChanges",handleConfirm:()=>{this.configStore.events.onClose()}}):this.configStore.events.onClose()},this.hasChanges=()=>this.historyStore.isDirtySinceSave,this.getImageDimensions=()=>{const{width:t,height:e}=this.engine.getOutputDimensions();return{width:t,height:e}},this.wait=(t=0)=>new Promise((e=>setTimeout(e,t))),this.clickableCanvas=async t=>{t?(await new Promise((t=>setTimeout(t,0))),this.canvasStore.enableCanvasClick()):this.canvasStore.disableCanvasClick()},this.onReady=async()=>{const{forceCrop:t}=this.configStore.config;if(this.activeStore.selectTool(this.configStore.defaultTool),t){const t=this.transformToolStore.localOutputImageSize,e=t.width/t.height,i=this.transformToolStore.entityManager.items.map((t=>t.ratio?t.ratio:t.dimensions.x/t.dimensions.y));-1!==i.indexOf("*")?console.error('ForceCrop will not work if "*" is one of the ratios'):-1===i.indexOf(parseFloat(e.toFixed(2)))&&this.activeStore.selectTool(o.E.TRANSFORM)}this.configStore.events.onEditorReady()},this.addSnapshot=(t,e,i)=>{this.historyStore.addSnapshot(t,e,i)},this.resetToolStates=()=>{this.transformToolStore.pureReset(),this.filterToolStore.pureReset(),this.focusToolStore.pureReset(),this.adjustmentsToolStore.pureReset(),this.overlayToolStore.pureReset(),this.frameToolStore.pureReset(),this.brushToolStore.pureReset(),this.spriteStore.pureReset(),this.historyStore.reset(),this.render()},this.getAssetPath=t=>this.assetProvider.getPathForCategory(t),this.render=async()=>{await this.renderPromise()},this.applyFlipToPreview=t=>this.engineMediator?this.engineMediator.previewSpaceToFlippedPreviewSpace(t):{x:0,y:0},this.getPreviewSize=()=>{if(!this.engine)return{width:0,height:0};const{width:t,height:e}=this.engine.getOutputDimensions();return t&&e?{width:Math.round(this.worldToPreview(this.outputToWorld(t))),height:Math.round(this.worldToPreview(this.outputToWorld(e)))}:{height:e,width:t}},this.getImageMimeType=()=>(t=>"string"===typeof t?ks(t):t.src.includes(".svg")?o.P.SVG:t.src?ks(t.src):o.P.JPEG)(this.activeStore.image),this.cleanUpCanvasMemory=()=>{var t,e,i;null==(i=null==(e=null==(t=this.engineMediator)?void 0:t.image)?void 0:e.container)||i.dispose()},this.triggerFileDownload=(t,e,i,r)=>{const n=t+(e===o.O.JPEG&&i!==o.N.MSBLOB?".jpeg":".png"),s=this.blobFromExportData(r);this.triggerBlobDownload(n,s)},this.triggerBlobDownload=(t,e)=>{if(navigator.msSaveBlob)navigator.msSaveBlob(e,t);else{const i=document.createElement("a"),r=URL.createObjectURL(e);i.href=r,i.download=t,document.body.appendChild(i),i.click(),document.body.removeChild(i),(0,o.w)()||URL.revokeObjectURL(r)}},this.blobFromExportData=t=>"string"===typeof t?Es(t):t instanceof HTMLImageElement?Es(t.src):t,this.configStore=new Hn,e&&Object.entries(e).forEach((([t,e])=>{this.configStore.events.on(t,e)}));const i=this.configStore.saveConfig(t);this.engineMediator=new class{constructor(t){this.orderHelper=new Zn,this.init=()=>{const t=this.editor.configStore.config.engine;this.engine=new o.ub({...t,license:this.editor.configStore.config.license,assetProvider:this.editor.configStore.assetProvider,watermark:this.editor.configStore.config.watermark}),this.image=new class{constructor(t){this.editor=t}setBackgroundImage(t){this.container?this.container.setData({image:t,originalImage:t}):this.container=this.engine.addImage({image:t,originalImage:t,blendMode:o.qa.NORMAL,opacity:1})}getchildren(){return this.container.getChildren()}addImageToContainer(){return new Promise(((t,e)=>{const{image:i}=this.editor.activeStore;if((0,o.A)(i))this.setBackgroundImage(i),t();else{const o=this.editor.libraryStore.getRawUrl(i);this.getImageElement(o).then((e=>{this.setBackgroundImage(e),t()})).catch((t=>{e({identifier:"imageLoading",message:t.message})}))}}))}getImageElement(t){return new Promise(((e,i)=>{const o=new Image;o.addEventListener("load",(()=>{e(o)})),o.addEventListener("error",(t=>{i(t)})),o.crossOrigin=this.editor.configStore.config.engine.crossOrigin,o.src=t}))}getImgageContainerId(){return this.container?this.container.getID():""}get engine(){return this.editor.engine}}(this.editor),this.output=new class{constructor(t){this.applyNewImageTransform=()=>{const{size:t,width:e,height:i}=this.editor.engineMediator.image.container.getBounds(),r=this.container;r.setTransform(o.jb.IDENTITY),r.setResolution(t),r.setPivot(.5,.5),r.setPosition({x:e/2,y:i/2})},this.editor=t}get engine(){return this.editor.engine}get container(){return this.engine.getOutputContainer()}}(this.editor),this.preview=new Vn(this.editor)},this.editor=t}render(t){return this.engine.render(t)}previewSpaceToWorldSpace(t,e){const i=this.preview.previewTransformWithoutDpr;if((0,o.ab)(t)){const r=this.editor.engine.convertPointFromPreviewIntoWorldSpace(o.Pa.ZERO,i,e),n=this.editor.engine.convertPointFromPreviewIntoWorldSpace({x:t,y:0},i,e);return o.Pa.distance(new o.Pa(r),new o.Pa(n))}return this.editor.engine.convertPointFromPreviewIntoWorldSpace(t,i,e)}worldSpaceToPreviewSpace(t){const e=this.preview.previewTransformWithoutDpr;if((0,o.ab)(t)){const i=this.editor.engine.convertPointFromWorldIntoPreviewSpace(o.Pa.ZERO,e),r=this.editor.engine.convertPointFromWorldIntoPreviewSpace({x:t,y:0},e);return o.Pa.distance(new o.Pa(i),new o.Pa(r))}return this.editor.engine.convertPointFromWorldIntoPreviewSpace(t,e)}outputSpaceToWorldSpace(t){return(0,o.ab)(t)?o.lb.getScalarInWorldSpace(t,this.editor.engine.getOutputContainer()):o.lb.getPointInWorldSpace(t,this.editor.engine.getOutputContainer())}previewSpaceToOutputSpace(t){const e=this.preview.previewTransformWithoutDpr;if((0,o.ab)(t)){const i=this.editor.engine.convertPointFromPreviewIntoOutputSpace(o.Pa.ZERO,e),r=this.editor.engine.convertPointFromPreviewIntoOutputSpace({x:t,y:0},e);return o.Pa.distance(new o.Pa(i),new o.Pa(r))}return this.editor.engine.convertPointFromPreviewIntoOutputSpace(t,e)}previewSpaceToFlippedPreviewSpace(t){return this.editor.engine.convertPointFromPreviewIntoFlippedPreviewSpace(t)}}(this),this.serializationMediator=new Cs(this),this.spriteStore=new bs(this),this.scale=new rs(this),this.filterToolStore=new Nr(this),this.adjustmentsToolStore=new _r(this),this.focusToolStore=new jr(this),this.overlayToolStore=new Jr(this),this.frameToolStore=new Sn(this),this.brushToolStore=new xn(this),this.transformToolStore=new ps(this),this.libraryStore=new vs(this),this.modalStore=new os(this),this.snappingStore=new Ps(this),this.activeStore=new qn(this),this.canvasStore=new es(this),this.historyStore=new jn(this),this.libraryStore.initProvider(i),this.libraryStore.fetchImages(),this.configStore.config.image?this.initWithImage(this.configStore.config.image):(this.configStore.events.onEditorReady(),this.configStore.defaultTool!==o.E.LIBRARY&&this.configStore.defaultTool!==o.E.CUSTOM||this.activeStore.selectTool(this.configStore.defaultTool))}get shortestOutputSide(){const t=this.outputContainer.getBounds();return Math.min(t.width,t.height)}get assetProvider(){return this.configStore.assetProvider}get engine(){return this.engineMediator?this.engineMediator.engine:null}get imageContainer(){return this.engineMediator?this.engineMediator.image.container:null}get orderHelper(){return this.engineMediator?this.engineMediator.orderHelper:null}renderPromise(){return this.engineMediator?this.engineMediator.render(this.engineMediator.preview.container):null}previewToWorld(t,e){return this.engineMediator?((0,o.ab)(t),this.engineMediator.previewSpaceToWorldSpace(t,e)):{x:0,y:0}}worldToPreview(t){return this.engineMediator?((0,o.ab)(t),this.engineMediator.worldSpaceToPreviewSpace(t)):{x:0,y:0}}worldSizeToPreview(t){return this.engineMediator?{width:this.engineMediator.worldSpaceToPreviewSpace(t.width),height:this.engineMediator.worldSpaceToPreviewSpace(t.height)}:{width:0,height:0}}previewSizeToWorld(t,e){return this.engineMediator?{width:this.engineMediator.previewSpaceToWorldSpace(t.width,e),height:this.engineMediator.previewSpaceToWorldSpace(t.height,e)}:{width:0,height:0}}outputToWorld(t){return this.engineMediator?((0,o.ab)(t),this.engineMediator.outputSpaceToWorldSpace(t)):{x:0,y:0}}previewToOutput(t){return this.engineMediator?((0,o.ab)(t),this.engineMediator.previewSpaceToOutputSpace(t)):{x:0,y:0}}get outputContainer(){return this.engineMediator.output.container}};(0,o.c)([o.l],Is.prototype,"resize",2),(0,o.c)([o.l],Is.prototype,"export",2),(0,o.c)([o.l],Is.prototype,"clickableCanvas",2);var Rs=(0,r.ZP)(ar)`
  margin: 2px;
  min-width: ${t=>t.theme.measurements.basicCard.large.width}px;
  height: ${t=>t.theme.measurements.basicCard.large.height}px;
  color: ${t=>t.theme.card.foreground};
`,Ds=(0,r.ZP)(ar)`
  margin: 2px;
  min-width: ${t=>t.theme.measurements.basicCard.medium.width}px;
  height: ${t=>t.theme.measurements.basicCard.medium.height}px;
  color: ${t=>t.theme.card.foreground};
`,Os=(0,r.ZP)(lo).attrs((()=>({"data-test":o.Sa.CardContainer})))`
  transition-property: width;
  transition-duration: 0.4s;
  transition-timing-function: ease-in;
  height: ${t=>t.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
`,Ls=(0,r.ZP)(H)`
  &&& {
    min-height: 32px;
    font-size: ${t=>t.theme.measurements.fontSystem.basicUICardLabel.size}px;
    letter-spacing: ${t=>t.theme.measurements.fontSystem.basicUICardLabel.letterSpacing}px;
    text-transform: ${t=>t.theme.measurements.fontSystem.basicUICardLabel.case};
  }
`,As=r.ZP.div`
  display: flex;
  /* This fixes an IE11 issue where the items are behind the category */
  flex: 1 0 auto;
`,_s=r.ZP.div.attrs((()=>({"data-test":o.Sa.BasicToolControlBar})))`
  position: relative;
  display: flex;
  flex-shrink: 0;
  height: auto;
  transition: max-height 0.4s ease-in-out;
  ${t=>t.show?r.iv`
          max-height: 80px;
        `:r.iv`
          max-height: 0px;
        `}
`,Fs=_s;_s.defaultProps={show:!0};var $s=r.ZP.div`
  text-align: -moz-center;
  text-align: center;
  text-align: -webkit-center;
  margin: 0 10vw;
  height: auto;
  box-shadow: ${t=>t.theme.toolControlBar.shadow};
  @media all and (min-width: 0) and (max-width: 599px) {
    margin: 0 5vw;
  }
`,Bs=$s,Hs=r.ZP.div`
  width: 100px;
  @media all and (min-width: 0) and (max-width: 599px) {
    width: 42px;
  }
`,Ns=r.ZP.div.attrs((()=>({"data-test":o.Sa.ToolControlBarExpandableControls})))`
  position: absolute;
  left: 0%;
  transform: translateY(0%) scaleY(0);
  justify-content: center;
  padding: 0 5vw;
  width: 90%;
  height: ${t=>t.theme.measurements.basicUIToolControlBar.controlsBarHeight}px;
  display: flex;
  align-items: center;
  transition: transform 0.4s ease-in-out;
  z-index: ${t=>t.theme.measurements.zIndex.controlsBar};
  background: ${t=>t.theme.toolControlBar.background};
  color: ${t=>t.theme.toolControlBar.inputLabelForeground};

  ${({show:t})=>t&&r.iv`
      transform: translateY(-100%) scaleY(1);
    `}
`,Ws=r.ZP.div`
  display: flex;
  justify-content: center;
  align-items: center;
`,Vs=({label:t,className:e,children:i})=>n.createElement(Ws,{"aria-label":t,className:e},i);function Us(){return(0,n.useContext)(Te)}var Zs=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-blacks-icon",d:"M24 12c-6.627 0-12 5.373-12 12s5.373 12 12 12 12-5.373 12-12-5.373-12-12-12m0 2c5.514 0 10 4.486 10 10s-4.486 10-10 10-10-4.486-10-10 4.486-10 10-10m4 12c0 2.788-2.326 3.879-7 3V18.5c4.148-.459 6.516.226 6.516 2.623 0 1.207-.492 1.998-1.512 2.474C27.504 23.999 28 24.619 28 26zm-5-6v3c2.244.068 2.775-.719 2.775-1.536 0-1.22-.531-1.812-2.775-1.464zm0 7.5c2.19.193 3.038-.04 3.038-1.484 0-1.37-1.096-1.695-3.038-1.516v3z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-blacks-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-blacks-icon"}))),Gs=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-brightness-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),n.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",null,n.createElement("use",{xlinkHref:"#photoeditorsdk-brightness-icon"})),n.createElement("use",{fillOpacity:"0.9",transform:"rotate(-45 24.039 24)",xlinkHref:"#photoeditorsdk-brightness-icon"}))),js=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-clarity-icon",d:"M24 12L13 24.001 24 36l11-11.999L24 12zm-8.29 12.001H21l3-9.041 8.29 9.041-8.28 9.029L28 24.001h-7l2.99 9.029-8.28-9.029z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-clarity-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-clarity-icon"}))),Ys=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-contrast-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c-6.62 0-12 5.38-12 12s5.38 12 12 12 12-5.38 12-12-5.38-12-12-12"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-contrast-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-contrast-icon"}))),Xs=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-exposure-icon",d:"M24 34V14c5.51 0 10 4.49 10 10s-4.49 10-10 10m0-22c6.62 0 12 5.38 12 12s-5.38 12-12 12-12-5.38-12-12 5.38-12 12-12zm-3.536 8.464l-2.121 2.122-2.121-2.122-1.414 1.415L16.929 24l-2.121 2.121 1.414 1.415 2.121-2.122 2.121 2.122 1.415-1.415L19.757 24l2.122-2.121-1.415-1.415zm5.304 4.597l4.242-4.243 1.415 1.414-4.243 4.243-1.414-1.414z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-exposure-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(45 24 24)",xlinkHref:"#photoeditorsdk-exposure-icon"}))),Ks=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-gamma-icon",d:"M22.185 33.836c.594.109 1.2.164 1.815.164v2c-.735 0-1.462-.066-2.175-.197zm5.58-.568l.753 1.852c-.675.275-1.375.487-2.093.635l-.402-1.96c.597-.122 1.18-.299 1.741-.527zm-9.446-1.037c.5.346 1.03.646 1.586.895l-.82 1.824c-.666-.3-1.303-.66-1.903-1.074zm12.884-1.295l1.44 1.388a12.06 12.06 0 01-1.65 1.429l-1.167-1.625a10.06 10.06 0 001.377-1.192zm-15.758-1.754c.316.52.679 1.01 1.083 1.464l-1.493 1.33a12.038 12.038 0 01-1.3-1.756zm17.97-1.802l1.882.676a11.948 11.948 0 01-.925 1.982l-1.727-1.008a9.948 9.948 0 00.77-1.65zM24 18c.091 0 .182.002.273.006L24 18a6.071 6.071 0 01.668.037l.192.024a5.974 5.974 0 011.847.585l.01.005a5.992 5.992 0 011.154.768A5.99 5.99 0 0130 24c0 3.309-2.691 6-6 6a5.985 5.985 0 01-4.404-1.929l.163.17a6.052 6.052 0 01-1.353-2.07A5.951 5.951 0 0118 24c0-3.309 2.691-6 6-6zm2.827 3.173l-5.654 5.654A3.988 3.988 0 0024 28c2.206 0 4-1.794 4-4a3.988 3.988 0 00-1.173-2.827zM14.08 25.268c.076.606.208 1.2.392 1.777l-1.905.608a11.936 11.936 0 01-.472-2.134zm21.885-2.192a12.16 12.16 0 01-.032 2.198l-1.989-.21a10.193 10.193 0 00.027-1.836zM12.522 20.49l1.912.584a9.943 9.943 0 00-.37 1.783l-1.987-.226c.083-.73.232-1.445.445-2.14zm22.059-2.155c.345.643.63 1.316.853 2.013l-1.905.608a9.934 9.934 0 00-.71-1.676zm-19.587-2.266l1.5 1.323c-.402.456-.762.948-1.075 1.47l-1.715-1.03c.376-.625.808-1.215 1.29-1.763zm16.272-1.62c.58.442 1.12.936 1.61 1.476l-1.479 1.346c-.41-.45-.859-.862-1.343-1.23zm-12.241-1.372l.83 1.82a9.986 9.986 0 00-1.58.903l-1.147-1.638a11.986 11.986 0 011.897-1.085zm7.7-.766c.714.166 1.408.396 2.076.688L28 14.832a9.916 9.916 0 00-1.727-.573zm-2.857-.31l.021 2c-.613.006-1.22.068-1.812.184l-.383-1.964a12.046 12.046 0 012.174-.22z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"#fff"},n.createElement("use",{xlinkHref:"#photoeditorsdk-gamma-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-gamma-icon"}))),Js=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-highlights-icon",d:"M31.07 31.07A9.932 9.932 0 0124 34c-2.67 0-5.18-1.04-7.07-2.93l14.14-14.14c3.9 3.9 3.9 10.24 0 14.14m1.42-15.56A11.995 11.995 0 0024 12c-3.07 0-6.14 1.17-8.49 3.51-4.68 4.69-4.68 12.29 0 16.98C17.86 34.83 20.93 36 24 36c3.07 0 6.14-1.17 8.49-3.51 4.68-4.69 4.68-12.29 0-16.98"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-highlights-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-highlights-icon"}))),qs=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-saturation-icon",d:"M17 31c1.334 1.099 2 2.177 2 3.234 0 .797-.454 1.39-1.211 1.655-.165.057-.428.094-.789.111l-.172-.01a2.54 2.54 0 01-.617-.101C15.454 35.624 15 35.03 15 34.234c0-1.057.666-2.135 2-3.234zm8.7-6l-4.24 4H17v-3.81l.2-.19h8.5zm-.7-7.59l4.24 4.25L26.76 24h-8.54L25 17.41zm7.778-3.532a3 3 0 01.135 4.1l-.135.143-1.414 1.414 1.414 1.415-1.414 1.414-7.07-7.071 1.413-1.414 1.414 1.413 1.414-1.414a3.001 3.001 0 014.243 0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-saturation-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-saturation-icon"}))),Qs=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-shadows-icon",d:"M30.365 17.637l3.076 3.076c.382 1.09.566 2.234.56 3.387l-5.05-5.049-1.414 1.414 6.123 6.124a9.674 9.674 0 01-.792 2.036l-6.746-6.745-1.414 1.414 7.036 7.036c-.212.254-.43.502-.672.742-.24.24-.488.46-.742.672l-7.036-7.036-1.414 1.414 6.745 6.746a9.674 9.674 0 01-2.036.792l-6.124-6.123-1.414 1.414L24.101 34a10.012 10.012 0 01-3.388-.558l-3.076-3.076-.707.707c-3.896-3.896-3.896-10.246 0-14.142 3.896-3.896 10.246-3.896 14.142 0l-.707.707zm-14.849-2.12c-4.688 4.687-4.688 12.281 0 16.97a12.036 12.036 0 004.108 2.693c.064.022.127.057.191.078 4.264 1.577 9.242.658 12.671-2.772 3.43-3.429 4.35-8.407 2.772-12.67-.02-.065-.056-.128-.078-.192a12.036 12.036 0 00-2.694-4.108c-4.688-4.688-12.282-4.688-16.97 0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-shadows-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shadows-icon"}))),ta=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-sharpness-icon",d:"M24 12l11 24H13l11-24zm0 4.8V34h7.883L24 16.8z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-sharpness-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-sharpness-icon"}))),ea=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-temperature-icon",d:"M24 12a4 4 0 014 4v7.255a7 7 0 11-8 0V16a4 4 0 014-4zm0 2a2 2 0 00-2 2v8.298l-.856.597a5 5 0 105.712 0L26 24.298V16a2 2 0 00-2-2zm1 6v5.126A4.002 4.002 0 0124 33a4 4 0 01-1-7.874V20h2z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-temperature-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-temperature-icon"}))),ia=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-whites-icon",d:"M24 12c6.627 0 12 5.373 12 12s-5.373 12-12 12-12-5.373-12-12 5.373-12 12-12zm-2 6.46h-2c.221 4.539.762 9.051 1 11.04h1.5l1.5-5.52 1.5 5.52H27c.238-1.989.779-6.501 1-11.04h-2c-.051 1.071-.432 7.446-.5 7.973-.459-1.717-.541-3.111-1-4.811h-1c-.442 1.7-.541 2.975-1 4.811-.051-.527-.466-6.902-.5-7.973z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-whites-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-whites-icon"}))),oa=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-close-icon",d:"M21.583 0L24 2.416 14.416 12 24 21.584 21.583 24 12 14.416 2.417 24 0 21.584 9.584 12 0 2.416 2.417 0 12 9.584 21.583 0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-close-icon"})),n.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-close-icon"})));var ra=function(){return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-export-icon",d:"M22 1.5a1.5 1.5 0 011.493 1.356L23.5 3H22h1.5v17a1.5 1.5 0 01-1.5 1.5H12a1.5 1.5 0 01-1.493-1.356L10.5 20v-6h2v5.499h9v-16h-9V9h-2V3A1.5 1.5 0 0112 1.5h10zM6.15 5.817L7.634 7.3l-3.171 3.171h13.978v2H4.47l3.171 3.17-1.483 1.483L.5 11.467l5.65-5.65z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"#fff"},n.createElement("use",{xlinkHref:"#photoeditorsdk-export-icon"})),n.createElement("use",{fill:"currentcolor",fillOpacity:"0.9",transform:"rotate(90 12 11.5)",xlinkHref:"#photoeditorsdk-export-icon"})))},na=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-redo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-redo-icon"})),n.createElement("use",{fill:"currentColor",transform:"matrix(0 1 1 0 .25 -.25)",xlinkHref:"#photoeditorsdk-redo-icon"}))),sa=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"25",height:"25",viewBox:"0 0 25 25"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-undo-icon",d:"M4 10.065C4 4.506 8.365 0 13.75 0s9.75 4.506 9.75 10.065v9.29h-3v-9.29c0-3.849-3.022-6.968-6.75-6.968S7 6.217 7 10.065v7.741h3L5.5 24 1 17.806h3v-7.741z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-undo-icon"})),n.createElement("use",{fill:"currentColor",transform:"rotate(90 12.25 12)",xlinkHref:"#photoeditorsdk-undo-icon"})));var aa=function(){return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Center Align",width:"26",height:"26"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-align-center-icon",d:"M31.5 30v3h-15v-3h15zm4.5-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"#fff"},n.createElement("use",{xlinkHref:"#photoeditorsdk-align-center-icon"})),n.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-center-icon"})))},la=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Left Align",width:"26",height:"26"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-align-left-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"#fff"},n.createElement("use",{xlinkHref:"#photoeditorsdk-align-left-icon"})),n.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-align-left-icon"})));var ca=function(){return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",viewBox:"0 0 48 48",width:"26",height:"26",focusable:"false","aria-hidden":"true","aria-label":"Right Align"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-align-right-icon",d:"M27 30v3H12v-3h15zm9-7.5v3H12v-3h24zm0-7.5v3H12v-3h24z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H48V48H0z"}),n.createElement("mask",{fill:"#fff"},n.createElement("use",{xlinkHref:"#photoeditorsdk-align-right-icon"})),n.createElement("use",{fill:"currentColor",transform:"matrix(-1 0 0 1 48 0)",xlinkHref:"#photoeditorsdk-align-right-icon"})))},ha=()=>n.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Adjustments",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("g",null,n.createElement("g",{fill:"#D8D8D8",opacity:"0"},n.createElement("rect",{width:"48",height:"48"})),n.createElement("g",{transform:"translate(12 12)"},n.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),n.createElement("g",{transform:"translate(2 13)",fill:"currentColor"},n.createElement("path",{d:"M3.02746439,4 C3.00931666,4.16416693 3,4.33099545 3,4.5 C3,4.66900455 3.00931666,4.83583307 3.02746439,5 L0,5 L0,4 L3.02746439,4 Z M13,4 L20,4 L20,5 L13,5 L13,4 Z",fillOpacity:"0.2"}),n.createElement("path",{d:"M5.09842503,6.29819429 C5.0340931,6.05140089 5,5.7851211 5,5.5 C5,3.56700338 6.56700338,2 8.5,2 C8.7851211,2 9.05140089,2.0340931 9.29819429,2.09842503 C10.0278893,2.64566496 10.5,3.5176988 10.5,4.5 C10.5,6.15685425 9.15685425,7.5 7.5,7.5 C6.5176988,7.5 5.64566496,7.02788926 5.09842503,6.29819429 Z M11.1637159,7.11349161 C10.874061,7.51881791 10.5188179,7.87406095 10.1134916,8.16371592 C10.5772175,7.93004328 10.9300433,7.5772175 11.1637159,7.11349161 Z",fillOpacity:"0.2"}),n.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,0 7.5,0 C9.98528137,0 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"})),n.createElement("g",{transform:"rotate(-180 11 5.5)",fill:"currentColor"},n.createElement("path",{d:"M11.9725356,4 L20,4 L20,5 L11.9725356,5 C11.9906833,4.83583307 12,4.66900455 12,4.5 C12,4.33099545 11.9906833,4.16416693 11.9725356,4 Z M0,4 L2,4 L2,5 L0,5 L0,4 Z",fillOpacity:"0.2"}),n.createElement("g",{transform:"rotate(-180 5 3.5)",fillOpacity:"0.2"},n.createElement("path",{d:"M0.0984250251,4.29819429 C0.0340930963,4.05140089 0,3.7851211 0,3.5 C0,1.56700338 1.56700338,0 3.5,0 C3.7851211,0 4.05140089,0.0340930963 4.29819429,0.0984250251 C5.02788926,0.645664963 5.5,1.5176988 5.5,2.5 C5.5,4.15685425 4.15685425,5.5 2.5,5.5 C1.5176988,5.5 0.645664963,5.02788926 0.0984250251,4.29819429 Z M6.16371592,5.11349161 C5.87406095,5.51881791 5.51881791,5.87406095 5.11349161,6.16371592 C5.5772175,5.93004328 5.93004328,5.5772175 6.16371592,5.11349161 Z"})),n.createElement("path",{d:"M7.5,7.5 C9.15685425,7.5 10.5,6.15685425 10.5,4.5 C10.5,2.84314575 9.15685425,1.5 7.5,1.5 C5.84314575,1.5 4.5,2.84314575 4.5,4.5 C4.5,6.15685425 5.84314575,7.5 7.5,7.5 Z M7.5,9 C5.01471863,9 3,6.98528137 3,4.5 C3,2.01471863 5.01471863,-3.6739404e-16 7.5,-3.6739404e-16 C9.98528137,-3.6739404e-16 12,2.01471863 12,4.5 C12,6.98528137 9.98528137,9 7.5,9 Z",fillOpacity:"0.87"}))))));var da=function(){return n.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Brush",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},n.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{fillOpacity:"0.87",d:"M14.73 18.86C13.293 19.503 11.624 20 10 20 2 20 0 13 0 10c.486.972 2.37 5.848 7.537 4.165C7.873 17.125 10.427 19 13 19c.6 0 1.177-.05 1.73-.14zM8.422 8.63a7.352 7.352 0 00-1.127 1.616L2.401 3.705c-.215-.287-.178-.807.072-1.056l.088-.088L8.5 8.5l-.078.13z",opacity:"0.5",transform:"translate(12 12) translate(2 2)"}),n.createElement("path",{fillOpacity:"0.87",d:"M7.295 10.246c-.27.526-.48 1.09-.615 1.68L1.2 4.603c-.663-.885-.564-2.24.212-3.015l.176-.176c.78-.78 2.121-.881 3.015-.212l7.245 5.421a6.088 6.088 0 00-1.67.624L3.706 2.401c-.294-.22-.801-.184-1.056.072l-.176.176c-.25.25-.287.769-.072 1.056l4.894 6.54z",transform:"translate(12 12) translate(2 2)"}),n.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858z",opacity:"0.5",transform:"translate(12 12) translate(2 2) translate(7 7)"}),n.createElement("path",{fillOpacity:"0.25",d:"M10.379 9.027c.053.135.108.263.165.385C8.914 10.158 7.545 10.5 6 10.5c-2.165 0-4-1.706-4-4 0-1.528.79-2.921 1.88-3.74-.882 2.084-1.025 6.482 6.499 6.267z",transform:"translate(12 12) translate(2 2) translate(7 7)"}),n.createElement("path",{fillOpacity:"0.87",d:"M9.702 6.554c-.185-.869-.151-.71-.207-.955C8.88 2.902 8.145 2 6 2 3.98 2 2 4.08 2 6.5c0 2.294 1.835 4 4 4 1.545 0 2.915-.342 4.544-1.088-.332-.7-.578-1.619-.842-2.858zM6 12C3.239 12 .5 9.842.5 6.5S3.239.5 6 .5c6.5 0 4 8 7 9.342C11 10.947 8.761 12 6 12z",transform:"translate(12 12) translate(2 2) translate(7 7)"})))},pa=()=>n.createElement("svg",{"aria-hidden":"true",focusable:"false","aria-label":"Filter",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("g",null,n.createElement("g",{fill:"#D8D8D8",opacity:"0"},n.createElement("rect",{width:"48",height:"48"})),n.createElement("g",{transform:"translate(16 14)",fill:"currentColor"},n.createElement("g",null,n.createElement("path",{d:"M1.53468397,11.3244256 C2.30584171,10.1516526 4.0927284,8.69757613 8,10 C11.5643313,11.1881104 13.1877038,10.2588113 13.9183327,9.30853287 C14.2918933,10.1286474 14.5,11.0400207 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.41014913,18.5 1.5,15.5898509 1.5,12 C1.5,11.7718729 1.51175212,11.5464906 1.53468397,11.3244256 Z",fillOpacity:"0.2"}),n.createElement("path",{d:"M1.53471819,12.6759057 C2.39408133,13.5811739 4.12541941,14.1109247 5.5,13.5 C9.81068889,11.5841383 9.99203585,9.66827654 14.3948028,10.8290113 C14.4639074,11.2088572 14.5,11.6002137 14.5,12 C14.5,15.5898509 11.5898509,18.5 8,18.5 C4.63838968,18.5 1.87279864,15.9481381 1.53471819,12.6759057 Z",fillOpacity:"0.25"}),n.createElement("path",{d:"M11,1.44328993e-15 L11,4.58151705 C13.9318303,5.7682918 16,8.64262245 16,12 C16,16.418278 12.418278,20 8,20 C3.581722,20 0,16.418278 0,12 C0,8.64262245 2.06816966,5.7682918 5,4.58151705 L5,1.60982339e-15 L6.5,1.44328993e-15 L6.5,5.67393184 C3.6333,6.35109564 1.5,8.92641836 1.5,12 C1.5,15.5898509 4.41014913,18.5 8,18.5 C11.5898509,18.5 14.5,15.5898509 14.5,12 C14.5,8.92641836 12.3667,6.35109564 9.5,5.67393184 L9.5,1.77635684e-15 L11,1.44328993e-15 Z",fillOpacity:"0.87"})))))),ua=()=>n.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Focus",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("g",null,n.createElement("g",{fill:"#D8D8D8",opacity:"0"},n.createElement("rect",{width:"48",height:"48"})),n.createElement("g",{transform:"translate(12 12)"},n.createElement("rect",{fill:"#D8D8D8",opacity:"0",width:"24",height:"24"}),n.createElement("g",{transform:"translate(4 2)",fill:"currentColor"},n.createElement("path",{d:"M8.51312274,19.9836057 C8.77273397,19.9669655 9.02898229,19.9377873 9.2812837,19.8966625 C9.14309542,19.9643562 9.04607398,20 9,20 C8.83633495,20 8.67398178,19.9944755 8.51312274,19.9836057 Z M2.27242753,15.0235117 C2.09503729,14.4174909 2,13.7771617 2,13.115 C2,8.89625769 7.39855682,4.1952443 9.03524007,2.8669743 C9.66704719,3.45933018 10.2896864,4.09178959 10.8802638,4.75434357 C12.9939648,7.12565193 14.310818,9.45010207 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C5.525182,18.5 3.37015673,17.0943182 2.27242753,15.0235117 Z M15.999821,11.9547651 C15.9999402,11.9698392 16,11.9849176 16,12 C16,12.0581275 15.9984809,12.1163475 15.9954873,12.1746435 C15.9978914,12.1015915 15.9993401,12.0282946 15.999821,11.9547651 Z",fillOpacity:"0.2"}),n.createElement("path",{d:"M3.47269084,16.6357644 C3.47244857,13.6389249 9.59189484,15.3529683 12,11.5 C13.2066771,9.56931667 12.316614,7.05620551 11.0727604,4.97270186 C13.0737756,7.26814668 14.316054,9.51197209 14.481291,11.4644804 C14.4937541,11.6117488 14.5,11.7569175 14.5,11.9 C14.5,15.5490785 11.5855665,18.5 8,18.5 C6.2411126,18.5 4.64375705,17.7899702 3.47269084,16.6357644 Z",fillOpacity:"0.25"}),n.createElement("path",{d:"M7.73975027,2.16383649 C6.84545319,2.94914111 5.95084629,3.82194197 5.11973623,4.75434357 C3.00603518,7.12565193 1.68918197,9.45010207 1.51870896,11.4644804 C1.50624591,11.6117488 1.5,11.7569175 1.5,11.9 C1.5,15.5492218 4.41434886,18.5 8,18.5 C11.5855665,18.5 14.5,15.5490785 14.5,11.9 C14.5,11.7569175 14.4937541,11.6117488 14.481291,11.4644804 C14.310818,9.45010207 12.9939648,7.12565193 10.8802638,4.75434357 C10.0491537,3.82194197 9.15454681,2.94914111 8.26024973,2.16383649 C8.17157048,2.08596503 8.08476013,2.01060875 8,1.93784184 C7.91523987,2.01060875 7.82842952,2.08596503 7.73975027,2.16383649 Z M8,20 C3.581722,20 0,16.3735065 0,11.9 C0,6.05 8,0 8,0 C8,0 16,6.05 16,11.9 C16,16.3732777 12.418278,20 8,20 Z",fillOpacity:"0.87"})))))),ga=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",focusable:"false","aria-hidden":"true","aria-label":"Frames",width:"48",height:"48",viewBox:"0 0 48 48"},n.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},n.createElement("path",{fillOpacity:"0.2",d:"M8 8L17 7 17 17 7 17z"}),n.createElement("path",{fillOpacity:"0.87",d:"M4.5 19.5h15v-15h-15v15zM3 3h18v18H3V3z"}),n.createElement("path",{fillOpacity:"0.87",d:"M7 17h10V7H7v10zM6 6h12v12H6V6z"}),n.createElement("path",{fillOpacity:"0.25",d:"M9 15L11 12 13 14 14 13.5 15 15z"}))),ma=()=>n.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Library",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},n.createElement("g",null,n.createElement("polygon",{fillOpacity:"0.2",points:"3 3 12.5 1.5 12.5 15.5 1.5 15.5"}),n.createElement("path",{d:"M1.5,1.5 L1.5,15.5 L12.5,15.5 L12.5,1.5 L1.5,1.5 Z M0,0 L14,0 L14,17 L0,17 L0,0 Z",fillOpacity:"0.87"}),n.createElement("polygon",{fillOpacity:"0.25",points:"3 11 6 7 8 9 9 8.5 11 11"}),n.createElement("circle",{fillOpacity:"0.25",cx:"9",cy:"5",r:"1"}),n.createElement("rect",{fillOpacity:"0.25",x:"3",y:"13",width:"8",height:"1"}),n.createElement("g",{transform:"rotate(14 -2.352 56.952)",fillOpacity:"0.2"},n.createElement("path",{d:"M1.32904158,1.07500967e-13 L5,1.07500967e-13 L5,14.7234101 L4,10.7126291 L4,1 L1.57836958,1 L1.32904158,1.07500967e-13 Z M5,14.9745817 L5,16 L0.887271787,16 L5,14.9745817 Z"}),n.createElement("path",{d:"M1.82769758,2 L3,2 L3,6.70184819 L1.82769758,2 Z"})))))),fa=()=>n.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Overlays",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"none",fillRule:"evenodd"},n.createElement("g",{transform:"translate(15 15)",fill:"currentColor"},n.createElement("path",{d:"M13.5,4 L13.5,13.5 L4,13.5 L4,5 C4,4.44771525 4.44771525,4 5,4 L13.5,4 Z M15,4 L17,4 C17.5522847,4 18,4.44771525 18,5 L18,17 C18,17.5522847 17.5522847,18 17,18 L5,18 C4.44771525,18 4,17.5522847 4,17 L4,15 L14,15 C14.5522847,15 15,14.5522847 15,14 L15,4 Z",fillOpacity:"0.2"}),n.createElement("path",{d:"M1.5,1.5 L1.5,13.5 L13.5,13.5 L13.5,1.5 L1.5,1.5 Z M1,0 L14,0 C14.5522847,-1.01453063e-16 15,0.44771525 15,1 L15,14 C15,14.5522847 14.5522847,15 14,15 L1,15 C0.44771525,15 6.76353751e-17,14.5522847 0,14 L0,1 C-6.76353751e-17,0.44771525 0.44771525,1.01453063e-16 1,0 Z",fillOpacity:"0.87"})))),ya=()=>n.createElement("svg",{focusable:"false","aria-hidden":"true",width:"48px",height:"48px",version:"1.1",xmlns:"http://www.w3.org/2000/svg","aria-label":"Stickers",viewBox:"0 0 48 48"},n.createElement("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},n.createElement("g",null,n.createElement("g",{transform:"translate(14.000000, 14.000000)",fill:"currentColor"},n.createElement("g",{transform:"translate(2.000000, 2.000000)",fillOpacity:"0.2"},n.createElement("path",{d:"M11.5840291,0.290311095 C14.1040281,1.4637822 15.9529364,3.83641178 16.3972985,6.6747443 C11.4538042,7.5567274 7.55733385,11.4556991 6.68374109,16.3973312 C3.83946575,15.9530468 1.46423317,14.1041207 0.290132399,11.5832649 C0.0988489957,10.7650202 3.01980663e-14,9.89786431 3.01980663e-14,9 C3.01980663e-14,6.64646143 0.903391324,4.50392121 2.38232909,2.90022422 C4.02683831,1.11698861 6.38297582,-3.55271368e-15 9,-3.55271368e-15 C9.89814387,-3.55271368e-15 10.7655602,0.0989105588 11.5840291,0.290311095 Z"}),n.createElement("path",{d:"M17.9877222,8 L8,17.9877222 C8.2591955,12.5923102 12.5906864,8.26470667 17.9877222,8 Z"})),n.createElement("path",{d:"M9.87290303,14.9211604 C9.09408801,14.4293124 5,11.7146562 5,9 C5,7.34 6.34,6 8,6 C8.77,6 9.47,6.52 10,7 C10.53,6.52 11.23,6 12,6 C13.66,6 15,7.34 15,9 C15,9.30171667 14.9494261,9.60343334 14.8584511,9.90209822 C12.7354304,11.0373368 10.9933363,12.7905402 9.87290303,14.9211604 Z",fillOpacity:"0.25"}),n.createElement("path",{d:"M10,1.5 C5.30557963,1.5 1.5,5.30557963 1.5,10 C1.5,14.2449983 4.61102233,17.7611603 8.68374109,18.3973312 C9.55733385,13.4556991 13.4538042,9.5567274 18.3972985,8.6747443 C17.7608961,4.60976745 14.2436106,1.5 10,1.5 Z M0,10 C0,4.4771525 4.4771525,0 10,0 C15.5228475,0 20,4.4771525 20,10 C14.5988732,10.2649073 10.2649073,14.5988732 10.0116954,19.9999933 C4.4771525,20 0,15.5228475 0,10 Z",fillOpacity:"0.87"}))))),ba=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48",focusable:"false","aria-hidden":"true","aria-label":"Texts",width:"48",height:"48"},n.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{fillOpacity:"0.2",d:"M17.883 19.5H16.07L11.702 6.833l1.235-1.411L17.883 19.5z",transform:"translate(12 12)"}),n.createElement("path",{fillOpacity:"0.87",d:"M10.8 8.818L8.483 14.5h4.275l-1.96-5.682zM10 6.5l3.5-4 5.973 17H21V21h-8v-1.5h1.483L13.276 16H7.873l-1.426 3.5H8V21H3v-1.5h1.704L10 6.5zm1.702.333L16.069 19.5h1.814L12.937 5.422l-1.235 1.411z",transform:"translate(12 12)"}),n.createElement("path",{fillOpacity:"0.2",d:"M19.55 15l-.35-1H21v1h-1.45zm1.05 3l-.35-1H21v1h-.4zM7.639 8L7.25 9H3V8h4.639zm1.167-3l-.39 1H7V5h1.806zm-2.334 6l-.389 1H6v-1h.472zm-1.166 3l-.39 1H3v-1h2.306zm-1.167 3l-.389 1H3v-1h1.139zM15.35 3L15 2h1v1h-.65zm3.15 9l-.35-1H21v1h-2.5zm-1.05-3l-.35-1H21v1h-3.55zM16.4 6l-.35-1H18v1h-1.6zm-5.9-3H9V2h2.5l-1 1zM3 5h3v1H3V5zm16 0h2v1h-2V5zM3 11h2v1H3v-1zm18-8h-4V2h4v1zM8 3H3V2h5v1z",transform:"translate(12 12)"}))),Sa=()=>n.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Text Design",width:"48",height:"48",viewBox:"0 0 48 48",xmlns:"http://www.w3.org/2000/svg"},n.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{fillOpacity:"0.87",d:"M1 0h14a1 1 0 011 1v19l-8-6-8 6V1a1 1 0 011-1zm.5 1.5V17L8 12.125 14.5 17V1.5h-13z",transform:"translate(14 14) translate(2)"}),n.createElement("path",{fillOpacity:"0.2",d:"M1.5 1.5h13V17L8 12.125 1.5 17V1.5z",transform:"translate(14 14) translate(2)"}),n.createElement("path",{fillOpacity:"0.25",d:"M9 4l2.52 7H10.2l-.7-1.85H6.45L5.77 11H4.49L6.9 4H9zm-1.04.78h-.05L6.73 8.14H9.2L7.96 4.78z",transform:"translate(14 14) translate(2)"})));var va=function(){return n.createElement("svg",{focusable:"false","aria-hidden":"true","aria-label":"Transform",width:"48",height:"48",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 48 48"},n.createElement("g",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(12 12)"},n.createElement("path",{fillOpacity:"0.2",d:"M10 10L15 9 15 15 9 15z"}),n.createElement("path",{fillOpacity:"0.87",d:"M9 15h6V9H9v6zm-1.5 0V7.5H15V3h1.5v13.5H3V15h4.5zm0 2.5H9V21H7.5v-3.5zM21 7.5V9h-3.5V7.5H21z"}),n.createElement("g",{fillOpacity:"0.2"},n.createElement("path",{d:"M0 10h1a9.003 9.003 0 015.5-8.294L7 3 10.942.044C10.632.014 10.318 0 10 0 4.477 0 0 4.477 0 10z",transform:"translate(2 2)"}),n.createElement("path",{d:"M9 20h1a9.003 9.003 0 015.5-8.294L16 13l3.942-2.956c-.31-.03-.624-.044-.942-.044-5.523 0-10 4.477-10 10z",transform:"translate(2 2) rotate(-180 14.47 15)"}))))},xa=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-icon-add-text",d:"M12 0c6.627 0 12 5.373 12 12s-5.373 12-12 12S0 18.627 0 12 5.373 0 12 0zm1 6h-2v5H6v2h5v5h2v-5h5v-2h-5V6z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-icon-add-text"})),n.createElement("use",{fill:"currentColor",fillRule:"nonzero",xlinkHref:"#photoeditorsdk-icon-add-text"}))),wa=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M12 1c5.523 0 10 4.477 10 10a9.98 9.98 0 01-3.678 7.749c1.877.92 3.445 2.251 4.502 3.88l.176.283-1.743 1.02c-1.04-1.735-2.824-3.102-4.995-3.884A9.94 9.94 0 0112 21a9.962 9.962 0 01-4.255-.948c-2.076.748-3.797 2.033-4.852 3.661l-.147.237L1 22.935c1.053-1.766 2.694-3.204 4.684-4.183A9.975 9.975 0 012 11C2 5.477 6.477 1 12 1zm0 2a8 8 0 100 16 8 8 0 000-16zm0 5a5 5 0 110 10 5 5 0 010-10zm0 2a3 3 0 100 6 3 3 0 000-6zm1-4v1h-2V6h2z"})),Ca=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("path",{fill:"currentColor",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M16.23 10.885a2.292 2.292 0 00-2.285-2.286 2.292 2.292 0 00-2.286 2.286 2.292 2.292 0 002.286 2.286 2.292 2.292 0 002.286-2.286zM13.946.599C8.265.6 3.66 5.205 3.66 10.885H.231l4.571 4.571 4.572-4.571H5.945c0-4.423 3.577-8 8-8s8 3.577 8 8a7.994 7.994 0 01-12.64 6.514l-1.623 1.646a10.3 10.3 0 006.263 2.126c5.68 0 10.286-4.606 10.286-10.286S19.625.599 13.945.599z",transform:"rotate(56 11.298 10.261)"}));var Ea=function(){return n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-shuffle-icon",d:"M24 10v8a3 3 0 01-3 3H6v3l-6-4 6-4v3h15a1 1 0 001-1v-8h2zM18 0l6 4-6 4V5H3a1 1 0 00-1 1v8H0V6a3 3 0 013-3h15V0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-shuffle-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-shuffle-icon"})))},ka=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-upload-icon",d:"M4.143 17.286l-.001 3.142h15.715v-3.142H23v6.285H1v-6.285h3.143zM12 0l9.429 9.429-2.2 2.2L13.57 5.97v9.743H10.43V5.971L4.77 11.63l-2.2-2.2L12 0z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-upload-icon"})),n.createElement("use",{fill:"currentColor",xlinkHref:"#photoeditorsdk-upload-icon"}))),Ta=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-bring-to-front-icon",d:"M21 16a2 2 0 012 2v4a2 2 0 01-2 2H3a2 2 0 01-2-2v-4a2 2 0 012-2h18zM12.006 1l5.996 5.996-1.414 1.414-3.578-3.577V12h-2.008V4.833L7.418 8.417 6.004 7.003 12.006 1z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{d:"M0 0H24V24H0z"}),n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-bring-to-front-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-bring-to-front-icon"}))),Ma=({highlight:t="currentColor",width:e=48,height:i=48})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("g",{fill:t,transform:"translate(13 13)"},n.createElement("path",{d:"M22 3.701h-1.642V1.644l-2.06-.001V0h2.538c.421 0 .682.174.827.32.322.322.337.748.337.83v2.551z"}),n.createElement("path",{d:"M1.643 3.701H0V1.165C0 .743.174.482.32.336.64.016 1.06 0 1.147 0H3.701v1.643H1.644l-.001 2.058z"}),n.createElement("path",{d:"M13.7232174 1.5486087L17.4249565 1.5486087 17.4249565 0 13.7232174 0z"}),n.createElement("path",{d:"M9.15008696 1.5486087L12.8508696 1.5486087 12.8508696 0 9.15008696 0z"}),n.createElement("path",{d:"M4.57504348 1.5486087L8.27678261 1.5486087 8.27678261 0 4.57504348 0z"}),n.createElement("path",{d:"M0 8.27582609L1.5486087 8.27582609 1.5486087 4.57504348 0 4.57504348z"}),n.createElement("path",{d:"M20.4513913 8.27582609L22 8.27582609 22 4.57504348 20.4513913 4.57504348z"}),n.createElement("path",{d:"M0 12.8508696L1.5486087 12.8508696 1.5486087 9.14913043 0 9.14913043z"}),n.createElement("path",{d:"M0 17.4249565L1.5486087 17.4249565 1.5486087 13.7232174 0 13.7232174z"}),n.createElement("path",{d:"M20.4513913 12.8508696L22 12.8508696 22 9.14913043 20.4513913 9.14913043z"}),n.createElement("path",{d:"M20.4513913 17.4249565L22 17.4249565 22 13.7232174 20.4513913 13.7232174z"}),n.createElement("path",{d:"M3.702 22H1.165c-.421 0-.682-.174-.828-.32-.322-.322-.337-.748-.337-.83v-2.552h1.643v2.059h2.059V22z"}),n.createElement("path",{d:"M20.853 22h-2.554v-1.642h2.057l.001-2.06H22v2.538c0 .42-.174.682-.319.827-.32.32-.742.337-.828.337"}),n.createElement("path",{d:"M4.57504348 22L8.27678261 22 8.27678261 20.4513913 4.57504348 20.4513913z"}),n.createElement("path",{d:"M9.15008696 22L12.8508696 22 12.8508696 20.4513913 9.15008696 20.4513913z"}),n.createElement("path",{d:"M13.7232174 22L17.4249565 22 17.4249565 20.4513913 13.7232174 20.4513913z"})))),za=({highlight:t="currentColor",width:e=48,height:i=48})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{fill:t,d:"M29.967 13.005L26.984 13c-3.35 0-5.516 2.222-5.516 5.66v2.61h-2.999c-.26 0-.469.21-.469.47v3.78c0 .26.21.47.469.47h2.999v9.541c0 .26.21.469.469.469h3.912c.26 0 .47-.21.47-.469V25.99h3.506c.259 0 .469-.21.469-.47l.001-3.78a.47.47 0 00-.469-.47h-3.508v-2.212c0-1.064.254-1.603 1.639-1.603l2.01-.001c.258 0 .468-.21.468-.47v-3.51a.47.47 0 00-.468-.47z"}))),Pa=({highlight:t="currentColor",width:e=48,height:i=48})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("g",{fill:t,transform:"translate(13 13)"},n.createElement("path",{d:"M15.125 0h-8.25A6.876 6.876 0 000 6.875v8.25A6.876 6.876 0 006.875 22h8.25A6.876 6.876 0 0022 15.125v-8.25A6.876 6.876 0 0015.125 0zm4.813 15.125a4.818 4.818 0 01-4.813 4.813h-8.25a4.818 4.818 0 01-4.813-4.813v-8.25a4.818 4.818 0 014.813-4.813h8.25a4.818 4.818 0 014.813 4.813v8.25z"}),n.createElement("path",{d:"M11 5.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zm0 8.938A3.442 3.442 0 017.562 11 3.441 3.441 0 0111 7.562 3.441 3.441 0 0114.438 11 3.442 3.442 0 0111 14.438z"}),n.createElement("circle",{cx:"16.913",cy:"5.088",r:"1"})))),Ia=({highlight:t="currentColor",width:e=48,height:i=48})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:i,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillOpacity:"0.9",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("path",{fill:t,d:"M36 17.305c-.892.402-1.843.668-2.835.797a4.997 4.997 0 002.165-2.79 9.685 9.685 0 01-3.12 1.222 4.874 4.874 0 00-3.595-1.596c-2.723 0-4.916 2.267-4.916 5.047 0 .4.032.785.113 1.151-4.09-.205-7.71-2.215-10.141-5.278a5.18 5.18 0 00-.673 2.55c0 1.748.877 3.297 2.185 4.194a4.766 4.766 0 01-2.223-.621v.055c0 2.452 1.705 4.49 3.942 4.958-.4.113-.837.167-1.29.167-.315 0-.633-.019-.931-.087.637 1.999 2.446 3.468 4.597 3.516a9.73 9.73 0 01-6.1 2.152c-.404 0-.791-.018-1.178-.07a13.601 13.601 0 007.548 2.266c9.054 0 14.004-7.693 14.004-14.36 0-.224-.008-.439-.018-.653A9.958 9.958 0 0036 17.305z"}))),Ra=r.ZP.svg.attrs({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink"})``,Da=({highlight:t="#565656",width:e=32,height:i=32})=>n.createElement(Ra,{width:e,height:i,viewBox:"0 0 32 32"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("g",{fill:t,transform:"translate(-8 -8)"},n.createElement("g",{transform:"translate(8 8)"},n.createElement("g",null,n.createElement("path",{d:"M.941 31.992h2.824v-.94L.941 31.05v-2.822h-.94v2.846s-.004.918.94.918"}),n.createElement("path",{d:"M31.974 31.051v-2.823h-.942v2.823h-2.823v.941h2.846s.919.003.919-.94"}),n.createElement("path",{d:"M4.62305882 31.9926588L8.38776471 31.9926588 8.38776471 31.0514824 4.62305882 31.0514824z"}),n.createElement("path",{d:"M9.32894118 31.9926588L13.0936471 31.9926588 13.0936471 31.0514824 9.32894118 31.0514824z"}),n.createElement("path",{d:"M14.0348235 31.9926588L17.7995294 31.9926588 17.7995294 31.0514824 14.0348235 31.0514824z"}),n.createElement("path",{d:"M18.7407059 31.9926588L22.5054118 31.9926588 22.5054118 31.0514824 18.7407059 31.0514824z"}),n.createElement("path",{d:"M23.4465882 31.9926588L27.2112941 31.9926588 27.2112941 31.0514824 23.4465882 31.0514824z"}),n.createElement("path",{d:"M0 .94v2.824h.941L.942.941h2.823V0H.919S0-.002 0 .94"}),n.createElement("path",{d:"M31.032 0H28.21v.94l2.823.002v2.822h.942V.92s.002-.92-.942-.92"}),n.createElement("path",{d:"M4.62305882 0.940423529L8.38776471 0.940423529 8.38776471 -0.000752941176 4.62305882 -0.000752941176z"}),n.createElement("path",{d:"M9.32894118 0.940423529L13.0936471 0.940423529 13.0936471 -0.000752941176 9.32894118 -0.000752941176z"}),n.createElement("path",{d:"M14.0348235 0.940423529L17.7995294 0.940423529 17.7995294 -0.000752941176 14.0348235 -0.000752941176z"}),n.createElement("path",{d:"M18.7407059 0.940423529L22.5054118 0.940423529 22.5054118 -0.000752941176 18.7407059 -0.000752941176z"}),n.createElement("path",{d:"M23.4465882 0.940423529L27.2112941 0.940423529 27.2112941 -0.000752941176 23.4465882 -0.000752941176z"}),n.createElement("path",{d:"M0 8.46324706L0.941176471 8.46324706 0.941176471 4.69854118 0 4.69854118z"}),n.createElement("path",{d:"M0 13.1691294L0.941176471 13.1691294 0.941176471 9.40442353 0 9.40442353z"}),n.createElement("path",{d:"M0 17.8750118L0.941176471 17.8750118 0.941176471 14.1103059 0 14.1103059z"}),n.createElement("path",{d:"M0 22.5808941L0.941176471 22.5808941 0.941176471 18.8161882 0 18.8161882z"}),n.createElement("path",{d:"M0 27.2867765L0.941176471 27.2867765 0.941176471 23.5220706 0 23.5220706z"}),n.createElement("path",{d:"M30.976 8.46324706L31.9171765 8.46324706 31.9171765 4.69854118 30.976 4.69854118z"}),n.createElement("path",{d:"M30.976 13.1691294L31.9171765 13.1691294 31.9171765 9.40442353 30.976 9.40442353z"}),n.createElement("path",{d:"M30.976 17.8750118L31.9171765 17.8750118 31.9171765 14.1103059 30.976 14.1103059z"}),n.createElement("path",{d:"M30.976 22.5808941L31.9171765 22.5808941 31.9171765 18.8161882 30.976 18.8161882z"}),n.createElement("path",{d:"M30.976 27.2867765L31.9171765 27.2867765 31.9171765 23.5220706 30.976 23.5220706z"})))))),Oa=({highlight:t="#565656",width:e=32,height:i=48})=>n.createElement(Ra,{width:e,height:i,viewBox:"0 0 42 32"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("g",{fill:t,transform:"translate(-3 -8)"},n.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5"})))),La=({highlight:t="#565656",width:e=26,height:i=46})=>n.createElement(Ra,{width:e,height:i,viewBox:"0 0 26 46"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("g",{fill:t,transform:"translate(-11 -1)"},n.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z",transform:"rotate(90 24 24)"})))),Aa=({highlight:t="#565656",width:e=26,height:i=46})=>n.createElement(Ra,{width:e,height:i,viewBox:"0 0 26 46"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("g",{fill:t,transform:"translate(-11 -1)"},n.createElement("path",{d:"M1 11.496A.5.5 0 011.5 11h45a.5.5 0 01.5.496v25.008a.5.5 0 01-.5.496h-45a.5.5 0 01-.5-.496V11.496z"})))),_a=({highlight:t="#565656",mask:e="#fff",width:i=32,height:o=32})=>n.createElement(Ra,{width:i,height:o,viewBox:"0 0 32 32"},n.createElement("defs",null,n.createElement("rect",{id:"photoeditorsdk-square-icon",width:"32",height:"32",x:"0.92",y:"0.707",rx:"1"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("g",{transform:"translate(-8 -8)"},n.createElement("g",{transform:"translate(7.08 7.293)"},n.createElement("mask",{fill:e},n.createElement("use",{xlinkHref:"#photoeditorsdk-square-icon"})),n.createElement("use",{fill:t,xlinkHref:"#photoeditorsdk-square-icon"}))))),Fa=({highlight:t="#565656",width:e=32,height:i=42})=>n.createElement(Ra,{width:e,height:i,viewBox:"0 0 32 42"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("g",{fill:t,transform:"translate(-8 -3)"},n.createElement("rect",{width:"42",height:"32",x:"3",y:"8",rx:"0.5",transform:"rotate(90 24 24)"})))),$a=({main:t="#424242",highlight:e="#565656",width:i="48px",height:o="48px"})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("rect",{width:"28",height:"3",x:"12",y:"41",fill:t,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),n.createElement("rect",{width:"34",height:"28",x:"7",y:"8",fill:e,rx:"0.5",transform:"matrix(1 0 0 -1 0 44)"}),n.createElement("rect",{width:"3",height:"3",x:"8",y:"41",fill:t,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),n.createElement("rect",{width:"28",height:"3",x:"12",y:"37",fill:t,rx:"0.5",transform:"matrix(-1 0 0 1 52 0)"}),n.createElement("rect",{width:"28",height:"3",x:"12",y:"4",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}),n.createElement("rect",{width:"3",height:"3",x:"8",y:"37",fill:t,rx:"0.5",transform:"matrix(-1 0 0 1 19 0)"}),n.createElement("rect",{width:"3",height:"3",x:"8",y:"4",fill:t,rx:"0.5",transform:"matrix(1 0 0 -1 0 11)"}))),Ba=({main:t="#424242",highlight:e="#565656",width:i="48px",height:o="48px"})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("g",null,n.createElement("path",{fill:t,d:"M42 5a1 1 0 011 1v13a1 1 0 01-1 1H6a1 1 0 01-1-1V6a1 1 0 011-1h36zM21.505 18h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0029.51 18z"}),n.createElement("rect",{width:"22",height:"11",x:"20",y:"29",fill:t,rx:"1"}),n.createElement("rect",{width:"13",height:"10",x:"6",y:"23",fill:t,rx:"1"}),n.createElement("rect",{width:"22",height:"5",x:"20",y:"23",fill:t,rx:"1"}),n.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"}),n.createElement("rect",{width:"13",height:"9",x:"6",y:"34",fill:t,rx:"1"})))),Ha=({main:t="#424242",highlight:e="#565656",width:i="48px",height:o="48px"})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("g",{transform:"translate(5 5)"},n.createElement("path",{fill:e,d:"M37 0a1 1 0 011 1v13a1 1 0 01-1 1H1a1 1 0 01-1-1V1a1 1 0 011-1h36zM16.505 13h-2.01a.494.494 0 00-.495.5c0 .268.222.5.495.5h2.01c.28 0 .495-.224.495-.5l-.008-.088a.503.503 0 00-.487-.412zm8.004 0h-5.018a.5.5 0 000 1h5.018a.5.5 0 00.491-.5l-.008-.088A.5.5 0 0024.51 13z"}),n.createElement("rect",{width:"22",height:"11",x:"15",y:"24",fill:t,rx:"1"}),n.createElement("rect",{width:"13",height:"10",x:"1",y:"18",fill:t,rx:"1"}),n.createElement("rect",{width:"22",height:"5",x:"15",y:"18",fill:t,rx:"1"}),n.createElement("rect",{width:"7",height:"7",x:"4",y:"9",fill:t,rx:"1"}),n.createElement("rect",{width:"13",height:"9",x:"1",y:"29",fill:t,rx:"1"})))),Na=({main:t="#424242",highlight:e="#565656",width:i="48px",height:o="48px"})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("rect",{width:"26",height:"7",x:"7",y:"18",fill:t,rx:"1"}),n.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:t,rx:"1"}),n.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:t,rx:"1"}),n.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:t,rx:"1"}),n.createElement("rect",{width:"26",height:"21",x:"7",y:"27",fill:t,rx:"1"}),n.createElement("rect",{width:"26",height:"16",x:"7",y:"5",fill:e,rx:"1"}))),Wa=({main:t="#424242",highlight:e="#565656",width:i="48px",height:o="48px"})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("rect",{width:"26",height:"7",x:"7",y:"34",fill:t,rx:"1"}),n.createElement("rect",{width:"26",height:"32",x:"7",y:"5",fill:e,rx:"1"}),n.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:t,rx:"1"}),n.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:t,rx:"1"}),n.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:t,rx:"1"}),n.createElement("rect",{width:"26",height:"5",x:"7",y:"43",fill:t,rx:"1"}))),Va=({main:t="#424242",highlight:e="#565656",width:i="48px",height:o="48px"})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("rect",{width:"26",height:"7",x:"7",y:"28",fill:t,rx:"1"}),n.createElement("rect",{width:"26",height:"26",x:"7",y:"5",fill:e,rx:"1"}),n.createElement("rect",{width:"9",height:"7",x:"34",y:"11",fill:t,rx:"1"}),n.createElement("rect",{width:"9",height:"8",x:"34",y:"19",fill:t,rx:"1"}),n.createElement("rect",{width:"3",height:"3",x:"40",y:"6",fill:t,rx:"1"}),n.createElement("rect",{width:"26",height:"11",x:"7",y:"37",fill:t,rx:"1"}))),Ua=({main:t="#424242",highlight:e="#565656",width:i="48px",height:o="48px"})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("rect",{width:"20",height:"34",x:"14",y:"10",fill:e,rx:"1.5"}),n.createElement("rect",{width:"3",height:"3",x:"14",y:"5",fill:t,rx:"1"}))),Za=({main:t="#424242",highlight:e="#565656",shadow:i="#333333",width:o="48px",height:r="48px"})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:o,height:r,viewBox:"0 0 48 48"},n.createElement("defs",null,n.createElement("filter",{id:"photoeditorsdk-twitter-post-icon",width:"166.7%",height:"166.7%",x:"-33.3%",y:"-33.3%",filterUnits:"objectBoundingBox"},n.createElement("feGaussianBlur",{in:"SourceGraphic",stdDeviation:"1"}))),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),n.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:t,rx:"0.5"}),n.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:t,rx:"0.5"}),n.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:t,rx:"0.5"}),n.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:e,rx:"0.5"}),n.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:t,rx:"0.5"}),n.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:t,rx:"0.5"}),n.createElement("rect",{width:"9",height:"9",x:"8",y:"13",fill:i,filter:"url(#photoeditorsdk-twitter-post-icon)",rx:"1"}),n.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}))),Ga=({main:t="#424242",highlight:e="#565656",width:i="48px",height:o="48px"})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:t,rx:"0.5"}),n.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:t,rx:"0.5"}),n.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:t,rx:"0.5"}),n.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:t,rx:"0.5"}),n.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),n.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:t,rx:"0.5"}),n.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:t,rx:"0.5"}),n.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:e,rx:"1"}))),ja=({main:t="#424242",highlight:e="#565656",width:i="48px",height:o="48px"})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:i,height:o,viewBox:"0 0 48 48"},n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("rect",{width:"38",height:"15",x:"5",y:"5",fill:e,rx:"0.5"}),n.createElement("rect",{width:"11",height:"1",x:"5",y:"24",fill:t,rx:"0.5"}),n.createElement("rect",{width:"11",height:"1",x:"5",y:"26",fill:t,rx:"0.5"}),n.createElement("rect",{width:"11",height:"1",x:"5",y:"28",fill:t,rx:"0.5"}),n.createElement("rect",{width:"26",height:"13",x:"17",y:"24",fill:t,rx:"0.5"}),n.createElement("rect",{width:"26",height:"3",x:"17",y:"38",fill:t,rx:"0.5"}),n.createElement("rect",{width:"26",height:"3",x:"17",y:"42",fill:t,rx:"0.5"}),n.createElement("rect",{width:"7",height:"7",x:"9",y:"14",fill:t,rx:"1"}))),Ya=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-delete-icon",d:"M20 6l-2.312 15.718A1.5 1.5 0 0116.204 23H5.796a1.5 1.5 0 01-1.484-1.282L2 6h18zM7 1a1 1 0 011-1h6a1 1 0 011 1v1h7v2H0V2h7V1z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-delete-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-delete-icon"}))),Xa=({height:t=3,width:e=102,x:i=-102,className:o,style:r})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:e,height:t,viewBox:"0 0 102 3",className:o,style:r},n.createElement("pattern",{id:"photoeditorsdk-slider-dots",fill:"currentColor",patternUnits:"userSpaceOnUse",width:"102",height:"3"},n.createElement("rect",{width:"3",height:"3",x:"99",y:"0",opacity:"0.5",rx:"1.5"}),n.createElement("rect",{width:"3",height:"3",x:"88",y:"0",opacity:"0.5",rx:"1.5"}),n.createElement("rect",{width:"3",height:"3",x:"77",y:"0",opacity:"0.5",rx:"1.5"}),n.createElement("rect",{width:"3",height:"3",x:"66",y:"0",rx:"1.5"}),n.createElement("rect",{width:"3",height:"3",x:"55",y:"0",opacity:"0.5",rx:"1.5"}),n.createElement("rect",{width:"3",height:"3",x:"44",y:"0",opacity:"0.5",rx:"1.5"}),n.createElement("rect",{width:"3",height:"3",x:"33",y:"0",opacity:"0.5",rx:"1.5"}),n.createElement("rect",{width:"3",height:"3",x:"22",y:"0",opacity:"0.5",rx:"1.5"}),n.createElement("rect",{width:"3",height:"3",x:"11",y:"0",rx:"1.5"})),n.createElement("rect",{fill:"url(#photoeditorsdk-slider-dots)",x:1.5*-e,y:"0",width:4*e,height:"3",transform:`translate(${i}, 0)`})),Ka=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-duplicate-icon",d:"M3.429 8.571v12h12v-12h-12zM1.714 5.143h15.429c.947 0 1.714.767 1.714 1.714v15.429c0 .946-.767 1.714-1.714 1.714H1.714A1.714 1.714 0 010 22.286V6.857c0-.947.768-1.714 1.714-1.714zM22.286 0C23.232 0 24 .768 24 1.714v15.429c0 .947-.768 1.714-1.714 1.714H20.57V3.429L5.142 3.428V1.714C5.143.768 5.91 0 6.858 0h15.429z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1"},n.createElement("mask",{fill:"currentColor"},n.createElement("use",{xlinkHref:"#photoeditorsdk-duplicate-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-duplicate-icon"}))),Ja=()=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"24",height:"24",viewBox:"0 0 24 24"},n.createElement("path",{fill:"currentColor",fillRule:"evenodd",stroke:"none",strokeWidth:"1",d:"M2.087 7.115h7.66v15.32h5.027l.223-15.32h7.438V2.087H2.087v5.028zM14.075 24h-4.15a2.42 2.42 0 01-1.718-.711 2.423 2.423 0 01-.711-1.717V9.01H2.429c-.67 0-1.278-.273-1.718-.713A2.426 2.426 0 010 6.579V2.43C0 1.76.272 1.153.711.713A2.424 2.424 0 012.43 0h19.142c.671 0 1.278.272 1.718.713.439.44.711 1.047.711 1.718v4.148c0 .671-.272 1.278-.711 1.718-.44.44-1.047.713-1.718.713h-5.067v12.562c0 .67-.272 1.278-.711 1.717a2.42 2.42 0 01-1.718.711z"})),qa=({className:t})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",transform:"scale(-1, 1)",className:t},n.createElement("title",null,"Flip Horizontal"),n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-flip-horizontal-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},n.createElement("mask",{fill:"none"},n.createElement("use",{xlinkHref:"#photoeditorsdk-flip-horizontal-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-flip-horizontal-icon"}))),Qa=({className:t})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 15 14",className:t},n.createElement("title",null,"Flip Vertical"),n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-flip-vertical-icon",d:"M42 1v14h-1.167v-1.167H37a2 2 0 01-2-2V4.167a2 2 0 012-2l3.833-.001V1H42zm5.833 11.958a.875.875 0 01-.875.875h-3.791v-1.166l3.499-.001V3.333h-3.5V2.167h3.792c.446 0 .815.333.869.765l.006.11v9.916z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-34 -1)"},n.createElement("mask",{fill:"none"},n.createElement("use",{xlinkHref:"#photoeditorsdk-flip-vertical-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",transform:"rotate(-90 41.417 8)",xlinkHref:"#photoeditorsdk-flip-vertical-icon"}))),tl=({alt:t="Rotate",className:e})=>n.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",width:"24",height:"24",viewBox:"0 0 16 16",className:e},n.createElement("title",null,t),n.createElement("defs",null,n.createElement("path",{id:"photoeditorsdk-rotate-icon",d:"M132 0l1.25 1.57a8.01 8.01 0 0110.41.77 8.015 8.015 0 010 11.32c-.33.33-.67.62-1.04.859-1.38.991-3 1.481-4.62 1.481v-2c1.22 0 2.44-.37 3.47-1.111a6 6 0 00.77-9.129 5.992 5.992 0 00-7.73-.63L136 5h-5l1-5zm2.43 12.82c.5.38 1.06.67 1.66.87l-.64 1.89a7.56 7.56 0 01-1.48-.67l-.03-.01v-.01h-.02v-.01h-.01c0-.01-.01-.01-.01-.01h-.01v-.01h-.02v-.01h-.01l-.01-.01s-.01 0-.01-.01h-.01c-.2-.12-.4-.26-.6-.4zm-2.15-3.02c.18.6.47 1.17.83 1.68l-1.63 1.16v-.01s-.01 0-.01-.01c0 0 0-.01-.01-.01v-.01h-.01v-.01c-.01 0-.01-.01-.01-.01v-.01h-.01v-.01h-.01v-.01c0-.01-.01-.01-.01-.01v-.01c-.01 0-.01 0-.01-.01-.27-.39-.49-.79-.68-1.21-.01 0-.01-.01-.01-.01v-.01h-.01v-.02l-.01-.01c0-.02-.01-.02-.01-.02v-.02h-.01v-.02h-.01v-.03h-.01v-.02h-.01v-.02c-.01 0-.01 0-.01-.01v-.01c-.1-.23-.19-.47-.26-.7z"})),n.createElement("g",{fill:"none",fillRule:"evenodd",stroke:"none",strokeWidth:"1",transform:"translate(-130)"},n.createElement("mask",{fill:"none"},n.createElement("use",{xlinkHref:"#photoeditorsdk-rotate-icon"})),n.createElement("use",{fill:"currentColor",fillOpacity:"0.9",xlinkHref:"#photoeditorsdk-rotate-icon"}))),el={[o.E.ADJUSTMENT]:ha,[o.E.FILTER]:pa,[o.E.LIBRARY]:ma,[o.E.OVERLAY]:fa,[o.E.FOCUS]:ua,[o.E.STICKER]:ya,[o.E.TEXT]:ba,[o.E.TEXT_DESIGN]:Sa,[o.E.FRAME]:ga,[o.E.TRANSFORM]:va,[o.E.BRUSH]:da},il={left:la,right:ca,center:aa},ol={addText:xa,openWebcam:wa,reset:Ca,shuffle:Ea,uploadImage:ka},rl={undo:sa,redo:na,close:oa,export:ra},nl={categories:{[o.Ia.CommonCategory]:Ma,[o.Ia.FacebookCategory]:za,[o.Ia.TwitterCategory]:Ia,[o.Ia.InstagramCategory]:Pa},crops:{[o.Ia.Custom]:Da,[o.Ia.Square]:_a,[o.Ia.ThreeByFour]:Fa,[o.Ia.FourByThree]:Oa,[o.Ia.NineBySixteen]:La,[o.Ia.SixteenByNine]:Aa,[o.Ia.FacebookPost]:$a,[o.Ia.FacebookProfile]:Ba,[o.Ia.FacebookTitle]:Ha,[o.Ia.InstagramLandscape]:Na,[o.Ia.InstagramPortrait]:Wa,[o.Ia.InstagramSquare]:Va,[o.Ia.InstagramStory]:Ua,[o.Ia.TwitterPost]:Za,[o.Ia.TwitterProfile]:Ga,[o.Ia.TwitterTitle]:ja},dots:Xa,duplicate:Ka,edit:Ja,bringToFront:Ta,delete:Ya,flipHorizontal:qa,flipVertical:Qa,rotate:tl},sl={[o.R.BRIGHTNESS]:Gs,[o.R.CONTRAST]:Ys,[o.R.SATURATION]:qs,[o.R.CLARITY]:js,[o.R.SHADOWS]:Qs,[o.R.HIGHLIGHTS]:Js,[o.R.EXPOSURE]:Xs,[o.R.GAMMA]:Ks,[o.R.BLACKS]:Zs,[o.R.WHITES]:ia,[o.R.TEMPERATURE]:ea,[o.R.SHARPNESS]:ta},al=r.ZP.div`
  display: flex;
  position: relative;
  flex-direction: column;
  width: 100%;
  height: 100%;
`,ll=r.ZP.div.attrs((()=>({"data-test":o.Sa.MainCanvasActionBar})))`
  &&& {
    display: ${t=>t.hide?"none":"flex"};
    flex-direction: row;
    align-items: center;
    height: ${t=>t.theme.measurements.mainCanvasActionBar.height}px;
    color: ${t=>t.theme.mainCanvasActionBar.foreground};
    border-bottom: 1px solid
      ${t=>t.theme.mainCanvasActionBar.borderColor};
    padding: 8px 24px;
    box-sizing: border-box;
    position: absolute;
    width: 100%;
    z-index: ${t=>t.theme.measurements.zIndex.canvas.bar};
    background: ${t=>t.transparentBackgound?"transparent":t.theme.mainCanvasActionBar.background};
    ${t=>t.bottom?r.iv`
            justify-content: space-around;
            bottom: 0;
            transform: rotate(180deg);
          `:r.iv`
            justify-content: space-between;
          `}
  }
`,cl=r.ZP.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,hl=r.ZP.div.attrs({role:"main"})`
  background-color: ${t=>t.theme.canvas.background};
  flex-grow: 1;
  flex-shrink: 1;
  flex-basis: auto;
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  /* added this for safari, else the webcam overlay did not know the height */
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
  margin-top: ${t=>t.theme.measurements.canvas.marginTop}px;
`,dl=r.ZP.div.attrs((({height:t,width:e})=>({style:{height:`${t}px`,width:`${e}px`}})))`
  border-style: solid;
  border-width: 2px 0 2px 0;
  border-color: ${t=>t.theme.canvas.controlsOutline};
  box-shadow: 0 -6px 6px -6px rgba(0, 0, 0, 0.2),
    inset 0 6px 6px -6px rgba(0, 0, 0, 0.2);
  cursor: move;
  position: absolute;
`,pl=r.ZP.div.attrs((({radius:t})=>({style:{height:2*t+"px",width:2*t+"px"}})))`
  border-radius: 50%;
  border: 2px solid ${t=>t.theme.canvas.controlsOutline};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
`,ul=r.ZP.div`
  position: relative;
  height: inherit;
  width: inherit;
`,gl=r.ZP.div((t=>{const{desktop:e,mobile:i}=t.theme.measurements.canvasControls.corner.touchable,o=e/4,n=i/2;return r.iv`
    position: absolute;
    width: ${e}px;
    height: ${e}px;
    ${t=>"top"===t.vertical?r.iv`
            top: 0px;
          `:r.iv`
            bottom: 0px;
          `}
    ${t=>"left"===t.horizontal?r.iv`
            left: 0px;
          `:r.iv`
            right: 0px;
          `}
  ${t=>"top"===t.vertical?r.iv`
            margin-top: -${o}px;
          `:r.iv`
            margin-bottom: -${o}px;
          `}
  ${t=>"left"===t.horizontal?r.iv`
            margin-left: -${o}px;
          `:r.iv`
            margin-right: -${o}px;
          `}
  @media all and (min-width: 0) and (max-width: 599px) {
      width: ${i}px;
      height: ${i}px;
      ${t=>"top"===t.vertical?r.iv`
              margin-top: -${n}px;
            `:r.iv`
              margin-bottom: -${n}px;
            `}
      ${t=>"left"===t.horizontal?r.iv`
              margin-left: -${n}px;
            `:r.iv`
              margin-right: -${n}px;
            `}
    }
  `})),ml=(0,r.ZP)(gl)((t=>{const e="right"===t.horizontal?t.borderWidth:0,i="bottom"===t.vertical?t.borderWidth:0,o="left"===t.horizontal?t.borderWidth:0,n=`${"top"===t.vertical?t.borderWidth:0}px ${e}px ${i}px ${o}px`,s="left"===t.horizontal&&"bottom"===t.vertical||"right"===t.horizontal&&"top"===t.vertical?"nesw-resize":"nwse-resize",a=t.theme.measurements.canvasControls.corner.touchable.desktop/4-t.borderWidth,l=t.theme.measurements.canvasControls.corner.touchable.mobile/4+t.borderWidth;return r.iv`
    &:before {
      display: block;
      position: absolute;
      content: '';
      width: ${t=>t.theme.measurements.canvasControls.corner.size}px;
      height: ${t=>t.theme.measurements.canvasControls.corner.size}px;
      z-index: ${t=>t.theme.measurements.zIndex.canvas.controls};
      border-color: ${t=>t.theme.canvas.controlsColor};
      border-style: solid;
      border-width: ${n};
      pointer-events: auto;
      ${"top"===t.vertical?r.iv`
            top: ${a}px;
          `:r.iv`
            bottom: ${a}px;
          `}
      ${"left"===t.horizontal?r.iv`
            left: ${a}px;
          `:r.iv`
            right: ${a}px;
          `}
      @media all and (min-width: 0) and (max-width: 599px) {
        ${"top"===t.vertical?r.iv`
              margin-top: ${l}px;
            `:r.iv`
              margin-bottom: ${l}px;
            `}
        ${"left"===t.horizontal?r.iv`
              margin-left: ${l}px;
            `:r.iv`
              margin-right: ${l}px;
            `}
      }
    }
    cursor: ${s};
    pointer-events: none;
  `})),fl=r.ZP.div.attrs((()=>({"data-test":o.Sa.Knob})))`
  position: absolute;
  height: ${t=>t.theme.measurements.canvasControls.knob.touchable.desktop}px;
  width: ${t=>t.theme.measurements.canvasControls.knob.touchable.desktop}px;
  margin-left: -10px;
  margin-top: -10px;
  z-index: ${t=>t.theme.measurements.zIndex.canvas.knob};
  will-change: transform;
  cursor: ew-resize;
  &:before {
    display: block;
    position: absolute;
    content: '';
    background: ${t=>t.theme.canvas.controlsColor};
    border-radius: 50%;
    width: ${t=>t.theme.measurements.canvasControls.knob.size}px;
    height: ${t=>t.theme.measurements.canvasControls.knob.size}px;
    top: ${t=>t.theme.measurements.canvasControls.knob.size/4}px;
    left: ${t=>t.theme.measurements.canvasControls.knob.size/4}px;
    box-shadow: 0 2px 2px 0 rgba(0, 0, 0, 0.24);
  }
`,yl=r.ZP.div`
  position: absolute;
  color: ${t=>t.theme.canvas.controlsOutline};
`,bl=r.ZP.div.attrs((t=>({style:{left:`${t.x}px`}})))`
  position: absolute;
  bottom: -${t=>t.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  height: ${t=>t.theme.measurements.canvasControls.sprite.rotateHandle.height}px;
  width: 2px;
  background-color: ${t=>t.theme.canvas.controlsOutline};
`,Sl=r.ZP.div.attrs((({height:t,width:e,theme:i})=>({style:{height:`${t+i.measurements.canvasControls.sprite.controlPadding}px`,width:`${e+i.measurements.canvasControls.sprite.controlPadding}px`}})))`
  left: -${t=>t.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  top: -${t=>t.theme.measurements.canvasControls.sprite.controlPadding/2}px;
  transform-origin: center center;
  border-style: solid;
  border-width: 2px;
  border-color: ${t=>t.theme.canvas.controlsColor};
  box-shadow: 0 2px 6px 0 rgba(0, 0, 0, 0.2),
    inset 0 2px 6px 0 rgba(0, 0, 0, 0.2);
  cursor: move;
  will-change: transform;
  position: absolute;
`,vl=r.ZP.div.attrs((()=>({"data-test":o.Sa.TextWidth})))`
  position: absolute;
  height: ${t=>t.theme.measurements.canvasControls.width.size}px;
  width: 4px;
  z-index: ${t=>t.theme.measurements.zIndex.canvas.controls};
  background: ${t=>t.theme.canvas.controlsColor};
  cursor: pointer;
`,xl=r.ZP.div.attrs({tabIndex:0})`
  position: absolute;
  height: ${t=>t.height}px;
  width: ${t=>t.width}px;
  top: 0;
  left: 0;
  &:focus {
    outline: 0;
  }
`,wl=(0,o.v)()?r.iv`
      transition: unset;
    `:r.iv`
      transition: all 0.4s ease-in-out;
    `,Cl=r.ZP.div`
  position: absolute;
  background: ${t=>t.theme.canvas.cropBackdrop};
  z-index: ${t=>t.theme.measurements.zIndex.canvas.crop.backdrop};
  ${wl}
`,El=r.ZP.div.attrs({"data-test":o.Sa.CropMask})`
  position: absolute;
  box-shadow: inset 0 0 0 2px ${t=>t.theme.canvas.controlsOutline};
  cursor: move;
  ${wl}
`,kl=r.ZP.div`
  position: absolute;
  background: ${t=>t.theme.canvas.controlsOutline};
  z-index: ${t=>t.theme.measurements.zIndex.canvas.crop.grid};
  ${wl}
`,Tl=(0,r.ZP)(ml)`
  z-index: ${t=>t.theme.measurements.zIndex.canvas.controls};
  ${wl};
`,Ml=r.ZP.canvas`
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
`,zl=r.ZP.video`
  position: absolute;
  left: 50%;
  top: 50%;
  transform: translate(-50%, -50%);
`,Pl=r.ZP.div`
  position: relative;
  transition: all 0.4s cubic-bezier(0.17, 0.04, 0.03, 0.94);
  height: 100%;
  width: 100%;
  z-index: ${t=>t.theme.measurements.zIndex.canvas.webcam.backdrop};
  background-color: ${t=>t.theme.webcam.background};
`,Il={Index:cl,Area:al,Bar:{Index:ll,ButtonGroup:pr},Button:{TextSecondary:dr,Float:t=>n.createElement(mr,{...t},n.createElement(fr,null))},Container:hl,Element:Ml,Wrapper:Pl,Webcam:zl,Controls:{Knob:fl,Circle:pl,Corner:ml,Line:yl,Area:dl,Sprite:Sl,RotateHandle:bl,Container:ul,Wrapper:xl,SpriteActionsWrapper:gr,SpriteActionButton:ur,Width:vl},Crop:{Mask:El,GridLine:kl,Backdrop:Cl,Control:Tl}},Rl=Il.Button.TextSecondary,Dl=r.ZP.span`
  font-size: 14px;
  padding: 3px 1px 2px;
  color: ${t=>t.theme.canvasActionBar.foreground};
  letter-spacing: ${t=>t.theme.measurements.fontSystem.button2.letterSpacing}px;
  display: flex;
  align-self: center;
`,Ol=r.ZP.div`
  display: inline-flex;
  ${t=>t.isDisabled&&r.iv`
      opacity: 0.5;
      cursor: default;
      pointer-events: none;
    `}
`,Ll=Ie("scale","active")(Ee((({isDisabled:t,scale:e,active:i})=>{const{canZoomIn:r}=e,{canZoomOut:s}=e,{zoomLevel:a}=e;return-1!==[o.E.TRANSFORM,o.E.BRUSH,o.E.FOCUS,o.E.STICKER,o.E.TEXT,o.E.TEXT_DESIGN].indexOf(i.tool)?null:n.createElement(Ol,{isDisabled:t},n.createElement(Rl,{"data-test":o.Sa.MainBarButtonZoom,ariaLabel:"Zoom out",isDisabled:!s,onClick:e.out},"-"),n.createElement(Dl,{"data-test":o.Sa.ZoomLevel},a," %"),n.createElement(Rl,{ariaLabel:"Zoom in",isDisabled:!r,onClick:e.in},"+"))})));Dl.defaultProps={theme:_n};var Al=(0,r.ZP)(Il.Bar.ButtonGroup)`
  > :last-child {
    margin-left: 10px;
  }
  > :first-child {
    margin-left: 0;
  }
`,_l=Ee((function(){const{config:t,editor:e,history:i,custom:r,active:s}=Us(),a=t.locale.mainCanvasActions,{canUndo:l}=i,{canRedo:c}=i,h=t.config.mainCanvasActions,d=()=>{e.export()},p=()=>{if(e.activeStore.tool===o.E.TRANSFORM)return null;const t=r.getButton("mainCanvasActionUndo");return n.createElement(t,{key:"mainCanvasActionUndo","data-test":o.Sa.MainBarButtonUndo,onClick:i.undo,isDisabled:!l||!s.image,label:a.buttonUndo,ariaLabel:a.buttonUndo,icon:n.createElement(rl.undo,null)})},u=()=>{if(e.activeStore.tool===o.E.TRANSFORM)return null;const t=r.getButton("mainCanvasActionRedo");return n.createElement(t,{key:"mainCanvasActionRedo","data-test":o.Sa.MainBarButtonRedo,onClick:i.redo,isDisabled:!c||!s.image,label:a.buttonRedo,ariaLabel:a.buttonRedo,icon:n.createElement(rl.redo,null)})},g=()=>{const t=r.getButton("mainCanvasActionExport");return n.createElement(t,{key:"mainCanvasActionExport","data-test":o.Sa.MainBarButtonExport,onClick:d,isDisabled:!s.image,label:a.buttonExport,ariaLabel:a.buttonExport,icon:n.createElement(rl.export,null)})},m=()=>{if(!t.displayCloseButton)return null;const i=r.getButton("mainCanvasActionClose");return n.createElement(i,{key:"mainCanvasActionClose","data-test":o.Sa.MainBarButtonClose,onClick:e.close,isDisabled:!s.image,label:a.buttonClose,ariaLabel:a.buttonClose,icon:n.createElement(rl.close,null)})},f=h.map((t=>{switch(t){case o.D.UNDO:return p;case o.D.REDO:return u;case o.D.EXPORT:return g;case o.D.CLOSE:return m;default:return null}}));return n.createElement(Il.Bar.Index,null,n.createElement(Al,null,f[0]&&f[0]()||null,f[1]&&f[1]()||null),t.config.enableZoom?n.createElement(Ll,{isDisabled:!s.image}):null,n.createElement(Al,null,f[2]&&f[2]()||null,f[3]&&f[3]()||null))}));function Fl(t,e){(function(t){return"string"===typeof t&&t.includes(".")&&1===parseFloat(t)})(t)&&(t="100%");const i=function(t){return"string"===typeof t&&t.includes("%")}(t);return t=360===e?t:Math.min(e,Math.max(0,parseFloat(t))),i&&(t=parseInt(String(t*e),10)/100),Math.abs(t-e)<1e-6?1:t=360===e?(t<0?t%e+e:t%e)/parseFloat(String(e)):t%e/parseFloat(String(e))}function $l(t){return t=parseFloat(t),(Number.isNaN(t)||t<0||t>1)&&(t=1),t}function Bl(t){return t<=1?100*Number(t)+"%":t}function Hl(t){return 1===t.length?`0${t}`:String(t)}function Nl(t,e,i){return{r:255*Fl(t,255),g:255*Fl(e,255),b:255*Fl(i,255)}}function Wl(t,e,i){t=Fl(t,255),e=Fl(e,255),i=Fl(i,255);const o=Math.max(t,e,i),r=Math.min(t,e,i);let n=0,s=0;const a=(o+r)/2;if(o===r)s=0,n=0;else{const l=o-r;switch(s=a>.5?l/(2-o-r):l/(o+r),o){case t:n=(e-i)/l+(e<i?6:0);break;case e:n=(i-t)/l+2;break;case i:n=(t-e)/l+4}n/=6}return{h:n,s:s,l:a}}function Vl(t,e,i){t=Fl(t,255),e=Fl(e,255),i=Fl(i,255);const o=Math.max(t,e,i),r=Math.min(t,e,i);let n=0;const s=o,a=o-r,l=0===o?0:a/o;if(o===r)n=0;else{switch(o){case t:n=(e-i)/a+(e<i?6:0);break;case e:n=(i-t)/a+2;break;case i:n=(t-e)/a+4}n/=6}return{h:n,s:l,v:s}}function Ul(t,e,i,o){const r=[Hl(Math.round(t).toString(16)),Hl(Math.round(e).toString(16)),Hl(Math.round(i).toString(16))];return o&&r[0].charAt(0)===r[0].charAt(1)&&r[1].charAt(0)===r[1].charAt(1)&&r[2].charAt(0)===r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function Zl(t){return Math.round(255*parseFloat(t)).toString(16)}function Gl(t){return parseInt(t,16)}function jl(t){return Gl(t)/255}var Yl={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},Xl="(?:[-\\+]?\\d*\\.\\d+%?)|(?:[-\\+]?\\d+%?)",Kl=`[\\s|\\(]+(${Xl})[,|\\s]+(${Xl})[,|\\s]+(${Xl})\\s*\\)?`,Jl=`[\\s|\\(]+(${Xl})[,|\\s]+(${Xl})[,|\\s]+(${Xl})[,|\\s]+(${Xl})\\s*\\)?`,ql={CSS_UNIT:new RegExp(Xl),rgb:new RegExp(`rgb${Kl}`),rgba:new RegExp(`rgba${Jl}`),hsl:new RegExp(`hsl${Kl}`),hsla:new RegExp(`hsla${Jl}`),hsv:new RegExp(`hsv${Kl}`),hsva:new RegExp(`hsva${Jl}`),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/};function Ql(t){return Boolean(ql.CSS_UNIT.exec(String(t)))}function tc(t){let e={r:0,g:0,b:0},i=1,o=null,r=null,n=null,s=!1,a=!1;if("string"===typeof t&&(t=function(t){if(0===(t=t.trim().toLowerCase()).length)return!1;let e=!1;if(Yl[t])t=Yl[t],e=!0;else if("transparent"===t)return{r:0,g:0,b:0,a:0,format:"name"};let i=ql.rgb.exec(t);return i?{r:i[1],g:i[2],b:i[3]}:(i=ql.rgba.exec(t),i?{r:i[1],g:i[2],b:i[3],a:i[4]}:(i=ql.hsl.exec(t),i?{h:i[1],s:i[2],l:i[3]}:(i=ql.hsla.exec(t),i?{h:i[1],s:i[2],l:i[3],a:i[4]}:(i=ql.hsv.exec(t),i?{h:i[1],s:i[2],v:i[3]}:(i=ql.hsva.exec(t),i?{h:i[1],s:i[2],v:i[3],a:i[4]}:(i=ql.hex8.exec(t),i?{r:Gl(i[1]),g:Gl(i[2]),b:Gl(i[3]),a:jl(i[4]),format:e?"name":"hex8"}:(i=ql.hex6.exec(t),i?{r:Gl(i[1]),g:Gl(i[2]),b:Gl(i[3]),format:e?"name":"hex"}:(i=ql.hex4.exec(t),i?{r:Gl(i[1]+i[1]),g:Gl(i[2]+i[2]),b:Gl(i[3]+i[3]),a:jl(i[4]+i[4]),format:e?"name":"hex8"}:(i=ql.hex3.exec(t),!!i&&{r:Gl(i[1]+i[1]),g:Gl(i[2]+i[2]),b:Gl(i[3]+i[3]),format:e?"name":"hex"})))))))))}(t)),Array.isArray(t)){const[o,r,n]=t;Ql(o)&&Ql(r)&&Ql(n)&&(e=Nl(255*o,255*r,255*n),s=!0,a="rgb"),4===t.length&&(i=t[3])}return"object"===typeof t&&(Ql(t.r)&&Ql(t.g)&&Ql(t.b)?(e=Nl(t.r,t.g,t.b),s=!0,a="%"===String(t.r).substr(-1)?"prgb":"rgb"):Ql(t.h)&&Ql(t.s)&&Ql(t.v)?(o=Bl(t.s),r=Bl(t.v),e=function(t,e,i){t=6*Fl(t,360),e=Fl(e,100),i=Fl(i,100);const o=Math.floor(t),r=t-o,n=i*(1-e),s=i*(1-r*e),a=i*(1-(1-r)*e),l=o%6;return{r:255*[i,s,n,n,a,i][l],g:255*[a,i,i,s,n,n][l],b:255*[n,n,a,i,i,s][l]}}(t.h,o,r),s=!0,a="hsv"):Ql(t.h)&&Ql(t.s)&&Ql(t.l)&&(o=Bl(t.s),n=Bl(t.l),e=function(t,e,i){let o,r,n;function s(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*i*(e-t):i<.5?e:i<2/3?t+(e-t)*(2/3-i)*6:t}if(t=Fl(t,360),e=Fl(e,100),i=Fl(i,100),0===e)r=i,n=i,o=i;else{const a=i<.5?i*(1+e):i+e-i*e,l=2*i-a;o=s(l,a,t+1/3),r=s(l,a,t),n=s(l,a,t-1/3)}return{r:255*o,g:255*r,b:255*n}}(t.h,o,n),s=!0,a="hsl"),Object.prototype.hasOwnProperty.call(t,"a")&&(i=t.a)),i=$l(i),{ok:s,format:t.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:i}}var ec=class{constructor(t="",e={}){if(t instanceof ec)return t;this.originalInput=t;const i=tc(t);this.originalInput=t,this.r=i.r,this.g=i.g,this.b=i.b,this.a=i.a,this.roundA=Math.round(100*this.a)/100,this.format=e.format||i.format,this.gradientType=e.gradientType,this.r<1&&(this.r=Math.round(this.r)),this.g<1&&(this.g=Math.round(this.g)),this.b<1&&(this.b=Math.round(this.b)),this.isValid=i.ok}getAlpha(){return this.a}setAlpha(t){return this.a=$l(t),this.roundA=Math.round(100*this.a)/100,this}toHsv(){const t=Vl(this.r,this.g,this.b);return{h:360*t.h,s:t.s,v:t.v,a:this.a}}toHsvString(){const t=Vl(this.r,this.g,this.b),e=Math.round(360*t.h),i=Math.round(100*t.s),o=Math.round(100*t.v);return 1===this.a?`hsv(${e}, ${i}%, ${o}%)`:`hsva(${e}, ${i}%, ${o}%, ${this.roundA})`}toHsl(){const t=Wl(this.r,this.g,this.b);return{h:360*t.h,s:t.s,l:t.l,a:this.a}}toHslString(){const t=Wl(this.r,this.g,this.b),e=Math.round(360*t.h),i=Math.round(100*t.s),o=Math.round(100*t.l);return 1===this.a?`hsl(${e}, ${i}%, ${o}%)`:`hsla(${e}, ${i}%, ${o}%, ${this.roundA})`}toHex(t=!1){return Ul(this.r,this.g,this.b,t)}toHexString(t=!1){return`#${this.toHex(t)}`}toHex8(t=!1){return function(t,e,i,o,r){const n=[Hl(Math.round(t).toString(16)),Hl(Math.round(e).toString(16)),Hl(Math.round(i).toString(16)),Hl(Zl(o))];return r&&n[0].charAt(0)===n[0].charAt(1)&&n[1].charAt(0)===n[1].charAt(1)&&n[2].charAt(0)===n[2].charAt(1)&&n[3].charAt(0)===n[3].charAt(1)?n[0].charAt(0)+n[1].charAt(0)+n[2].charAt(0)+n[3].charAt(0):n.join("")}(this.r,this.g,this.b,this.a,t)}toHex8String(t=!1){return`#${this.toHex8(t)}`}toRgb(){return{r:Math.round(this.r),g:Math.round(this.g),b:Math.round(this.b),a:this.a}}toRgbArray(){return[Math.round(this.r),Math.round(this.g),Math.round(this.b),this.a]}toRgbString(){return`rgba(${Math.round(this.r)}, ${Math.round(this.g)}, ${Math.round(this.b)}, ${this.roundA})`}toPercentageRgb(){const t=t=>`${Math.round(100*Fl(t,255))}%`;return{r:t(this.r),g:t(this.g),b:t(this.b),a:this.a}}toPercentageRgbString(){const t=t=>Math.round(100*Fl(t,255));return 1===this.a?`rgb(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%)`:`rgba(${t(this.r)}%, ${t(this.g)}%, ${t(this.b)}%, ${this.roundA})`}toName(){if(0===this.a)return"transparent";if(this.a<1)return!1;const t=`#${Ul(this.r,this.g,this.b,!1)}`;for(const e of Object.keys(Yl))if(Yl[e]===t)return e;return!1}toString(t){const e=Boolean(t);t=t||this.format;const i=this.a<1&&this.a>=0;if(!e&&i&&t&&(t.startsWith("hex")||"name"===t))return"name"===t&&0===this.a?this.toName():this.toRgbString();switch(t){case"rgb":return this.toRgbString();case"prgb":return this.toPercentageRgbString();case"hex":case"hex6":default:return this.toHexString();case"hex3":return this.toHexString(!0);case"hex4":return this.toHex8String(!0);case"hex8":return this.toHex8String();case"hsl":return this.toHslString();case"hsv":return this.toHsvString();case"name":return this.toName()}}clone(){return new ec(this.toString())}},ic=r.ZP.div`
  position: absolute;
  width: ${t=>t.theme.measurements.color.colorPicker.arrow.width}px;
  height: ${t=>t.theme.measurements.color.colorPicker.arrow.width/2}px;
  overflow: hidden;
  pointer-events: none;
  ${t=>"bottom"===t.direction?r.iv`
          bottom: 100%;
        `:r.iv`
          top: 100%;
        `}
  left: ${t=>t.arrowOffset}px;
  :after {
    content: '';
    position: absolute;
    width: ${t=>t.theme.measurements.color.colorPicker.arrow.width/2}px;
    height: ${t=>t.theme.measurements.color.colorPicker.arrow.width/2}px;
    left: 50%;
    ${t=>"bottom"===t.direction?r.iv`
            transform: translate(-50%, 50%) rotate(45deg);
          `:r.iv`
            transform: translate(-50%, -50%) rotate(45deg);
          `}
    background-color: ${t=>t.theme.colorPicker.listBackground};
    pointer-events: none;
  }
`,oc=ic,rc=r.ZP.div`
  text-align: center;
  width: 28px;
  padding-left: 4px;
`,nc=(0,r.ZP)(hr.Input.Text)`
  input {
    text-align: center;
    border-bottom: 1px solid
      ${t=>t.theme.colorPicker.inputBorderColor};
  }
`,sc=({value:t,label:e,onChange:i})=>n.createElement(rc,null,n.createElement(hr.Input.Label,{label:e}),n.createElement(nc,{min:0,max:255,value:t,onChange:i})),ac=r.ZP.div`
  text-align: left;
  width: 62px;
`,lc=(0,r.ZP)(hr.Input.Text)`
  input {
    text-align: left;
    border-bottom: 1px solid
      ${t=>t.theme.colorPicker.inputBorderColor};
  }
`,cc=({value:t,label:e,onChange:i})=>n.createElement(ac,null,n.createElement(hr.Input.Label,{label:e}),n.createElement(lc,{value:t.toUpperCase(),onChange:i})),hc=r.ZP.div.attrs((t=>({style:{left:t.position[0]||"0px",top:t.position[1]||"0px"}})))`
  &&& {
    position: absolute;
    height: ${t=>t.theme.measurements.color.colorPicker.thumb.size}px;
    width: ${t=>t.theme.measurements.color.colorPicker.thumb.size}px;
    border-radius: 50%;
    border: 2px solid ${t=>t.theme.colorPicker.controlsColor};
    box-sizing: border-box;
    cursor: pointer;
    box-shadow: 0 1px 1px 0 rgba(0, 0, 0, 0.11), 0 1px 3px 0 rgba(0, 0, 0, 0.46);
    z-index: 2;
    pointer-events: none;
  }
`;hc.defaultProps={theme:_n};var dc=(0,o.b)(a()),pc=r.ZP.div`
  position: relative;
  height: 14px;
  width: 100%;
`,uc=t=>e=>{t.forEach((t=>{"function"===typeof t?t(e):null!=t&&(t.current=e)}))},gc=(0,n.forwardRef)((({surface:t,onChange:e,className:i,children:o},r)=>{const s=(0,n.useRef)(null),a=(0,n.useRef)(null),{config:l}=Us(),[c,h]=(0,n.useState)(!1),d=t=>{const i=l.measurements.color.colorPicker.thumb.size/2,o=l.measurements.color.colorPicker.thumb.size;let r=0,n=0;r=t.clientX,n=t.clientY;const{top:a,left:c,width:h,height:d}=s.current.getBoundingClientRect();let p=r-c-i,u=n-a-i;p=Math.max(0,Math.min(h-o,p)),u=Math.max(0,Math.min(d-o,u)),e&&e([p,u])},p=(0,n.useCallback)((0,dc.default)((t=>{c&&d(t)}),10),[c]);return n.createElement(pc,{ref:uc([s,r]),className:i},n.createElement(hr.DraggableCore,{nodeRef:a,onStart:t=>{h(!0),d(t)},onDrag:p,onStop:()=>{c&&h(!1)}},n.createElement("div",{ref:a},t)),o)})),mc=r.iv`
  position: absolute;
  top: 3px;
  left: 0;
  width: 100%;
  height: 8px;
  cursor: pointer;
  -webkit-tap-highlight-color: transparent;
`,fc=r.ZP.div`
  ${mc}
  background: linear-gradient(90deg, #F00 0%, #FF0 16.66%, #0F0 33.33%, #0FF 50%, #00F 66.66%, #F0F 83.33%, #F00 100%);
  height: 8px;
`,yc=r.ZP.div.attrs((t=>({style:{background:`linear-gradient(to left, ${t.transparentColor} 0%, ${t.opaqueColor} 100%)`}})))`
  ${mc}
  z-index: 1;
`,bc=r.ZP.div.attrs((t=>({style:{backgroundImage:`url(${t.url})`}})))`
  ${mc}
  z-index: 0;
  background-repeat: repeat-x;
  background-size: contain;
  background-position: left;
`,Sc=r.ZP.div.attrs((t=>({style:{backgroundColor:`hsl(${t.hue}, 100%, 50%)`}})))`
  ${mc}
  background: linear-gradient(to top, rgb(0, 0, 0), rgba(0, 0, 0, 0)),
   linear-gradient(to right, rgb(255, 255, 255), rgba(255, 255, 255, 0));
  height: ${t=>t.theme.measurements.color.colorPicker.saturationSlider.height}px;
  top: 0px;
`,vc=(0,r.ZP)(gc)`
  height: ${t=>t.theme.measurements.color.colorPicker.saturationSlider.height}px;
  margin-top: 0px;
`,xc=({color:t,hue:e,onChange:i})=>{const[o,r]=(0,n.useState)([0,0]),s=(0,n.useRef)(null),{config:a}=Us();(0,n.useEffect)((()=>{const{s:e,v:i}=t.toHsv();if(s.current){const{offsetWidth:t,offsetHeight:o}=s.current,n=t-a.measurements.color.colorPicker.thumb.size,l=o-a.measurements.color.colorPicker.thumb.size;r([e*t*n/t,(1-i)*o*l/o])}}),[t.toString()]);return n.createElement(vc,{ref:s,surface:n.createElement(Sc,{hue:e}),onChange:t=>{if(s.current){const[e,o]=t,{offsetHeight:n,offsetWidth:l}=s.current,c=e*l/(l-a.measurements.color.colorPicker.thumb.size),h=o*n/(n-a.measurements.color.colorPicker.thumb.size),d=Math.min(1,Math.max(0,c/l)),p=Math.min(1,Math.max(0,(n-h)/n));i(d,p),r([e,o])}}},n.createElement(hc,{position:o}))},wc=r.ZP.div`
  position: absolute;
  left: ${t=>t.leftOffset}px;
  top: ${t=>t.topOffset}px;
  z-index: ${t=>t.theme.measurements.zIndex.input.list};
  display: none;
  opacity: 0;
  transition: opacity 0.3s ease-out;
  ${t=>t.show&&r.iv`
      display: block;
      opacity: 1;
      transition: opacity 0.3s ease-out;
    `}
`,Cc=r.ZP.div`
  &&& {
    position: absolute;
    ${t=>"top"===t.direction&&r.iv`
        transform: translate(0, -100%);
      `}
    padding: 16px;
    box-sizing: border-box;
    box-shadow: ${t=>t.theme.colorPicker.listShadow};
    background: ${t=>t.theme.colorPicker.listBackground};
    border-radius: ${t=>t.theme.shape.radiusMedium}px;
    width: ${t=>t.theme.measurements.color.colorPicker.width}px;
    height: ${t=>t.theme.measurements.color.colorPicker.height}px;
    left: 8px;
    z-index: 1;
  }
`,Ec=(0,r.ZP)((({hue:t,onChange:e})=>{const[i,o]=(0,n.useState)(0),r=(0,n.useRef)(null),{config:s}=Us();return(0,n.useEffect)((()=>{if(r.current){const{offsetWidth:e}=r.current;let i=0;const n=e-s.measurements.color.colorPicker.thumb.size;i=t*e/360,o(i*n/e)}}),[t]),n.createElement(gc,{surface:n.createElement(fc,null),ref:r,onChange:t=>{if(r.current){const[i]=t,{offsetWidth:n}=r.current,a=i*n/(n-s.measurements.color.colorPicker.thumb.size),l=Math.max(0,Math.min(360,a/n*360));e(l),o(i)}}},n.createElement(hc,{position:[i,0]}))}))`
  margin-top: 8px;
`,kc=(0,r.ZP)((({color:t,opaqueColor:e,transparentColor:i,onChange:o})=>{const{config:r}=Us(),[s,a]=(0,n.useState)(0),l=(0,n.useRef)(null),c=r.assetProvider.getPath("controls","/tiled-background.png");return(0,n.useEffect)((()=>{if(l.current){const{offsetWidth:e}=l.current;let i=0;const o=e-r.measurements.color.colorPicker.thumb.size;i=(1-t.toHsv().a)*e,a(i*o/e)}}),[t.toString()]),n.createElement(gc,{ref:l,surface:n.createElement(yc,{opaqueColor:e,transparentColor:i}),onChange:t=>{if(l.current){const{offsetWidth:e}=l.current,[i]=t,n=(e-i*e/(e-r.measurements.color.colorPicker.thumb.size))/e,s=Math.round(100*(n+Number.EPSILON))/100,c=Math.min(1,Math.max(0,s));o(c),a(i)}}},n.createElement(bc,{url:c}),n.createElement(hc,{position:[s,0]}))}))`
  margin-top: 8px;
`,Tc=r.ZP.div`
  display: flex;
  justify-content: space-between;
  margin-top: 30px;
`,Mc=r.ZP.div`
  display: flex;
`,zc=class extends n.Component{constructor(t){super(t),this.node=n.createRef(),this.checkId=(t,e,i)=>{let o=t,r=0;for(;o.parentElement&&r<i;)if(o=o.parentElement,r+=1,o.id===e)return!0;return!1},this.handleOutsideClick=t=>{var e;const{onRequestClose:i,onAddSnapshot:o,show:r}=this.props,{color:n}=this.state;if(r){if(null==(e=this.node.current)?void 0:e.contains(t.target))return;this.setState({hexInputValue:n.toHexString()}),i&&i(),o&&o()}},this.onChange=t=>{const{onChange:e}=this.props;e({color:t.toRgbArray(),colorString:t.toRgbString()})},this.onHexValueChange=t=>{if(t.match(/^#([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/i)){const e=new ec(t);this.onChange(e),this.setState({color:e,hue:e.toHsl().h})}this.setState({hexInputValue:t})},this.onAlphaChange=t=>{const{color:e}=this.state,i=e.setAlpha(t);this.onChange(i),this.setState({color:i,hexInputValue:i.toHexString()})},this.onHueChange=t=>{const{color:e}=this.state,{s:i,v:o,a:r}=e.toHsv(),n=new ec({h:t,s:i,v:o,a:r});this.onChange(n),this.setState({color:n,hexInputValue:n.toHexString(),hue:t})},this.onSaturationBrightnessChange=(t,e)=>{const{color:i,hue:o}=this.state,{a:r}=i.toHsv(),n=new ec({h:o,s:t,v:e,a:r});this.onChange(n),this.setState({color:n,hexInputValue:n.toHexString()})},this.onInputChange=t=>e=>{const{color:i}=this.state;if(e.match(/0*([0-9]|[1-8][0-9]|9[0-9]|1[0-9]{2}|2[0-4][0-9]|25[0-5])/g)||!e.trim()){const o=i.toRgb();o[t]=parseInt(e,10)||0;const r=new ec(o);this.onChange(r),this.setState({color:r,hexInputValue:r.toHexString(),hue:r.toHsl().h})}};const{color:e}=this.props,i=new ec(e);this.state={color:i,hue:i.toHsl().h,hexInputValue:i.toHexString()}}componentDidMount(){document.addEventListener("mousedown",this.handleOutsideClick,!1),document.addEventListener("touchstart",this.handleOutsideClick,!1),document.addEventListener("keydown",this.handleOutsideClick,!1)}componentDidUpdate(t){const{color:e,show:i}=this.props;if(i&&!t.show){const t=new ec(e);this.setState({color:t,hue:t.toHsl().h,hexInputValue:t.toHexString()})}}componentWillUnmount(){document.removeEventListener("mousedown",this.handleOutsideClick,!1),document.removeEventListener("touchstart",this.handleOutsideClick,!1),document.removeEventListener("keydown",this.handleOutsideClick,!1)}render(){const{show:t,showArrow:e,direction:i,arrowOffset:o,topOffset:r,leftOffset:s,labelHex:a,labelR:l,labelG:c,labelB:h,labelSliderHue:d,labelSliderOpacity:p}=this.props,{color:u,hexInputValue:g,hue:m}=this.state,{r:f,g:y,b:b}=u.toRgb(),S=u.clone().setAlpha(1).toRgbString(),v=u.clone().setAlpha(0).toRgbString();return n.createElement("div",{ref:this.node},n.createElement(wc,{show:t,direction:i,leftOffset:s,topOffset:r},n.createElement(Cc,{direction:i},e&&n.createElement(oc,{direction:i,arrowOffset:o}),n.createElement(xc,{color:u,hue:m,onChange:this.onSaturationBrightnessChange}),n.createElement(hr.Spacer,{count:2}),n.createElement(hr.Input.Label,{label:d}),n.createElement(Ec,{hue:m,onChange:this.onHueChange}),n.createElement(hr.Spacer,{count:2}),n.createElement(hr.Input.Label,{label:p}),n.createElement(kc,{color:u,opaqueColor:S,transparentColor:v,onChange:this.onAlphaChange}),n.createElement(Tc,null,n.createElement(cc,{value:g,label:a,onChange:this.onHexValueChange}),n.createElement(Mc,null,n.createElement(sc,{value:f,label:l,onChange:this.onInputChange("r")}),n.createElement(sc,{value:y,label:c,onChange:this.onInputChange("g")}),n.createElement(sc,{value:b,label:h,onChange:this.onInputChange("b")}))))))}};zc.defaultProps={direction:"bottom",showArrow:!0},Cc.defaultProps={theme:_n};var Pc=r.ZP.div`
  display: flex;
  flex-wrap: wrap;
  position: relative;
`,Ic=class extends n.Component{constructor(t){super(t),this.containerRef=null,this.onClick=t=>e=>{const{onAddSnapshot:i,config:o,onChange:r,colorPickerDirection:n,rect:s}=this.props,{activeIdentifier:a,showColorPicker:l,colorList:c}=this.state,h=c.find((e=>e.identifier===t));if(a!==h.identifier||l)l?this.setState({showColorPicker:!1}):(r(h.color),this.setState({activeIdentifier:t}),i&&i());else{const{left:t,width:i,top:r,height:a}=e.currentTarget.getBoundingClientRect(),{left:l,top:c}=this.containerRef.current.getBoundingClientRect(),{colorPicker:h}=o.measurements.color,d=h.arrow.width/2;let p=t-l+i/2-2,u="bottom"===n?r-c+a+d:r-c-d,g=-24;const m=h.width-h.arrow.width-12;p>m&&(g+=p-m,p-=g);let f=!0;if("bottom"===n&&s){const t=s.height,e=r-s.top,i=t-(e+a),n=o.measurements.color.colorPicker.height+d;i<n&&(u=i-n),e+u<e+a/2&&(u+=d,f=!1)}this.setState({showColorPicker:!0,showColorPickerArrow:f,arrowOffset:p,topOffset:u,leftOffset:g})}},this.onChange=({color:t,colorString:e})=>{const{onChange:i}=this.props,{activeIdentifier:o,colorList:r}=this.state,n=r.findIndex((t=>t.identifier===o));if(-1!==n){const i=[...r];i[n]={identifier:r[n].identifier,colorString:e,color:t},this.setState({colorList:i})}i(t)},this.onChangeColorPicker=({color:t,colorString:e})=>{this.onChange({color:[t[0]/255,t[1]/255,t[2]/255,t[3]],colorString:e})},this.closeColorPicker=()=>{this.setState({showColorPicker:!1})},this.getColorPicker=()=>{const{activeColor:t,labelsColor:e,colorPickerDirection:i,onAddSnapshot:r}=this.props,{showColorPicker:s,showColorPickerArrow:a,arrowOffset:l,leftOffset:c,topOffset:h}=this.state;return n.createElement(zc,{color:(0,o.p)(t),show:s,showArrow:a,direction:i,arrowOffset:l,leftOffset:c,topOffset:h,labelHex:e.hex,labelR:e.r,labelG:e.g,labelB:e.b,labelSliderOpacity:e.sliderOpacity,labelSliderHue:e.sliderHue,onChange:this.onChangeColorPicker,onRequestClose:this.closeColorPicker,onAddSnapshot:r})};const{colors:e}=this.props;this.containerRef=n.createRef(),this.state={activeIdentifier:"",activeSprite:"",colorList:[...e],showColorPicker:!1,showColorPickerArrow:!1,arrowOffset:0,leftOffset:0,topOffset:0}}static getDerivedStateFromProps({activeSprite:t,activeColor:e},{activeSprite:i,colorList:r}){if(t!==i||!t){const i=Mr((0,o.p)(e)),n=r.find((({colorString:t})=>t===i));return{activeSprite:t,activeIdentifier:n?n.identifier:""}}return null}render(){const{tool:t,isDisabled:e,custom:i,config:r}=this.props,{activeIdentifier:s,colorList:a}=this.state,l=i.getColorItem(),c=r.assetProvider.getPath("controls","/tiled-background.png"),h=a.map((i=>l?n.createElement(l,{tool:t,key:`${i.colorString}-item-${i.identifier}`,isActive:i.identifier===s,isDisabled:e,onClick:this.onClick(i.identifier),color:i.colorString,label:i.identifier,tiledBackgroundUrl:c}):null));return n.createElement(Pc,{"data-test":o.Sa.ColorList,ref:this.containerRef},h,this.getColorPicker())}};Ic.defaultProps={colorPickerDirection:"bottom",isDisabled:!1};var Rc=Ie("config","custom")(Ee(Ic)),Dc=t=>n.createElement(Pt.Consumer,null,(({rect:e})=>n.createElement(Rc,{...t,rect:e}))),Oc=(0,o.b)(a()),Lc=(0,r.ZP)(Il.Controls.Container)`
  cursor: none;
`,Ac=r.ZP.div`
  position: absolute;
  width: 20px;
  height: 20px;
  transform: translate(-50%, -50%);
  border-radius: 50%;
  border-width: 2px;
  border-style: solid;
  box-shadow: 0 0 0 0.5px rgba(0, 0, 0, 0.8), 0 0 0 1px rgba(255, 255, 255, 1);
  color: ${t=>t.theme.foreground};
`,_c=class extends n.Component{constructor(t){super(t),this.INITIAL_POSITION={x:void 0,y:void 0},this.state={...this.INITIAL_POSITION,isDrawing:!1},this.containerElementRef=null,this.getCursorCoordinates=t=>{let e=0,i=0;if(-1!==t.type.indexOf("touch")){const o=t;if(!o.touches.length)return{...this.INITIAL_POSITION,height:0,width:0};e=o.touches[0].clientX,i=o.touches[0].clientY}else{const o=t;e=o.clientX,i=o.clientY}const o=this.containerElementRef.current.getBoundingClientRect();return{x:e-o.left,y:i-o.top,height:o.height,width:o.width}},this.draw=t=>{t.preventDefault(),t.stopPropagation(),this.touchDraw(t)},this.touchDraw=t=>{const{x:e,y:i}=this.getCursorCoordinates(t);void 0!==e&&void 0!==i&&(this.setState({x:e,y:i}),this.state.isDrawing&&this.brushTool.strokePosition({x:e,y:i}))},this.touchStart=()=>{this.brushTool.clickableCanvas(!1),this.setState({isDrawing:!0}),this.brushTool.beginStroke()},this.start=t=>{0===t.button?this.touchStart():this.stop(t)},this.stop=t=>{this.state.isDrawing&&(t.preventDefault(),t.stopPropagation(),this.setState({isDrawing:!1}),this.brushTool.endStroke(),this.brushTool.clickableCanvas(!0))},this.setInitialPosition=()=>{this.setState({...this.INITIAL_POSITION})},this.mouseOut=t=>{const{config:e}=this.props;t.preventDefault(),t.stopPropagation();const i=this.brushTool.sizeOnScreenSpace/2,{x:o,y:r,height:n,width:s}=this.getCursorCoordinates(t);o&&r&&(o<0||r<0||o>s-i||r>n-i||r<e.measurements.mainCanvasActionBar.height)&&this.setInitialPosition()},this.touchEnd=t=>{t.preventDefault(),t.stopPropagation();const{x:e,y:i}=this.state;e&&i&&this.setInitialPosition()},this.getCursor=()=>{const{x:t,y:e}=this.state;if(t&&e){const t=Mr(this.brushTool.color),e=`${this.brushTool.sizeOnScreenSpace}px`,i={left:`${this.state.x}px`,top:`${this.state.y}px`,borderColor:t,height:e,width:e};return n.createElement(Ac,{style:i,"data-test":o.Sa.Cursor})}return null},this.containerElementRef=n.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!1})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get brushTool(){return this.props.brushTool}render(){return n.createElement(Lc,{ref:this.containerElementRef,"data-test":o.Sa.CursorContainer,onMouseMove:this.draw,onTouchMove:this.touchDraw,onMouseDown:this.start,onTouchStart:this.touchStart,onMouseOut:this.mouseOut,onTouchEnd:this.touchEnd},this.getCursor())}},Fc=Ie("brushTool","config")(Ee(_c)),$c=(t,e)=>void 0!==t&&void 0!==e&&!Number.isNaN(t)&&!Number.isNaN(e),Bc=(0,r.ZP)(Il.Controls.Knob)`
  margin-top: -${t=>t.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
  margin-left: -${t=>t.theme.measurements.canvasControls.knob.touchable.desktop/2}px;
`,{Container:Hc}=Il.Controls,Nc=class extends n.Component{constructor(t){super(t),this.start=(t,{x:e,y:i})=>{$c(e,i)&&this.focusTool.setStart({x:e,y:i})},this.end=(t,{x:e,y:i})=>{$c(e,i)&&this.focusTool.setEnd({x:e,y:i})},this.onKnob1DragStart=(t,e)=>{this.focusTool.clickableCanvas(!1),this.start(t,e)},this.onKnob1DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition),this.start(t,e),this.focusTool.clickableCanvas(!0)},this.onKnob2DragStart=(t,e)=>{this.focusTool.clickableCanvas(!1),this.end(t,e)},this.onKnob2DragStop=(t,e)=>{this.addSnapshot(e,this.historyLocale.focusPosition),this.end(t,e),this.focusTool.clickableCanvas(!0)},this.addSnapshot=({x:t,y:e},i)=>{$c(t,e)&&this.focusTool.toolSnapshot(i)},this.getLine=()=>{const{height:t,width:e}=this.props.canvas.canvasSize,i=this.focusTool.startOnPreview,o=this.focusTool.endOnPreview;return n.createElement("svg",{focusable:"false",height:t,width:e},n.createElement("line",{x1:i.x,y1:i.y,x2:o.x,y2:o.y,strokeWidth:"2",stroke:"currentColor"}))},this.startRef=n.createRef(),this.endRef=n.createRef()}get focusTool(){return this.props.focusTool}get historyLocale(){return this.focusTool.locale.history}render(){return n.createElement(Hc,null,n.createElement(Il.Controls.Line,null,this.getLine()),n.createElement(hr.Draggable,{nodeRef:this.startRef,bounds:"parent",position:this.focusTool.startOnPreview,onStart:this.onKnob1DragStart,onDrag:this.start,onStop:this.onKnob1DragStop},n.createElement(Bc,{ref:this.startRef})),n.createElement(hr.Draggable,{nodeRef:this.endRef,bounds:"parent",onStart:this.onKnob2DragStart,onDrag:this.end,onStop:this.onKnob2DragStop,position:this.focusTool.endOnPreview},n.createElement(Bc,{ref:this.endRef})))}};Bc.defaultProps={theme:_n};var Wc=Ie("canvas","focusTool")(Ee(Nc)),Vc=class extends n.Component{constructor(t){super(t),this.getKnobPosition=()=>{const{focusTool:t}=this.props,{origin:e,size:i}=t,o=i/2,r=Math.PI/2+t.rotation;return{x:e.x+o*Math.cos(r),y:e.y+o*Math.sin(r)}},this.onArea=(t,{x:e,y:i})=>{const{editor:r}=this.props,n=r.configStore.measurements.canvasControls.knob.size;if($c(e,i)){const{canvas:t,focusTool:r}=this.props,{size:s,mirroredAreaWidth:a}=r,l=e+a/2,c=i+s/2,h=new o.Pa(this.getKnobPosition()),d=new o.Pa({x:e,y:i}).subtract(new o.Pa(this.areaPosition)),p=h.add(d);p.x>n&&p.x<t.canvasSize.width-n&&p.y>n&&p.y<t.canvasSize.height-n&&r.setOrigin({x:l,y:c})}},this.onKnob=(t,{x:e,y:i})=>{const{focusTool:r}=this.props;if($c(e,i)){r.clickableCanvas(!1);const t=new o.Pa(r.origin),n=new o.Pa(e,i),s=t.subtract(n),a=s.magnitude,l=Math.PI/2+Math.atan2(s.y,s.x);r.setSize(2*a),r.setRotation(l)}},this.onAreaDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusPosition),this.onArea(t,e),i.clickableCanvas(!0)},this.onKnobDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusSize),this.onKnob(t,e),i.clickableCanvas(!0)},this.addSnapshot=({x:t,y:e},i)=>{const{focusTool:o}=this.props;$c(t,e)&&o.toolSnapshot(i)},this.knobRef=n.createRef(),this.areaRef=n.createRef()}get areaPosition(){const{focusTool:t}=this.props,{origin:e,size:i,mirroredAreaWidth:o}=t;return{x:e.x-o/2,y:e.y-i/2}}render(){const{x:t,y:e}=this.areaPosition,{focusTool:i}=this.props;return n.createElement(Il.Controls.Container,null,n.createElement(hr.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnob,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:this.getKnobPosition()},n.createElement(Il.Controls.Knob,{ref:this.knobRef})),n.createElement(hr.Draggable,{nodeRef:this.areaRef,onStart:this.onArea,onDrag:this.onArea,onStop:this.onAreaDragStop,position:{x:t,y:e},rotation:i.rotation},n.createElement(Il.Controls.Area,{ref:this.areaRef,"data-test":o.Sa.Focus,height:i.size,width:i.mirroredAreaWidth})))}};Vc=(0,o.c)([Ie("focusTool","canvas","editor"),Ee],Vc);var Uc=class extends n.Component{constructor(t){super(t),this.state={knobAngle:2.35},this.onCircle=(t,{x:e,y:i})=>{if($c(e,i)){const{focusTool:t}=this.props;t.setCenter({x:e+t.radius,y:i+t.radius})}},this.onKnob=(t,{x:e,y:i})=>{if($c(e,i)){const{focusTool:t}=this.props,r=new o.Pa(e,i),n=new o.Pa(t.center.x,t.center.y).subtract(r),s=n.magnitude,a=-Math.atan2(n.y,n.x);this.setState({knobAngle:a}),t.setRadius(s)}},this.onCircleDragStart=(t,e)=>{const{focusTool:i}=this.props;i.clickableCanvas(!1),this.onCircle(t,e)},this.onCircleDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusPosition),this.onCircle(t,e),i.clickableCanvas(!0)},this.onKnobDragStart=(t,e)=>{const{focusTool:i}=this.props;i.clickableCanvas(!1),this.onKnob(t,e)},this.onKnobDragStop=(t,e)=>{const{focusTool:i}=this.props;this.addSnapshot(e,i.locale.history.focusSize),this.onKnob(t,e),i.clickableCanvas(!0)},this.addSnapshot=({x:t,y:e},i)=>{const{focusTool:o}=this.props;$c(t,e)&&o.toolSnapshot(i)},this.knobRef=n.createRef(),this.circleRef=n.createRef()}componentDidMount(){this.setState({knobAngle:2.35})}render(){const{focusTool:t}=this.props,{knobAngle:e}=this.state,{center:i,radius:r}=t,s={x:i.x-r,y:i.y-r},a=Math.PI-e,l={x:i.x+r*Math.cos(a),y:i.y+r*Math.sin(a)};return n.createElement(Il.Controls.Container,null,n.createElement(hr.Draggable,{nodeRef:this.knobRef,bounds:"parent",onStart:this.onKnobDragStart,onDrag:this.onKnob,onStop:this.onKnobDragStop,position:l},n.createElement(Il.Controls.Knob,{ref:this.knobRef})),n.createElement(hr.Draggable,{nodeRef:this.circleRef,onStart:this.onCircleDragStart,onDrag:this.onCircle,onStop:this.onCircleDragStop,position:s},n.createElement(Il.Controls.Circle,{ref:this.circleRef,"data-test":o.Sa.Focus,radius:r})))}};Uc=(0,o.c)([Ie("focusTool","canvas"),Ee],Uc);var Zc=Ee((()=>{const{focusTool:t}=Us(),{state:e}=t,i=(()=>{switch(e.identifier){case o.ea.LINEAR:return Wc;case o.ea.RADIAL:return Uc;case o.ea.MIRRORED:return Vc;default:return null}})();return t.isOptionSelected&&i?n.createElement(i,null):null})),Gc=({customButtonKey:t,onClick:e,label:i,icon:o,disabled:r})=>{const{custom:s}=Us(),a=s.getButton(t);return a?n.createElement(a,{onClick:e,label:i,ariaLabel:i,icon:o,isDisabled:r}):null},jc=({availableKeys:t,actions:e})=>n.createElement(Il.Bar.ButtonGroup,{onClick:o.Oa},t.map((t=>{const i=e[t];return i?n.createElement(Gc,{key:t,...i}):null}))),Yc=Ie("sprite","stickerTool")(Ee((({sprite:t,stickerTool:e})=>{const i=e.locale.canvasActions,r={[o.D.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:e.bringToFront,label:i.buttonBringToFront,icon:n.createElement(nl.bringToFront,null),disabled:t.isOnTop},[o.D.FLIP]:{customButtonKey:"canvasActionFlip",onClick:e.flipHorizontally,label:i.buttonFlipHorizontal,icon:n.createElement(nl.flipHorizontal,null)},[o.D.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:()=>e.duplicate(),label:i.buttonDuplicate,icon:n.createElement(nl.duplicate,null)},[o.D.DELETE]:{customButtonKey:"canvasActionDelete",onClick:e.delete,label:i.buttonDelete,icon:n.createElement(nl.delete,null)}};return e.isStickerSelected?n.createElement(jc,{availableKeys:e.config.canvasActions,actions:r}):null}))),Xc=Ie("textTool","sprite")(Ee((({textTool:t,sprite:e})=>{const i=t.locale.canvasActions,r={[o.D.EDIT]:{customButtonKey:"canvasActionEdit",onClick:()=>t.setEditMode(!0),label:i.buttonEdit,icon:n.createElement(nl.edit,null)},[o.D.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:t.bringToFront,label:i.buttonBringToFront,icon:n.createElement(nl.bringToFront,null),disabled:e.isOnTop},[o.D.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:t.duplicate,label:i.buttonDuplicate,icon:n.createElement(nl.duplicate,null)},[o.D.DELETE]:{customButtonKey:"canvasActionDelete",onClick:t.delete,label:i.buttonDelete,icon:n.createElement(nl.delete,null)}};return e.isSpriteText?n.createElement(jc,{availableKeys:t.config.canvasActions,actions:r}):null}))),Kc=Ie("sprite","textDesignTool")(Ee((({sprite:t,textDesignTool:e})=>{const i=e.locale.canvasActions,r={[o.D.EDIT]:{customButtonKey:"canvasActionEdit",onClick:()=>e.setEditMode(!0),label:i.buttonEdit,icon:n.createElement(nl.edit,null)},[o.D.BRING_TO_FRONT]:{customButtonKey:"canvasActionBringToFront",onClick:e.bringToFront,label:i.buttonBringToFront,icon:n.createElement(nl.bringToFront,null),disabled:t.isOnTop},[o.D.INVERT]:{customButtonKey:"canvasActionInvert",onClick:e.invertBackground,label:i.buttonInvert,icon:n.createElement(nl.flipHorizontal,null)},[o.D.DUPLICATE]:{customButtonKey:"canvasActionDuplicate",onClick:e.duplicate,label:i.buttonDuplicate,icon:n.createElement(nl.duplicate,null)},[o.D.DELETE]:{customButtonKey:"canvasActionDelete",onClick:()=>e.delete(),label:i.buttonDelete,icon:n.createElement(nl.delete,null)}};return e.isTextDesignSelected?n.createElement(jc,{availableKeys:e.config.canvasActions,actions:r}):null}))),Jc=class extends n.Component{constructor(t){super(t),this.actionsRef=null,this.spriteControlPosition=()=>{const{config:t,sprite:e,canvas:{canvasSize:i}}=this.props,{controlPadding:r,controlOffset:n}=t.measurements.canvasControls.sprite,{x:s,y:a}=e.position,{height:l,width:c}=e.currentSprite.size,h=e.rotationWRTOutputRotation,d=this.actionsRef.current;let p=new o.Pa(0,0);if(d){const t=d.getBoundingClientRect();p=new o.Pa(t.width/2+n,t.height+n)}const u=Math.abs(c*Math.sin(h))+Math.abs(l*Math.cos(h)),g=new o.Pa(s,a-u/2-r-n).clamp(p,new o.Pa(i.width,i.height).subtract(p));return{left:g.x,top:g.y}},this.getSpriteControls=()=>{const{sprite:t}=this.props;switch(t.tool){case o.E.TEXT:return n.createElement(Xc,null);case o.E.TEXT_DESIGN:return n.createElement(Kc,null);case o.E.STICKER:return n.createElement(Yc,null);default:return null}},this.actionsRef=n.createRef(),this.state={isMounted:!1}}componentDidMount(){this.setState({isMounted:!0})}render(){const{sprite:t}=this.props,{isMounted:e}=this.state,i=!t.isDragMode&&!t.isEditMode,r=this.spriteControlPosition();return n.createElement(Il.Controls.SpriteActionsWrapper,{"data-test":o.Sa.SpriteActions,ref:this.actionsRef,show:i&&e,style:{...r}},this.getSpriteControls())}};Jc=(0,o.c)([Ie("sprite","config","editor","canvas"),Ee],Jc);var{Corner:qc}=Il.Controls,{Draggable:Qc}=hr,th=new o.Pa(0,0),eh=new o.Pa(0,0),ih=Ee((()=>{const t=(0,n.useRef)(null),e=(0,n.useRef)(null),i=(0,n.useRef)(null),r=(0,n.useRef)(null),{config:s,sprite:a}=Us(),{leftTopPosition:l,leftBottomPosition:c,rightTopPosition:h,rightBottomPosition:d}=a,{borderWidth:p}=s.measurements.canvasControls.corner,u=({clientX:t,clientY:e})=>{void 0!==t&&void 0!==e&&a.onCornerDrag(eh.subtract(th.subtract(new o.Pa(t,e))))},g=(t,e)=>{const{clientX:i,clientY:r}=t;th=new o.Pa(i,r),eh=new o.Pa((t=>{switch(t){case"leftTop":default:return l;case"leftBottom":return c;case"rightTop":return h;case"rightBottom":return d}})(e)),a.clickableCanvas(!1),a.setDragMode(!0)},m=()=>{a.clickableCanvas(!0),a.setDragMode(!1),a.spriteSnapshot("size"),th=new o.Pa(0,0),eh=new o.Pa(0,0)};return n.createElement(n.Fragment,null,n.createElement(Qc,{nodeRef:t,onStop:m,onDrag:u,onStart:t=>g(t,"leftTop")},n.createElement(qc,{ref:t,"data-test":o.Sa.SpriteTopLeft,vertical:"top",horizontal:"left",borderWidth:p})),n.createElement(Qc,{nodeRef:i,onStop:m,onDrag:u,onStart:t=>g(t,"leftBottom")},n.createElement(qc,{ref:i,"data-test":o.Sa.SpriteBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:p})),n.createElement(Qc,{nodeRef:e,onStop:m,onDrag:u,onStart:t=>g(t,"rightTop")},n.createElement(qc,{ref:e,"data-test":o.Sa.SpriteTopRight,vertical:"top",horizontal:"right",borderWidth:p})),n.createElement(Qc,{nodeRef:r,onStop:m,onDrag:u,onStart:t=>g(t,"rightBottom")},n.createElement(qc,{ref:r,"data-test":o.Sa.SpriteBottomRight,vertical:"bottom",horizontal:"right",borderWidth:p})))})),oh=r.ZP.img`
  position: absolute;
  left: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,rh=r.ZP.img`
  position: absolute;
  right: -24px;
  top: calc(50% - 12px);
  cursor: ew-resize;
`,nh=new o.Pa(0,0),sh=new o.Pa(0,0),ah=Ie("sprite","config")(Ee((({sprite:t,config:e})=>{const i=(0,n.useRef)(null),r=(0,n.useRef)(null),s=t.leftMidPosition,a=t.rightMidPosition,l=e.assetProvider.getPath("controls","/arrow-left.png"),c=e.assetProvider.getPath("controls","/arrow-right.png"),h=(e,i)=>{t.setDragMode(!0),t.clickableCanvas(!1);const{clientX:r,clientY:n}=e;nh=new o.Pa(r,n),sh=new o.Pa("left"===i?s:a)},d=()=>{t.clickableCanvas(!0),t.setDragMode(!1),t.addSnapshot(Cr.EDIT,t.textDesignLocale.padding),nh=new o.Pa(0,0),sh=new o.Pa(0,0)},p=({clientX:e,clientY:i})=>{if(void 0!==e&&void 0!==i){const r=sh.subtract(nh.subtract(new o.Pa(e,i)));t.onPaddingDrag(r)}};return n.createElement(n.Fragment,null,n.createElement(hr.Draggable,{nodeRef:i,onStart:t=>h(t,"left"),onDrag:p,onStop:d},n.createElement(oh,{ref:i,src:l})),n.createElement(hr.Draggable,{nodeRef:r,onStart:t=>h(t,"right"),onDrag:p,onStop:d},n.createElement(rh,{ref:r,src:c})))}))),lh=(0,r.ZP)(Il.Controls.Knob)`
  margin-left: -11px;
  margin-top: 0px;
  cursor: url(${t=>t.url}) 9 9, ew-resize;
  &:before {
    top: unset;
    bottom: 0px;
    left: calc(
      50% - ${t=>t.theme.measurements.canvasControls.knob.size/2}px
    );
  }
`,ch=new o.Pa(0,0),hh=new o.Pa(0,0);lh.defaultProps={theme:_n};var dh=Ie("sprite","snapping","config")(Ee((({config:t,sprite:e,snapping:i})=>{const r=(0,n.useRef)(null),s=e.rightBottomHandlePosition,a=e.leftBottomHandlePosition,l={x:(s.x+a.x)/2,y:(s.y+a.y)/2},c=t.assetProvider.getPath("controls",`/${(0,o.u)()?"rotate-windows":"rotate-osx"}.png`);return n.createElement(hr.Draggable,{nodeRef:r,onStart:({clientX:t,clientY:i})=>{ch=new o.Pa(t,i),hh=new o.Pa(l),e.setDragMode(!0),e.clickableCanvas(!1)},onDrag:t=>{(({clientX:t,clientY:r})=>{if(void 0!==t&&void 0!==r){const n=hh.subtract(ch.subtract(new o.Pa(t,r))),s=e.position,a=new o.Pa(s.x,s.y),l=n.subtract(a),c=Math.atan2(l.y,l.x)-Math.PI/2,h=i.snapToRotation(c,l,e.currentRect);e.setRotation(h)}})(t)},onStop:()=>{e.clickableCanvas(!0),e.setDragMode(!1),e.spriteSnapshot("rotation"),i.hideRotationGuides(),ch=new o.Pa(0,0),hh=new o.Pa(0,0)}},n.createElement(lh,{ref:r,url:c}))}))),ph=(0,r.ZP)(Il.Controls.Width)`
  cursor: ew-resize;
  @media all and (min-width: 0) and (max-width: 599px) {
    display: none;
  }
`,uh=(0,r.ZP)(ph)`
  left: -3px;
  top: calc(
    50% - ${t=>t.theme.measurements.canvasControls.width.size/2}px
  );
`,gh=(0,r.ZP)(ph)`
  right: -3px;
  top: calc(
    50% - ${t=>t.theme.measurements.canvasControls.width.size/2}px
  );
`,mh=new o.Pa(0,0),fh=new o.Pa(0,0);uh.defaultProps={theme:_n},gh.defaultProps={theme:_n};var yh=Ie("sprite","textTool")(Ee((({sprite:t,textTool:e})=>{const i=(0,n.useRef)(null),r=(0,n.useRef)(null),s=t.leftMidPadPosition,a=t.rightMidPadPosition,l=(e,i)=>{t.setDragMode(!0),t.clickableCanvas(!1);const{clientX:r,clientY:n}=e;mh=new o.Pa(r,n),fh=new o.Pa("left"===i?s:a)},c=()=>{t.clickableCanvas(!0),t.setDragMode(!1),t.addSnapshot(Cr.EDIT,t.textLocale.width),e.updateDefaultFontSize(),mh=new o.Pa(0,0),fh=new o.Pa(0,0)},h=({clientX:e,clientY:i})=>{if(void 0!==e&&void 0!==i){const r=fh.subtract(mh.subtract(new o.Pa(e,i)));t.onWidthDrag(r)}};return n.createElement(n.Fragment,null,n.createElement(hr.Draggable,{nodeRef:i,onStart:t=>l(t,"left"),onDrag:h,onStop:c},n.createElement(uh,{ref:i})),n.createElement(hr.Draggable,{nodeRef:r,onStart:t=>l(t,"right"),onDrag:h,onStop:c},n.createElement(gh,{ref:r})))}))),{Draggable:bh}=hr,Sh=new o.Pa(0,0),vh=new o.Pa(0,0),xh=Ee((()=>{const t=(0,n.useRef)(),{active:e,config:i,snapping:r,sprite:s}=Us();if(!(()=>{const t=e.tool,i=s.tool;return s.isSpriteSelected&&t===i})())return null;const{isSpriteText:a}=s,l=s.isSpriteTextDesign&&s.textDesignToolStore.isInverted,{height:c,width:h}=s.size,d=s.spritePosition,p=s.rotationWRTOutputRotation,{controlPadding:u}=i.measurements.canvasControls.sprite;return n.createElement(Il.Controls.Container,null,n.createElement(bh,{nodeRef:t,onStart:t=>{const{clientX:e,clientY:i}=t;Sh=new o.Pa(e,i),vh=new o.Pa(s.position),s.setDragMode(!0),r.updateGuides()},onDrag:({clientX:t,clientY:e})=>{const i=vh.subtract(Sh.subtract(new o.Pa(t,e))),{x:n,y:a}=r.snapToPosition({x:i.x,y:i.y},s.currentRect);s.setPosition({x:n,y:a})},onStop:t=>{const{clientX:e,clientY:i}=t,{x:n,y:a}=Sh;Sh=new o.Pa(0,0),vh=new o.Pa(0,0),s.setDragMode(!1),n!==e&&a!==i&&s.spriteSnapshot("position"),r.hidePositionGuides()},rotation:p,position:d},n.createElement(Il.Controls.Sprite,{ref:t,"data-test":o.Sa.Sprite,onDoubleClick:t=>{t.preventDefault(),t.stopPropagation(),s.setEditMode(!0)},height:c,width:h},a&&n.createElement(yh,null)||null,l&&n.createElement(ah,null)||null,n.createElement(ih,null),n.createElement(Il.Controls.RotateHandle,{x:h/2+u/2},n.createElement(dh,null)))),n.createElement(Jc,null))})),{GridLine:wh}=Il.Crop,Ch=Il.Crop.Mask,{Draggable:Eh}=hr,kh=(0,r.ZP)(Tl)`
  left: ${3}px;
  top: ${3}px;
  @media all and (min-width: 0) and (max-width: 599px) {
    left: 6px;
    top: 6px;
  }
`,Th=(0,r.ZP)(Tl)((t=>{const{desktop:e}=t.theme.measurements.canvasControls.corner.touchable,i=e/4-t.borderWidth;return r.iv`
    left: ${i-e}px;
    top: ${3}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: 6px;
    }
  `})),Mh=(0,r.ZP)(Tl)((t=>{const{desktop:e}=t.theme.measurements.canvasControls.corner.touchable,i=e/4-t.borderWidth;return r.iv`
    left: ${i-e}px;
    top: ${i-e}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      left: -30px;
      top: -30px;
    }
  `})),zh=(0,r.ZP)(Tl)((t=>{const{desktop:e}=t.theme.measurements.canvasControls.corner.touchable,i=e/4-t.borderWidth;return r.iv`
    top: ${i-e}px;
    left: ${3}px;
    @media all and (min-width: 0) and (max-width: 599px) {
      top: -30px;
      left: 6px;
    }
  `})),Ph=Ie("transformTool")(Ee((({transformTool:t})=>{const e=(0,n.useRef)(null),i=(0,n.useRef)(null),r=(0,n.useRef)(null),s=(0,n.useRef)(null),a=(0,n.useRef)(null),{leftTopRespectFlip:l,leftBottomRespectFlip:c,rightTopRespectFlip:h,rightBottomRespectFlip:d}=t,{height:p,width:u}=t.cropMaskSize,{maxCropMaskSize:g,defaultCropMaskPosition:m}=t,{isFlippedHorizontal:f,isFlippedVertical:y}=t,b=g.width/2,S=g.height/2,v={...g,left:m.x,top:m.y},x={height:p,width:u},w=t.isDragMode?{transition:"unset"}:{},C=t=>f?2*b-t:t,E=t=>y?2*S-t:t,k=(e,i,o)=>{const r=C(e),n=E(i);switch(ls.getFlippedEdgeIndex(o,f,y)){case 0:t.onLeftTop({x:r,y:n});break;case 1:t.onLeftBottom({x:r,y:n});break;case 2:t.onRightTop({x:r,y:n});break;case 3:t.onRightBottom({x:r,y:n})}},T=(e,i,o)=>{t.setDragMode(!0),t.clickableCanvas(!1),k(e,i,o)},M=(t,e,i)=>{k(t,e,i)},z=(e,i,o)=>{t.setDragMode(!1),k(e,i,o),t.clickableCanvas(!0),t.trackChanges()},P=(e,i)=>{const o=C(e+u/2)-u/2,r=E(i+p/2)-p/2;t.changePosition({x:o,y:r})};return n.createElement("div",{style:{...v,position:"absolute"}},n.createElement(Eh,{nodeRef:a,bounds:"parent",position:l,onStart:(e,{x:i,y:o})=>{t.setDragMode(!0),t.clickableCanvas(!1),P(i,o)},onDrag:(t,{x:e,y:i})=>{P(e,i)},onStop:(e,{x:i,y:o})=>{t.setDragMode(!1),P(i,o),t.clickableCanvas(!0),t.trackChanges()}},n.createElement(Ch,{ref:a,style:{...x,...w}})),n.createElement(wh,{style:{left:l.x+u/3,top:l.y,height:p,width:1,...w}}),n.createElement(wh,{style:{left:l.x+u/3*2,top:l.y,height:p,width:1,...w}}),n.createElement(wh,{style:{left:l.x,top:l.y+p/3,height:1,width:u,...w}}),n.createElement(wh,{style:{left:l.x,top:l.y+p/3*2,height:1,width:u,...w}}),n.createElement(Eh,{nodeRef:e,bounds:"parent",position:{...l},onStart:(t,{x:e,y:i})=>{T(e,i,0)},onDrag:(t,{x:e,y:i})=>{M(e,i,0)},onStop:(t,{x:e,y:i})=>{z(e,i,0)}},n.createElement(kh,{ref:e,"data-test":o.Sa.CropTopLeft,vertical:"top",horizontal:"left",borderWidth:3,style:w})),n.createElement(Eh,{nodeRef:r,bounds:"parent",position:c,onStart:(t,{x:e,y:i})=>{T(e,i,1)},onDrag:(t,{x:e,y:i})=>{M(e,i,1)},onStop:(t,{x:e,y:i})=>{z(e,i,1)}},n.createElement(zh,{ref:r,"data-test":o.Sa.CropBottomLeft,vertical:"bottom",horizontal:"left",borderWidth:3,style:w})),n.createElement(Eh,{nodeRef:i,bounds:"parent",position:h,onStart:(t,{x:e,y:i})=>{T(e,i,2)},onDrag:(t,{x:e,y:i})=>{M(e,i,2)},onStop:(t,{x:e,y:i})=>{z(e,i,2)}},n.createElement(Th,{ref:i,"data-test":o.Sa.CropTopRight,vertical:"top",horizontal:"right",borderWidth:3,style:w})),n.createElement(Eh,{nodeRef:s,bounds:"parent",position:d,onStart:(t,{x:e,y:i})=>{T(e,i,3)},onDrag:(t,{x:e,y:i})=>{M(e,i,3)},onStop:(t,{x:e,y:i})=>{z(e,i,3)}},n.createElement(Mh,{ref:s,"data-test":o.Sa.CropBottomRight,vertical:"bottom",horizontal:"right",borderWidth:3,style:w})))}))),Ih=r.ZP.div`
  overflow: hidden;
  display: none;
  position: relative;
  transform: unset !important;
  vertical-align: bottom;
  ${t=>t.isVisible&&r.iv`
      display: inline-block;
    `}

  svg {
    color: ${t=>t.theme.foreground};
  }
`,Rh=r.ZP.div`
  position: relative;
  cursor: pointer;
  display: flex;
  align-self: center;
`,Dh=r.ZP.div`
  font-size: 15px;
  display: none;
  width: 33px;
  text-align: right;
  color: ${t=>t.theme.foreground};
  z-index: 1;
  margin: 2px;
  ${t=>t.isVisible&&r.iv`
      display: inline-block;
    `}
`,Oh=r.ZP.div`
  transform: translate(0, 0) !important;
`,Lh=class extends n.Component{constructor(t){super(t),this.SLIDER_WIDTH=213,this.MAX_ROTATION=45,this.DEGREES_PER_PIXEL=2*this.MAX_ROTATION/this.SLIDER_WIDTH,this.drag=(t,{x:e})=>{const{flipHorizontally:i,flipVertically:o}=this.transformTool.rotateFlipState;i!==o&&(e*=-1);const r=this.transformTool.defaultAngle-e*this.DEGREES_PER_PIXEL,n=Math.min(this.MAX_ROTATION,Math.max(r,-1*this.MAX_ROTATION));this.transformTool.setRotation(parseInt(`${n}`,10))},this.stop=()=>{this.transformTool.setDefaultAngle(this.transformTool.rotationInDegrees),this.transformTool.trackChanges()},this.rotateRef=n.createRef()}get transformTool(){return this.props.transformTool}render(){const{config:t,canvasWidth:e,transformTool:i}=this.props,{flipHorizontally:r,flipVertically:s}=this.transformTool.rotateFlipState,a=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minSliderWidth,l=!t.isLayoutAdvanced||t.isLayoutAdvanced&&e>t.measurements.canvas.transform.minValueWidth,c=this.transformTool.rotationInDegrees-this.transformTool.defaultAngle,h=r===s?-1*c:c,d=r!==s?-1*i.rotationInDegrees:i.rotationInDegrees;return n.createElement(Rh,{"data-test":o.Sa.RotateSlider},n.createElement(hr.Draggable,{nodeRef:this.rotateRef,axis:"x",position:{x:0,y:0},onStart:this.drag,onDrag:this.drag,onStop:this.stop,updateOnPosition:!0,disabled:!a},n.createElement(Oh,{ref:this.rotateRef},n.createElement(Ih,{isVisible:a},n.createElement(nl.dots,{width:90,height:15,x:h})),n.createElement(Dh,{isVisible:l},d,"\xb0"),n.createElement(Ih,{isVisible:a},n.createElement(nl.dots,{width:90,height:15,x:h})))))}},Ah=Ie("transformTool","config")(Ee(Lh)),_h=(0,r.ZP)(nl.rotate)`
  height: 16px;
  width: 16px;
  transform: scaleX(-1);
`,Fh=(0,r.ZP)(nl.rotate)`
  height: 16px;
  width: 16px;
`,$h=(0,r.ZP)(nl.flipHorizontal)`
  height: 16px;
  width: 16px;
`,Bh=(0,r.ZP)(nl.flipVertical)`
  height: 16px;
  width: 16px;
`,Hh=r.ZP.div`
  display: inline-flex;
  transform: scale(0.9);

  svg {
    color: ${t=>t.theme.foreground};
  }
`,Nh=Ie("transformTool","config","custom","canvas")(Ee((({transformTool:t,config:e,custom:i,canvas:r})=>{const s=t.locale.transformActions,a=r.canvasSize.width,l=!e.isLayoutAdvanced||e.isLayoutAdvanced&&a>e.measurements.canvas.transform.minFlipWidth,c=({customButtonKey:t,onClick:e,label:o,icon:r})=>{const s=i.getButton(t);return n.createElement(s,{key:o,onClick:e,label:o,ariaLabel:o,icon:r,style:{margin:"0 5px"}})},h=c({label:s.buttonFlipHorizontal,icon:n.createElement($h,null),onClick:()=>{t.flipHorizontally()},customButtonKey:"transformActionFlipHorizontal"}),d=c({label:s.buttonFlipVertical,icon:n.createElement(Bh,null),onClick:()=>{t.flipVertically()},customButtonKey:"transformActionFlipVertical"}),p=c({label:s.buttonRotateClockwise,icon:n.createElement(_h,null),onClick:t.rotateClockwise,customButtonKey:"transformActionRotateClockwise"}),u=c({label:s.buttonRotateAntiClockwise,icon:n.createElement(Fh,null),onClick:t.rotateAntiClockwise,customButtonKey:"transformActionRotateAntiClockwise"}),g=e.isLayoutAdvanced?{transform:"rotate(180deg)"}:{};return n.createElement(Hh,{style:g,"data-test":o.Sa.FlipRotateControls},t.config.enableFlip&&l&&h||null,t.config.enableFlip&&l&&d||null,t.config.enableRotation&&n.createElement(Ah,{canvasWidth:a})||null,t.config.enableRotation&&u||null,t.config.enableRotation&&p||null)}))),Wh=Il.Bar.Index,{Backdrop:Vh}=Il.Crop,Uh=Ie("transformTool","canvas","config")(Ee((({transformTool:t,canvas:e,config:i})=>{const{leftTopRespectFlip:o,leftBottomRespectFlip:r,rightTopRespectFlip:s}=t,{height:a}=t.cropMaskSize,{height:l,width:c}=e.canvasSize,{defaultCropMaskPosition:h}=t,d=t.isDragMode?{transition:"unset"}:{};return n.createElement(Il.Controls.Container,null,n.createElement(Vh,{style:{left:0,top:0,width:c,height:o.y+h.y,...d}}),n.createElement(Vh,{style:{left:0,top:o.y+h.y,width:h.x+o.x,height:a,...d}}),n.createElement(Vh,{style:{left:s.x+h.x,top:s.y+h.y,width:c-s.x-h.x,height:a,...d}}),n.createElement(Vh,{style:{left:0,top:r.y+h.y,width:c,height:l-r.y-h.y+i.measurements.basicUIToolControlBar.controlsBarHeight,...d}}),n.createElement(Ph,null),i.isLayoutAdvanced?n.createElement(Wh,{bottom:!0},n.createElement(Nh,null)):null)}))),Zh=(0,r.ZP)(Il.Controls.Container)`
  ${t=>t.activeCursor?r.iv`
          cursor: move;
        `:""}
  z-index: ${t=>t.theme.measurements.zIndex.canvas.crop.dragImage};
`,Gh=class extends n.Component{constructor(t){super(t),this.INITIAL_POSITION={x:void 0,y:void 0},this.state={...this.INITIAL_POSITION,isDragging:!1},this.containerRef=null,this.getCursorCoordinates=t=>{let e=0,i=0;if(-1!==t.type.indexOf("touch")){const o=t;if(!o.touches.length)return this.INITIAL_POSITION;e=o.touches[0].clientX,i=o.touches[0].clientY}else{const o=t;e=o.clientX,i=o.clientY}const o=this.containerRef.current.getBoundingClientRect();return{x:e-o.left,y:i-o.top}},this.move=t=>{if(this.scale.canDrag){const{x:e,y:i}=this.getCursorCoordinates(t);if(void 0!==e&&void 0!==i&&this.state.isDragging){const t={x:this.state.x-e,y:this.state.y-i};this.scale.setOffset(t)}}},this.touchDrag=t=>{if(this.scale.canDrag){const{x:e,y:i}=this.getCursorCoordinates(t);void 0!==e&&void 0!==i&&this.setState({x:e,y:i,isDragging:!0})}},this.drag=t=>{t.preventDefault(),this.touchDrag(t)},this.stop=()=>{this.scale.canDrag&&(this.scale.savePosition(),this.setState({...this.INITIAL_POSITION,isDragging:!1}))},this.touchEnd=t=>{t.preventDefault(),t.stopPropagation();const{x:e,y:i}=this.state;e&&i&&this.setState({...this.INITIAL_POSITION,isDragging:!1})},this.containerRef=n.createRef()}componentDidMount(){document.addEventListener("mouseup",this.stop,!1),document.addEventListener("touchend",this.stop,{passive:!0})}componentWillUnmount(){document.removeEventListener("mouseup",this.stop,!1),document.removeEventListener("touchend",this.stop,!1)}get scale(){return this.props.scale}render(){return n.createElement(Zh,{ref:this.containerRef,onMouseMove:this.move,onTouchMove:this.move,onMouseDown:this.drag,onTouchStart:this.touchDrag,onMouseUp:this.stop,onTouchEnd:this.touchEnd,activeCursor:this.scale.canDrag})}},jh=Ie("scale")(Ee(Gh)),Yh=Ee((({children:t})=>{const e=(0,n.useRef)(null),{active:i,sprite:r,canvas:s}=Us(),{canvasSize:a}=s;return n.createElement(Il.Controls.Wrapper,{"aria-hidden":!0,ref:e,onClick:t=>{if(t.preventDefault(),t.stopPropagation(),null==s?void 0:s.isCanvasClickable){let{clientX:i}=t,{clientY:o}=t;if(-1!==t.type.indexOf("touch")){const e=t;if(!e.touches.length)return;i=e.touches[0].clientX,o=e.touches[0].clientY}const r=e.current.getBoundingClientRect(),n=i-r.left,a=o-r.top;s.getContainersAtPreviewPoint({x:n,y:a})}},onKeyDown:t=>{"Tab"===t.code&&r.selectLast()},height:a.height,width:a.width},t,(()=>{switch(i.tool){case o.E.FOCUS:return n.createElement(Zc,null);case o.E.TEXT:case o.E.TEXT_DESIGN:case o.E.STICKER:return n.createElement(xh,null);case o.E.BRUSH:return n.createElement(Fc,null);case o.E.TRANSFORM:return n.createElement(Uh,null);default:return n.createElement(Il.Controls.Container,null,n.createElement(jh,null))}})())})),Xh=r.ZP.div`
  display: ${({isVisible:t})=>t?"block":"none"};
  position: absolute;
  z-index: ${t=>t.theme.measurements.zIndex.canvas.snappingGuide};
`,Kh=({isVisible:t,className:e})=>n.createElement(Xh,{isVisible:t,className:e}),Jh=(0,r.ZP)(Kh)`
  background: ${t=>t.theme.snapping.positionGuideColor};
  ${t=>"horizontal"===t.direction?r.iv`
        width: 100%;
        height: 2px;
        top: ${()=>t.position}px;
      `:r.iv`
      width: 2px;
      height: 100%;
      left: ${()=>t.position}px;
    `}
`,qh=(0,r.ZP)(Kh)`
  border: none;
  border-top: 2px dashed ${t=>t.theme.snapping.rotationGuideColor};
  background: transparent;
  left: ${({position:t})=>t.x}px;
  top: ${({position:t})=>t.y}px;
  transform: rotate(${({rotation:t})=>t}rad);
  width: 200%;
`,Qh=r.ZP.div`
  position: absolute;
  width: ${({width:t})=>t}px;
  height: ${({height:t})=>t}px;
  top: ${({top:t})=>t}px;
  left: ${({left:t})=>t}px;
  overflow: hidden;
`,td=Ie("snapping","editor")(Ee((({snapping:t,editor:e})=>{const{width:i,height:r}=e.getPreviewSize(),{x:s,y:a}=t.previewTopLeftPosition,l=t.positionGuides.map((({direction:t,value:e,isVisible:i},o)=>n.createElement(Jh,{key:`positionGuide-${o}`,direction:t,position:e,isVisible:i}))),c=t.rotationGuides.find((({isVisible:t})=>t));return n.createElement(Qh,{"data-test":o.Sa.SnappingLine,width:i,height:r,left:s,top:a},l,n.createElement(qh,{key:"rotationGuide",rotation:c?c.value:0,position:c?c.position:{x:0,y:0},isVisible:!!c}))}))),ed=r.ZP.img`
  z-index: 5;
  position: absolute;
  width: 100px;
  bottom: 30px;
  right: 30px;
`,id=()=>n.createElement(ed,{alt:"watermark","data-test":o.Sa.Watermark,src:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAaQAAACMCAYAAAAzxN3aAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAABMZSURBVHgB7d1tbFTXmQfw4xTXJsZk4hc8LAYPNWDTxOvZJMITNSkInGaTdOUmRWsTdUsrJYvafsh+yDcUqft9VSkftlLYqMRqpJAVQbJ2SeRiU5NCPKAEm1rBr5BxYpKxwNjGJrZxovb+SaYi1Daee8+59zkz/59k0aoUv83c/32e89xzcl7av//XioiIKEA5OTnqLkVERCQAA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCQCA4mIiERgIBERkQgMJCIiEoGBREREIjCQiIhIBAYSERGJwEAiIiIRGEhERCTCCkWUhUYuXQoNJxJl45OToSuXL6+dn5/Pu379euiL+fn8mbm50EL/nxUrVszmfutbsytyc2dznY+CgoLJVYWF42vLypIlJSUTVVVVo4qIXGMgUVa4du1a/rsnT9YifJyPisVCZylffPFFPj7U3NzN/351fPzmn729vTf/RGCtLixMVkQifZsrKxMMKKL0WBFI//3b3+6d+fzztC8gi6n+7nfjP3zyydPL/ftnz56NHD9+vEEZdk8olHz+uefeVD5qa2ur7e7u3qEMa9qzp7l83boJ5aNUCDmVULUTHhFlGMIKnwcfXV1dauXKlROlxcWJWCwWz9ZwMvHe0fVa+v+3367rO38+pkzIyVEbv/Od7h8//fQJpZH296vzdZaWlib2/vSnLUoAKwLpuhNGcy7uaBczOzubr9I0o/HzL/o5RkdDuIiuXr16Vvnkk0uXIn58b35CO+7dP/2pbnh4OHqzognIzMxM6OORkejHhw9HC1etSt5fUxOv37nznMoyUl9f33/kkXM9PT07TL1GBgYGYs77+bTO93P/wEBU98/zusabfa841CAM7uiVj5LJZLXKEAiig83NDQdfe+2FCxcuxIIMo9tNTU+HOzs7f/Rfv/nNC23Hj/v6O6aFISgeevDBVmUIXn/H2tvrlCYjIyMhPyr9IDGQhEF7SfnkVGdnlaSLtluoKo8cObL996+/vs9500aVYKiaUsHU398fVhSox+rru1fm5RlrJX9dJWl5jznhtl1lOAaSMNempsK6XsB34rxZrK+OcFE/cODAvg97e3fYFK4Ipv89fHjfG4cOPe7X75sWVhuNal3nuRVek2fef79KeYTqyNTN1pYtW8S0kRlIwuh6AS+H7e26o0ePxnBRt3kNbMhpLR549dV9aDcqCoTxKqmvz3OQ9PX1VSgDMHjjrGt2KyEYSAL1a3gB3wmmn2xu16GyONvd/bjKAKiW0G48deqULzci9Pd27txpbMpszFn3wftNedBlaBJ248aNYsIIGEgC+dG2O9fTY+XCOn4ueAwAlYXKILg5ON7R0dTe3i56DSxTPfDAA4mie+9NKEPi8bjr9R+Mes8a6AKgOqrbtk3U1CcDSSA/2nZjly9HlGUQRr87eHBvJk8avRePNzCUgvFwLGZsLQlVktshFox6KwNQHfn9bOCdMJCEunjxorH1HbQPbFx3cdpajRifVhkOoeS1xUPpM10lfdDVlXZXwtSot8TqCBhIQo2NjUVMte1sbNdhzSjTn8G4VeuxY40cdPCfySoJD2qn+542NeotsToCBpJQaNsNDQ0ZqQZsa9e9deTIjkxbM7oT/P5bWlqMb1dF32SySkr3QVlTo95SqyNgIAnWY6CSsa1dhyrhfG9vxj8QuBBUhNzVwX8mq6R0HpQ1NeottToCBpJgnyaT1brbdja16/C9H3rjjb0qi2EjTT446y/TVdJyB5ZMjHpLro6Ax08Ilmrb4Q2iNLGpXXesrS3mZzWH4yNKSkqGCwoKxgsLCydX5uXNpP63iWvXQjdu3MgfHx8PX716NaJ8gmeUsL9hOrvTk3eoko6+805EGYAHZe+0ye7J996rMjHqLbk6AgaScGjb6QokjJ3a0q7zq1WHEKqoqOiu3rKlf7k/Z1Qsp8+cqT7X3b3dj5/n1/sbMpB8hNdCZzyeMDFIk3pQdqnXm/Pa0r5mKr06ArbshPtU4/Y+bsZOg+JUR8bDqLKyMv6rX/zi5WebmlrTCX3sEo3tZl588cWXY3V1LSa3nYGrGp70p/Q1NDQY271hqQdlTY16S6+OgIEkHNp2ui5Gn46MWLF3Hb5fk7t2407xqSeeaEYQeT2rBsGEA+PCa9b0K4MuJhJGFrhpcbh4l5eXG9laZ6kHZU2MettQHQEDyQJ9AwOed22wqV1ncvACb8ymxsZmnetyuHA9//zzh0w+VDmaTEYU+c654TA2cbdQxwLVkYlNj22ojoCBZAE8UKc8GhgaiigLYO3IVHWUCiNTb8x/+8lP3sSalDIA+xsq8h1eK2jtKgMWelAWo966Nz22pToCBpIFdLTtLly4YMX6EY4eV4aYDCNA+2/z5s1Ghg/wGuDODcH44ZNPnjBxo7HQg7ImRr1LS0oSNlRHwECyhJe2HS5kU5bcYZta59q6dWuHH2/KH9TXG7mbhuvT03weKQAmbzTwoGzqP5sa9d61a5extqNuHPu2xNdtu1blgnPXZcUwg6l1LrQsdj/zjC9vSly8Xtq//z8VZRTcaAwODtbpbqfh38NuHHguycSo94b1661YO0phhWQJL227j4eHrTj4refDD418nbW1tdbcIZJMJqskHMhpatTbpuoIGEgWcdO2Q7vOll2yTUySoTp6bNcuUadikp1QJZlYS8L78/BbbzUqzWyrjoCBFAC3L2o303Z9vb2unl/BhVz5zERwlhYXJxSRBiarJBPnfNlWHQEDKQBrw2FXD1G6adu5PW3S7wu5qZ0IampqrBh3JTuYqpJ0s7E6AgZSAMrXr//I7Ys6nSf23bbrCletShYUFvr6Yr702WdGpgB1PgBLZLJK0snG6ggYSAHBhp7KhUQiseyKx227bk1ZWUL5bGpq6h6lWVFRUUIRaSa9SrK1OgIGUkCwu7RyAccRLLe95bZd5/Zr82J6elr7uHdubq741grZR3qVZGt1BAykgGzatClpsm3ntl2HrymINtf8jRvaH/p0KqSkIjIAVZLpXd7dsLk6Aj4YGxDcZa0uLEy6CY2v23ZL3gW5bdcVBzSVdv3zz7VXSKFQSOsb88CrrzZem5gQt+MFjsFQ5Cu8f2uj0RPx06cblCA2V0fAQArQhoqKfjeBhLYdKqCl7oQufnWoW9o2btzoe7sOvvzyS/Hb4qCKs2XHdDIPR4/4dUjjctheHQFbdgHa/uijrh/YdO7MFt0sFTsIj46OugqkrdXVCRUA3VuyEPkBVZISwvbqCBhIAULZ7/YMnaV2NThz5oyrLXgw7m37HRaRn1AlmTwHa7kyoToCBlLAysLhYeUCWn2LHUfgtl0XxLg3ke0ejsUCr0wyoToCBlLAYnV12tt2Y2NjEeVCEOPeRLbDVGqQVVKmVEfAQAoYXkh5LsdHF2rbnersrHKzHhPUuHdKnoER2omJCQ4gkC+CrJIypToCBpIA5eXlfcoFtO1uPwJ5YGDAVbuuOAM3Ib0+NcVAIl8EVSVlUnUEDCQBvLTK3j158httu2QyadW4d0rB3Xdrf1Nddtm6JHIjFkCVlEnVETCQBMDdlesjKW4ZYMCWQm7Hp4Ma9065u6BAeyDhea3bK0giUx70uUrKtOoIGEhChMNhz227cz09tW7+DQnj3iUlJaPKgD/39EQUkU/8rJIyrToCBpIQtR7O7Um17cYuX44oFySMexcVFY0rA3p7e12FNJEbflVJmVgdAQNJCC+braJth3ad2y1MJIx7V2zYYKRCuuKsI7FtR37yo0rKxOoIGEhCpDZbVS6gbfdBV1edcgFHlUs4xM7L+PtSsKb2h7Y2Vz+b22GdCz+v5XyYOC8H/+ZCn0uRKKiSwmvWGLvJy9TqCLi5qiBuN1sFt9N1pYLGvUtLSxMjIyOuznBayuDgYMypkk4j9JUHP9+7t2W5f/dgc3OD7u/loYcean1s1y7XD1KTfyYmJ8uUIZlaHQErJEG8bLbq1j+Ul7vausiE9evWJZQBqJKOvv32duUTbOlkIlg3lJfzfCcLtLW11c4a2gE8k6sjYCAJ4mWzVbeCHve+1bZt2/pNHQ09dOFCrL29XXtILORYW5v28ENrrqqqykggYY0NIcq1Nj26urt3KEMyuToCtuyEwWarbtt26SoqKkpIutvycmjhcpx5//3Hy50qw9SFHU6dOlVlojrS3VrF13m+tzeKoY9bn13DDQF+B1XV1d31O3e6nvzMVqyOvGEgCYPNVnt7e31pL1VUVLh69skk7Al29J13IsoAXHj/7+jRxoJVq5pNvLFRZXR2dv6zMqDGw2MBt0IQ4WtcbCITPyPcEDh/J9Lt3OlHo9EOBtPysTryhi07YUxNmy1kc2WlmPWjFEz8rTT4/WP3ht+//vq+tuPHtT6fdLarqwL/ronTQ3VNQr5x6NDjxzs6mpb7NeJn5QTTj/4HR7eznXdHrI68Y4UkEDZbveCseSiDTK5JeIVTOOOnTzcoQ1AF4EJ76ZNPIrvq6094eaPjQo2BiSGDv6/a2lrPd8YII7dfY3J0tPp3Bw+G/uOFF15RArS0tGh5bfzql79sVhqxOvKOgSQQHlQ1HUiSxr1vh1M4z3V3b58xdLeZ8rGz1nPwtdeiG8rLu9ESS6cKQUWU+OijSP/gYMzk8eu4cfA6ePLWkSM7vAbm1PR0GKG2p6mpVQXMrzXWdLA60oOBJBAujK3Hjs2avNBVbtok+jC+2MMPt/6xo6NR+QDBhA/8zEucoL63qCiZn58/m//tb/9t4m/2xo18pxoKXZ+eDt0+CGBSJBLxdDHCutZ5TWuSCLWzZ8/2S3iQWhpWR3owkITCZqsmprVS/rGmJqEEe+R73+s7d+5cws+7YYQM2lP4UAKgOorV1XkaKNA9gt4Zj29nIH0TqyN9ONQg1JYtW4xNwGHc2+uuBX5oaGhoMfVckg2wduT1YuR2B4/FLHQoZLZjdaQPA0momvvuGzZ1MZY47r0QXIzvv//+rHpDpqA68rpNkJfzsZZy+6GQ2YzVkV4MJKG8bLZ6JxLHvRfzL089FS8vL8+q/dtwI9LU2Oh5AuzSZ5+FlQFYS1N0U//AgLG2erZVR8BAEgybrSrNJI97L+bHTz/dikMEVZZAVajjznhubi5PGTA/N8eWneMDpwI1tcaZjdURMJAEM7HZquRx78WgWty9e/ebK316YDhIW7du7UBVqEi8eDxubEeVbKyOgIEkmInNVqWPey8Gd4tNe/Y0Z3IoVVZWxnc/84y2C1FeXt6cMiA3Ly9rB01SWB2ZwUASDputKo2kj3svJZNDCetkz2p+6HTd2rVG2pylpaVGTve1CasjMxhIwtXcd5+2iThbxr2XkgqlTFpTQpsuncP/lmvTpk1JE5Oako4sCQKrI3MYSMJhAEHXZqu2jHvfCd6w2FcNLS5luWg02qqzTXcr3Hw4v3Ot65DSjiwJwp97eoyNvWdzdQQMJAtgs1WlgU3j3suBFlesrq7FxhYeph3/dffuV0wPMHz/0UdP66yS6nfuDHwvuyCNjIyETO2gUlxcnPVhz0CyADZbVR7ZOO69HNiIFS08m55Vclp0J/79uede8eP3ofPhYlSkmfgaSsex9nZja0exbduyujoCBpIFsHeY17tcG8e9lwsXXazBPPXEE6IHHtDu+vnPfvay06Lr8HMtT8fDxVize1bATt9BMl0dcY9Abq5qDa+brdo67p0OvKGdj5ePtbVFBwYHa69evRpRArg53kI3BPbhI0cm3ZxGjDDDw8kqy7E6Ms+KQCooKJi46y59xVy6z2c4n38WLS+lSb6L50M2O4EyNjYWUS6lO+6Nn5HO79lPaOPhA0cvYLfrscuXI6bPVrodqqGysrLhH9TXx6VMNqIyc34eE8s9awpVOdp9Xta5dL93gjI5OZmP95+J7+We1auTrI6+kvPS/v2/VkQZDhuN9g0MVI2Pj4dNVE64eK8Nh/uLS0qS/xSN9klfnEYVmRgerr5y5UrFrRuw4vtwAjS5YcOGfuwUYvtjAmSPnJwcBhJlHxyfMDQ0FMbmo1NTU/cgpObn5/NxYZ6ZmVmwcsCFOjc3dxZ/Onf9k7nOnwife0OhiUgkkrR5Ogo/j2tTU/mrCwtnGUAUFAQS15Ao6+Cie3O9SamEoq92lmcQkQCcsiMiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEgEBhIREYnAQCIiIhEYSEREJAIDiYiIRGAgERGRCAwkIiISgYFEREQiMJCIiEiEFYqIKAvl5OQoEuUvfwUYvyPZHkPjVwAAAABJRU5ErkJggg=="}),od=Ee((function(){const t=(0,n.useRef)(null),{canvas:e,config:i}=Us(),r=(i=!0)=>{if(null==t?void 0:t.current){const{clientWidth:r,clientHeight:n}=t.current,s=(0,o.Za)();t.current.width=r*s,t.current.height=n*s,e.saveDimensions({width:r,height:n,render:i})}},s=new Mt((0,Oc.default)((()=>r()),100,{trailing:!0}));(0,n.useEffect)((()=>{const i=t.current;return e.setCanvasElement(i),()=>{s.disconnect()}}),[]),(0,n.useLayoutEffect)((()=>{r(!1),s.observe(t.current)}));const{licenseChecker:a}=i;return n.createElement(n.Fragment,null,a&&a.isWhiteLabel()?null:n.createElement(id,null),n.createElement(Il.Element,{ref:t,"aria-label":"Canvas","data-test":o.Sa.Canvas}),n.createElement(Yh,null,n.createElement(td,null)))})),rd=class{constructor(t={},e={}){this.getAdvancedCategoryCard=()=>this.components.advancedUICategoryCard,this.getAdvancedItemCard=()=>this.components.advancedUIItemCard,this.getAdvancedToolbarItem=()=>this.components.advancedUIToolbarItem,this.getAdvancedToolbar=()=>this.components.advancedUIToolbar,this.getAdvancedToolControlBar=()=>this.components.advancedUIToolControlBar,this.getBasicToolbar=()=>this.components.basicUIToolbar,this.getBasicToolControlBar=()=>this.components.basicUIToolControlBar,this.getBasicToolItemsBar=()=>this.components.basicUIToolItemsBar,this.getDialog=()=>this.components.dialog,this.getButton=t=>this.components.buttons[t],this.getColorItem=()=>this.components.colorItem,this.getCheckbox=()=>this.components.checkbox;const i={dialog:hr.Dialog,colorItem:hr.ColorItem,checkbox:hr.Input.Checkbox,buttons:{mainCanvasActionUndo:Il.Button.TextSecondary,mainCanvasActionRedo:Il.Button.TextSecondary,mainCanvasActionExport:L,mainCanvasActionClose:I,canvasActionEdit:Il.Controls.SpriteActionButton,canvasActionBringToFront:Il.Controls.SpriteActionButton,canvasActionDuplicate:Il.Controls.SpriteActionButton,canvasActionDelete:Il.Controls.SpriteActionButton,canvasActionInvert:Il.Controls.SpriteActionButton,canvasActionFlip:Il.Controls.SpriteActionButton,transformActionFlipHorizontal:O,transformActionFlipVertical:O,transformActionRotateClockwise:O,transformActionRotateAntiClockwise:O,textAlignment:O,toolControlBarPrimaryButton:P,toolControlBarSecondaryButton:I}};this.components=wr([i,e,t])}},nd=Ie("textTool","textDesignTool","modal","custom")(Ee((({modal:t,textTool:e,textDesignTool:i,custom:r})=>{const{type:s,identifier:a,isVisible:l,modalProps:c,positionOffset:h}=t,{headerLabel:d,bodyLabel:p,confirmLabel:u,dismissLabel:g,handleClose:m,handleConfirm:f,handleDismiss:y}=c,b=r.getDialog();if(s===o.H.INFO)return n.createElement(hr.InfoModal,{headerLabel:d,bodyLabel:p},n.createElement(b,{type:s,isVisible:l,identifier:a,position:h,handleClose:m,headerLabel:d,bodyLabel:p}));if(s===o.H.TEXT_EDIT){const{buttonSave:o,buttonClose:r}=e.locale.canvasControls,c={type:s,isVisible:t.isVisible,confirmLabel:o,dismissLabel:r,headerLabel:e.locale.canvasControls.inputText};if(e.isTextSelected)return n.createElement(hr.TextEditModal,{...c,defaultText:dn.defaultText(),handleConfirm:e.changeText,handleDismiss:e.setEditMode,text:e.text,maxLength:e.config.maxCharacterLimit,allowEmojis:e.config.allowEmojis},n.createElement(b,{type:s,isVisible:l,identifier:a,position:h,handleClose:m,confirmLabel:o,dismissLabel:r,headerLabel:e.locale.canvasControls.inputText}));if(i.isTextDesignSelected)return n.createElement(hr.TextEditModal,{...c,defaultText:mn.defaultText(),handleConfirm:i.changeText,handleDismiss:i.setEditMode,text:i.text,maxLength:i.config.maxCharacterLimit,allowEmojis:i.config.allowEmojis},n.createElement(b,{type:s,isVisible:l,identifier:a,position:h,handleClose:m,confirmLabel:o,dismissLabel:r,headerLabel:e.locale.canvasControls.inputText}))}return n.createElement(hr.ActionModal,{type:s,headerLabel:d,bodyLabel:p,confirmLabel:u,dismissLabel:g,handleClose:m,handleConfirm:f,handleDismiss:y},n.createElement(b,{type:s,isVisible:l,identifier:a,position:h,confirmLabel:u,dismissLabel:g,headerLabel:d,bodyLabel:p,handleClose:m}))}))),sd=r.ZP.div`
  position: absolute;
  right: 8px;
  top: 8px;
`,ad=class extends n.Component{constructor(t){super(t),this.onChange=t=>{this.setState({value:t.replace(/[^\d.,-]/g,""),isSubmitted:!1})},this.onSubmit=()=>{const{getCorrectValue:t}=this.props,{isSubmitted:e,value:i}=this.state;e||this.setState({value:t(parseInt(i,10)||0).toString(),isSubmitted:!0})},this.state={isSubmitted:!1,value:t.value.toString()}}componentDidUpdate(t){const{value:e}=this.props;t.value!==e&&this.setState({value:e.toString()})}render(){const{id:t,isDisabled:e,label:i}=this.props,{value:r}=this.state;return n.createElement(hr.Input.Text,{id:t,value:r,isDisabled:e,onChange:this.onChange,onBlur:this.onSubmit,onKeyUp:(0,o.Qa)(this.onSubmit)},n.createElement(sd,null,n.createElement(hr.Input.Label,{label:i,htmlFor:t})))}},ld=ad,cd=r.ZP.div`
  display: inline-flex;
  justify-content: space-between;
  max-width: ${t=>t.theme.measurements.inputs.cropSize.maxWidth}px;
`,hd=r.ZP.span`
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.body.case};
  color: ${t=>t.theme.textInput.foreground};
  margin-top: 10px;
  margin-right: 13px;
`,dd=({showLabel:t=!0,label:e,isDisabled:i,valueHeight:o,valueWidth:r,labelWidth:s,labelHeight:a,onSubmitWidth:l,onSubmitHeight:c})=>n.createElement("div",null,n.createElement(hr.Input.Label,{label:e,show:t}),n.createElement(cd,null,n.createElement(ld,{id:"photoeditorsdk-transformScaleWidth",value:r,getCorrectValue:l,label:s,isDisabled:i}),n.createElement(hd,null,"x"),n.createElement(ld,{id:"photoeditorsdk-transformScaleHeight",value:o,getCorrectValue:c,label:a,isDisabled:i}))),pd=r.ZP.div`
  display: flex;
  justify-content: center;
  align-items: center;
  animation: ${cr} 0.2s linear;
  animation-fill-mode: both;
  height: 40px;
  min-width: 350px;
  @media all and (min-width: 0) and (max-width: 599px) {
    min-width: 280px;
  }
`,ud=r.iv`
  background: ${t=>t.theme.tabTitle.activeBackground};
  color: ${t=>t.theme.tabTitle.activeForeground};
  border-bottom: 1px solid ${t=>t.theme.tabTitle.activeBorderColor};
`,gd=(0,r.ZP)(ur)`
  display: inline-flex;
  align-items: center;
  font-size: ${t=>t.theme.measurements.fontSystem.basicUITabLabel.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.basicUITabLabel.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.basicUITabLabel.case};
  color: ${t=>t.theme.tabTitle.foreground};
  border-radius: 0px;
  padding: 1px 12px 2px;
  background: ${t=>t.theme.tabTitle.background};

  ${({isActive:t})=>t&&ud}

  &:active {
    ${ud}
  }

  @media all and (min-width: 0) and (max-width: 599px) {
    max-width: 150px;
    text-overflow: ellipsis;
    white-space: nowrap;
  }
`,md=class extends n.Component{constructor(){super(...arguments),this.onClick=()=>{const{label:t,onClick:e}=this.props;e(t)}}render(){const{activeTab:t,label:e}=this.props;return n.createElement(gd,{ariaLabel:e,isActive:t===e,onClick:this.onClick},e)}},fd=(0,r.ZP)(E)`
  display: inline-flex;
  padding: 0 4px;
  height: 20px;
  font-size: 16px;
`,yd=(0,r.ZP)(gr)`
  display: inline-flex;
  justify-content: center;
  transform: translate(-100%, -100%);
  @media all and (min-width: 0) and (max-width: 499px) {
    left: 0;
    right: 0;
    transform: translateY(-120%);
    background: transparent;
    button {
      &:first-child {
        border-bottom-right-radius: 0;
        border-top-right-radius: 0;
      }
      &:last-child {
        border-bottom-left-radius: 0;
        border-top-left-radius: 0;
      }
      &:not(:first-child):not(:last-child) {
        border-radius: 0;
      }
    }
  }
`,bd=class extends n.Component{constructor(t){super(t),this.onTabClick=t=>{this.setState({activeTab:t,toggleExtend:!1})},this.getDropUp=()=>{const{length:t}=this.props,{toggleExtend:e}=this.state,i=n.Children.toArray(this.props.children),o=n.Children.count(this.props.children),r=i.slice(t,o);return n.createElement(yd,{show:e},r.map((t=>{const e=t.props.label||"";return n.createElement(ur,{onClick:()=>this.onTabClick(e),key:e,ariaLabel:"More Options"},e)})))},this.extend=()=>{this.setState((({toggleExtend:t})=>({toggleExtend:!t})))},this.getExtension=()=>n.createElement(fd,{onClick:this.extend,ariaLabel:"Select Next"},"...");const e=n.Children.count(this.props.children),i=n.Children.toArray(this.props.children);this.state={activeTab:e&&i[0].props&&i[0].props.label||"",toggleExtend:!1}}render(){const{length:t}=this.props,{activeTab:e,toggleExtend:i}=this.state,o=n.Children.toArray(this.props.children).slice(0,t),r=n.Children.count(this.props.children)>t;return n.createElement("div",null,o.map((t=>{if(t){const i=t.props.label||"";return n.createElement(md,{activeTab:e,key:i,label:i,onClick:this.onTabClick})}return null})),r?this.getExtension():null,i?this.getDropUp():null,n.Children.map(this.props.children,(t=>!t||t.props&&t.props.label!==e?null:n.createElement(pd,{key:t.props.label},t.props.children))))}},Sd=bd,vd=r.ZP.div`
  position: relative;
  white-space: nowrap;
  display: flex;
  transition: all 0.2s linear;
`,xd=class extends n.Component{constructor(t){super(t),this.updateLength=()=>{const{maxWidth:t,children:e}=this.props;let i=0;if(t)i=t;else{const t=window.innerWidth;i=t-(t>600?300:200)}const o=n.Children.count(e),r=i-o*xd.TAB_WIDTH;if(r<0){const t=Math.round(Math.abs(r/xd.TAB_WIDTH));this.setState({length:o-t})}},this.state={length:n.Children.count(this.props.children)}}componentDidMount(){window.addEventListener("resize",this.updateLength),this.updateLength()}componentWillUnmount(){window.removeEventListener("resize",this.updateLength)}render(){const{children:t}=this.props,{length:e}=this.state;return e?n.createElement(vd,null,n.createElement(Sd,{length:e},t)):null}},wd=xd;wd.TAB_WIDTH=120;var Cd=r.ZP.div`
  &:after {
    content: '';
    position: absolute;
    bottom: 0px;
    ${t=>t.full?r.iv`
            left: -24px;
            width: calc(100% + 48px);
          `:"\n      left: 24px;\n      width: calc(100% - 48px);\n    "}
    border-bottom: 1px solid ${t=>t.theme.toolControlBar.separatorColor};
  }
`,Ed=Cd,kd=(0,r.ZP)(hr.Input.Slider).attrs((()=>({centerSlider:!0})))`
  max-width: 224px;
`,Td=r.ZP.div.attrs((()=>({"data-test":o.Sa.CategoryItemsContainer})))`
  visibility: hidden;
  opacity: 0;
  display: none;

  ${({show:t})=>t&&r.iv`
      opacity: 1;
      visibility: visible;
      display: flex;
    `}
`,Md=Td,zd=r.ZP.div.attrs((()=>({"data-test":o.Sa.ToolControlBar})))`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  z-index: ${t=>t.theme.measurements.zIndex.toolControlBar};

  ${t=>t.show?r.iv`
          transition-timing-function: ease-in;
          transition-duration: 0.3s;
          transition-property: all;
          padding: 2px 0px;
          background: ${t.theme.toolControlBar.background};
          color: ${t.theme.toolControlBar.inputLabelForeground};
        `:r.iv`
          max-height: 0px;
        `}
`;zd.defaultProps={show:!0};var Pd=r.ZP.div`
  height: ${t=>t.theme.measurements.basicUIToolControlBar.itemsBarHeight}px;
  width: 2px;
  margin: 0 10px;
  display: inline-flex;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${t=>t.theme.toolControlBar.separatorColor};
  }
`,Id=Pd,Rd=r.ZP.span`
  display: flex;
  cursor: pointer;
  z-index: ${t=>t.theme.measurements.zIndex.label};
  transition: bottom 0.3s linear;

  color: ${t=>t.theme.toolbar.foreground};
  letter-spacing: ${t=>t.theme.measurements.fontSystem.body.letterSpacing};
  font-size: ${t=>t.theme.measurements.fontSystem.body.size}px;

  ${({isActive:t})=>t&&r.iv`
      color: ${t=>t.theme.toolbar.activeForeground};
    `}

  &:active {
    color: ${t=>t.theme.toolbar.activeForeground};
  }
`,Dd=r.iv`
  background-color: ${t=>t.theme.toolbar.activeBackground};
  color: ${t=>t.theme.toolbar.activeForeground};

  svg {
    color: ${t=>t.theme.toolbar.activeForeground};
  }
`,Od=(0,r.ZP)(v)`
  display: block;
  height: 100%;
  width: 100%;
  color: ${t=>t.theme.toolbar.foreground};
  background-color: ${t=>t.theme.toolbar.background};
  border: unset;
  box-shadow: unset;
  font-size: ${t=>t.theme.measurements.fontSystem.label.size}px;
  letter-spacing: ${t=>t.theme.measurements.fontSystem.label.letterSpacing}px;
  text-transform: ${t=>t.theme.measurements.fontSystem.label.case};
  font-family: '${t=>t.theme.typography.fontFamily}', sans-serif;

  ${({isActive:t})=>t&&Dd}
  ${({isDisabled:t})=>t&&r.iv`
      &:disabled {
        cursor: default;
        pointer-events: none;
        opacity: ${t=>t.theme.button.textInactiveOpacity};
      }
    `}

  &:active {
    ${Dd}
  }

  svg {
    display: flex;
    transition: visibility 0s, opacity 0.5s linear;
    visibility: visible;
    opacity: 1;
  }
`,Ld=r.ZP.div`
  display: flex;
  flex-direction: column;
  justify-content: center;
  align-items: center;

  svg {
    color: ${t=>t.theme.toolbar.foreground};
  }
`,Ad=r.ZP.div.attrs({role:"none"})`
  display: flex;
  height: ${t=>t.theme.measurements.basicUIToolbar.openHeight-2}px;
  text-align: center;
  min-width: 100px;
  /* Allow the text to grow in this limit */
  max-width: 150px;
  position: relative;
  /* Position inline-block box at the top of the line box */
  vertical-align: top;
  /* Allow text to wrap again, overwriting the Toolbar style */
  white-space: normal;
  margin: 1px;
`,_d=r.ZP.div`
  display: flex;
  flex-shrink: 0;
  justify-content: center;
  position: relative;
  width: 100%;
  transition: height 0.2s ease-out, display 0.1s fade-out;
  background-color: ${t=>t.theme.toolbar.background};
  color: ${t=>t.theme.toolbar.foreground};
  z-index: ${t=>t.theme.measurements.zIndex.toolbar};

  ${t=>t.show?r.iv`
          height: ${t.theme.measurements.basicUIToolbar.closeHeight}px;
          ${Od} {
            svg {
              visibility: hidden;
              opacity: 0;
              height: 0;
            }
          }
          ${Ad} {
            height: ${t.theme.measurements.basicUIToolbar.closeHeight}px;
          }
        `:r.iv`
          height: ${t.theme.measurements.basicUIToolbar.openHeight}px;
        `}
`,Fd=r.ZP.li.attrs({role:"none"})`
  ${t=>t.active?r.iv`
          height: ${t.theme.measurements.basicUIToolbar.closeHeight}px;
        `:r.iv`
          height: ${t.theme.measurements.basicUIToolbar.openHeight}px;
        `}
  width: 2px;
  display: inline-block;
  position: relative;
  &:after {
    content: ' ';
    right: 0px;
    position: absolute;
    top: 8px;
    height: calc(100% - 16px);
    border-right: 1px solid
      ${t=>t.theme.toolControlBar.separatorColor};
  }
`,$d={CardContainer:Os,ExpandableContainer:Md,CategoryContainer:As,Card:({type:t=o.G.MEDIUM,...e})=>{const i=t===o.G.LARGE;let r=Ds;return i&&(r=Rs),n.createElement(r,{type:t,...e})},CardAvatar:N,CardLabel:Ls,Toolbar:{Index:({show:t=!1,className:e,style:i,children:r})=>n.createElement(_d,{"data-test":o.Sa.Toolbar,show:t,className:e,style:i},n.createElement(lo,null,r)),Item:({children:t,label:e,isActive:i,isDisabled:r,onClick:s})=>n.createElement(Ad,{"aria-haspopup":!0,"aria-expanded":i},n.createElement(Od,{"data-test":o.Sa.ToolbarItem,ariaLabel:e,onClick:s,isActive:i,isDisabled:r},n.createElement(Ld,null,t,n.createElement(Rd,{isActive:i},e)))),Separator:Fd},BarSeparator:Ed,ItemsSeparator:Id,Itemsbar:zd,Controlsbar:Fs,ControlsbarContainer:Ns,ResponsiveTabWrapper:wd,Slider:kd,TabWrapper:Sd,Tab:Vs,Other:{ControlsWrapper:Bs,EmptyDiv:Hs}},Bd=(0,o.b)(a()),Hd=Ee((function(){const{active:t,modal:e,editor:i}=Us(),r=(0,n.useRef)(null),s=(0,n.useRef)(null),[a,l]=(0,n.useState)(0),[c,h]=(0,n.useState)(null),[d,p]=(0,n.useState)(0),[u,g]=(0,n.useState)(0);(0,n.useLayoutEffect)((()=>{const n=()=>{const{measurements:t}=i.configStore,{height:e,width:o}=s.current.getBoundingClientRect(),r=.95*e,n=.95*o,a=(e-r)/2;l(a<24+t.buttons.float.size?e-48-t.buttons.float.size/2:e-a+24),p(r),g(n)},a=new Mt((0,Bd.default)((()=>n()),100,{trailing:!0}));navigator.mediaDevices&&navigator.mediaDevices.getUserMedia?navigator.mediaDevices.getUserMedia({video:!0}).then((t=>{r.current.srcObject=t})).catch((()=>{e.showActionModal({type:o.H.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{t.selectWebcam(!1)}})})):e.showActionModal({type:o.H.ERROR,identifier:"webcamUnavailable",error:"Webcam not supported",handleConfirm:()=>{t.selectWebcam(!1)}}),n(),a.observe(s.current);const c=document.createElement("canvas");return h(c),()=>{(0,o.r)(c),a.disconnect()}}),[i,e,t]);const m=()=>{r.current.srcObject.getTracks().forEach((t=>{t.stop()})),r.current.srcObject=null,t.selectWebcam(!1)},f=t.webcamLabel;return n.createElement(Il.Wrapper,{ref:s},n.createElement(Il.Bar.Index,{transparentBackgound:!0,style:{justifyContent:"flex-end"}},n.createElement(Il.Bar.ButtonGroup,null,n.createElement(I,{ariaLabel:f,onClick:m},f))),n.createElement(Il.Webcam,{style:{height:d,width:u},autoPlay:!0,ref:r}),n.createElement(Il.Button.Float,{ariaLabel:"Click and Save",style:{top:a},onClick:()=>{c&&(c.width=r.current.videoWidth,c.height=r.current.videoHeight,c.getContext("2d").drawImage(r.current,0,0),t.newImage(c.toDataURL("image/webp")),m())}}))})),Nd=({children:t})=>n.createElement(Il.Container,{"data-test":o.Sa.CanvasContainer},t),Wd=Ee((({tool:t,fullWidth:e=!1,icon:i,label:r,onClick:s})=>{const{custom:a}=Us(),l=(()=>{const[t,e]=(0,n.useState)([]);return(0,n.useEffect)((()=>{var t;if(void 0!==typeof window&&(null==(t=window.navigator)?void 0:t.mediaDevices)){let t=!0;const i=()=>{window.navigator.mediaDevices.enumerateDevices().then((i=>{t&&e(i.map((({deviceId:t,groupId:e,kind:i,label:o})=>({deviceId:t,groupId:e,kind:i,label:o}))))})).catch((()=>null))};return window.navigator.mediaDevices.addEventListener("devicechange",i),i(),()=>{t=!1,window.navigator.mediaDevices.removeEventListener("devicechange",i)}}return null}),[]),t})();if(!l.some((({kind:t})=>"videoinput"===t)))return null;const c=a.getButton("toolControlBarSecondaryButton");return c?n.createElement(c,{"data-test":o.Sa.LibraryWebcamButton,tool:t,label:r,ariaLabel:r,onClick:s,fullWidth:e,icon:i}):null}))}}]);